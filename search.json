[
  {
    "objectID": "CHANGELOG.html",
    "href": "CHANGELOG.html",
    "title": "Changelog",
    "section": "",
    "text": "All notable changes to this project will be documented in this file.\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning. Dates formatted as YYYY-MM-DD as per ISO standard.\n\n\nSet up repository and defined scope of reproduction.\n\n\n\nCode from original study\nGreen open access version of study article from arXiv\nPlanned scope for reproduction\n\n\n\n\n\nModified template to be about Shoaib and Ramamohan 2022"
  },
  {
    "objectID": "CHANGELOG.html#v0.1.0---2024-06-21",
    "href": "CHANGELOG.html#v0.1.0---2024-06-21",
    "title": "Changelog",
    "section": "",
    "text": "Set up repository and defined scope of reproduction.\n\n\n\nCode from original study\nGreen open access version of study article from arXiv\nPlanned scope for reproduction\n\n\n\n\n\nModified template to be about Shoaib and Ramamohan 2022"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig4.html",
    "href": "reproduction/scripts/reproduce_fig4.html",
    "title": "Reproducing Figure 4",
    "section": "",
    "text": "This notebook aims to reproduce Figure 4 from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931."
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig4.html#parameters",
    "href": "reproduction/scripts/reproduce_fig4.html#parameters",
    "title": "Reproducing Figure 4",
    "section": "Parameters",
    "text": "Parameters\nIn this figure, we vary configuration 1 as follows:\n\nNumber of delivery beds: 2 or 3\nDelivery arrivals: 1, 1.5 or 2 per day\n\n1 = IAT 1440 (as in e.g. config1)\n1.5 = 960 (as 720+240=960, and 960+480=1440)\n2 = IAT 720 (as we did for Figure 3)"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig4.html#set-up",
    "href": "reproduction/scripts/reproduce_fig4.html#set-up",
    "title": "Reproducing Figure 4",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\n\n# To import results and produce figures\nfrom reproduction_helpers import process_results\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as ticker\nimport itertools\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\n# Paths to save image files to\noutput_folder = '../outputs'\nfig4_path = os.path.join(output_folder, 'fig4.png')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig4.html#run-model",
    "href": "reproduction/scripts/reproduce_fig4.html#run-model",
    "title": "Reproducing Figure 4",
    "section": "Run model",
    "text": "Run model\n\n# Varying number of childbirth cases\narr_dict = [\n    {\n        'delivery_iat': 1440,\n        'rep_file': 'arr1440'\n    },\n    {\n        'delivery_iat': 1080,\n        'rep_file': 'arr1080'\n    },\n    {\n        'delivery_iat': 960,\n        'rep_file': 'arr960'\n    },\n    {\n        'delivery_iat': 720,\n        'rep_file': 'arr720'\n    }\n]\n\n# Varying the number of beds\nbed_dict = [\n    {\n        'delivery_bed_n': 1,\n        'rep_file': 'bed1'\n    },\n    {\n        'delivery_bed_n': 2,\n        'rep_file': 'bed2'\n    }\n]\n\nCreate each combination for the reproduction\n\ndict_list = []\nfor arr in arr_dict:\n    for bed in bed_dict:\n        # Combine the dictionaries\n        comb = {**arr, **bed}\n        # Replace the file name\n        comb['rep_file'] = f'''f4_{arr['rep_file']}_{bed['rep_file']}.xls'''\n        # Save to list\n        dict_list.append(comb)\n\nlen(dict_list)\n\n8\n\n\n\n# Append 's_' to all items\nfor i, d in enumerate(dict_list):\n    dict_list[i] = {f's_{k}': v for k, v in d.items()}\n\n# Preview example\ndict_list[0]\n\n{'s_delivery_iat': 1440,\n 's_rep_file': 'f4_arr1440_bed1.xls',\n 's_delivery_bed_n': 1}\n\n\nRun the model (with parallel processing to reduce run time)\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool(8) as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, dict_list)\n\n No of replications done No of replications done  00\n\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 2\n No of replications done 3\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 3\n No of replications done 3\n No of replications done 4\n No of replications done 4\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 4\n No of replications done 5\n No of replications done 4\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 5\n No of replications done 5\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 5\n No of replications done 6\n No of replications done 7\n No of replications done 6\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 6\n No of replications done 7\n No of replications done 8\n No of replications done 9\n No of replications done 9\n No of replications done 9\n No of replications done 7\n No of replications done 9\n No of replications done 7\n No of replications done 8\n No of replications done 9\n No of replications done 8\n No of replications done 8\n No of replications done 9\n No of replications done 9\n No of replications done 9"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig4.html#process-results",
    "href": "reproduction/scripts/reproduce_fig4.html#process-results",
    "title": "Reproducing Figure 4",
    "section": "Process results",
    "text": "Process results\n\ndata = process_results([i['s_rep_file'] for i in dict_list], xls=True)\ndata.head()\n\n\n\n\n\n\n\n\nf4_arr1440_bed1\nf4_arr1440_bed2\nf4_arr1080_bed1\nf4_arr1080_bed2\nf4_arr960_bed1\nf4_arr960_bed2\nf4_arr720_bed1\nf4_arr720_bed2\n\n\n\n\nOPD patients\n33101.900000\n33194.200000\n33169.20000\n33202.900000\n33085.500000\n33191.200000\n33067.70000\n33071.400000\n\n\nIPD patients\n184.800000\n182.600000\n183.30000\n183.600000\n189.600000\n185.300000\n184.70000\n179.900000\n\n\nANC patients\n359.300000\n360.600000\n369.80000\n364.700000\n359.900000\n367.300000\n363.00000\n361.700000\n\n\nDel patients\n353.800000\n361.400000\n480.70000\n494.400000\n556.100000\n552.800000\n728.90000\n731.100000\n\n\nOPD Q wt\n0.008353\n0.008172\n0.01205\n0.012351\n0.011181\n0.014176\n0.01906\n0.018819"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig4.html#create-figure-4",
    "href": "reproduction/scripts/reproduce_fig4.html#create-figure-4",
    "title": "Reproducing Figure 4",
    "section": "Create Figure 4",
    "text": "Create Figure 4\n\n# Select series with proportion referred\na4 = data.loc['prop_del_referred']\n\n# Reshape into appropriate format for plotting\nnames = ['1 (IAT 1440)', '1.5 (IAT 960)', '1.5 (IAT1080)', '2 (IAT 720)']\nbed1 = [a4['f4_arr1440_bed1'], a4['f4_arr960_bed1'],\n        a4['f4_arr1080_bed1'], a4['f4_arr720_bed1']]\nbed2 = [a4['f4_arr1440_bed2'], a4['f4_arr960_bed2'],\n        a4['f4_arr1080_bed2'], a4['f4_arr720_bed2']]\n\ndata_4a = pd.DataFrame({'1 bed': bed1, '2 beds': bed2}, index=names)\ndata_4a\n\n\n\n\n\n\n\n\n1 bed\n2 beds\n\n\n\n\n1 (IAT 1440)\n0.147775\n0.017549\n\n\n1.5 (IAT 960)\n0.225166\n0.037351\n\n\n1.5 (IAT1080)\n0.185273\n0.033162\n\n\n2 (IAT 720)\n0.273051\n0.057273\n\n\n\n\n\n\n\n\nFunction to create figure\n\ndef create_figure4(df):\n    '''\n    Produces figure 4\n    '''\n    # Plot data\n    ax = df.plot(kind='line', color='black')\n\n    # Add markers\n    for l, ms in zip(ax.lines, itertools.cycle('so')):\n        l.set_marker(ms)\n        l.set_color('black')\n    ax.legend(title='Number of delivery beds')\n\n    # Add labels to each point\n    for line in ax.lines:\n        x_data = line.get_xdata()\n        y_data = line.get_ydata()\n        for x, y in zip(x_data, y_data):\n            ax.annotate(f'{y:.3f}', xy=(x, y), xytext=(3, 3),\n                        textcoords='offset points', fontsize=9)\n\n    # Adjust figure\n    plt.xlabel('Average number of childbirth patients per day')\n    plt.ylabel('Proportion of patients referred elsewhere')\n    plt.ylim(0, 0.3)\n    ax.xaxis.set_major_locator(ticker.MultipleLocator(1))\n    plt.grid(axis='y')\n    ax.set_axisbelow(True)\n\n\n\nEvaluating options\nDue to discrepancies observed for 1.5 arrivals, I presumed that the difference could be in the IAT used, since the paper only provides the number of arrivals and not the IAT. I estimated the IAT to be 960, but I also tried using 1080 (which is equidistant between the 1 and 2 arrival IAT values), as I have not identified a formula for how these are produced, and have only been able to estimate.\nFrom comparing the two options, 960 is closer for 2 beds whilst 1080 is closer for 1 bed. Since the difference is greatest for 1 bed, I opted to use that IAT.\n\ncreate_figure4(data_4a)\n# plt.savefig(fig4_path, bbox_inches='tight')\nplt.show()\n\n\n\n\n\n\n\n\n\n# Input results from original and reproduced figures\ncomp = pd.DataFrame({\n    'original': [0.021, 0.039, 0.039, 0.0599, 0.150, 0.195, 0.195, 0.270],\n    'reproduced': data_4a.iloc[:, 1].to_list() + data_4a.iloc[:, 0].to_list()})\ncomp['reproduced'] = round(comp['reproduced'], 3)\n\n# Find size of difference and % change\ncomp['diff'] = comp['reproduced'] - comp['original']\ncomp['pct_change'] = comp.pct_change(axis=1).iloc[:, 1]*100\ncomp\n\n\n\n\n\n\n\n\noriginal\nreproduced\ndiff\npct_change\n\n\n\n\n0\n0.0210\n0.018\n-0.0030\n-14.285714\n\n\n1\n0.0390\n0.037\n-0.0020\n-5.128205\n\n\n2\n0.0390\n0.033\n-0.0060\n-15.384615\n\n\n3\n0.0599\n0.057\n-0.0029\n-4.841402\n\n\n4\n0.1500\n0.148\n-0.0020\n-1.333333\n\n\n5\n0.1950\n0.225\n0.0300\n15.384615\n\n\n6\n0.1950\n0.185\n-0.0100\n-5.128205\n\n\n7\n0.2700\n0.273\n0.0030\n1.111111\n\n\n\n\n\n\n\n\n\nChosen figure (with IAT 1080)\n\n# Drop 960\ndata_4a_final = data_4a.drop(index='1.5 (IAT 960)')\n\n# Amend labels to match original\ndata_4a_final.index = [x.split(' (')[0] for x in data_4a_final.index.to_list()]\n\ncreate_figure4(data_4a_final)\nplt.savefig(fig4_path, bbox_inches='tight')\nplt.show()"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig4.html#run-time",
    "href": "reproduction/scripts/reproduce_fig4.html#run-time",
    "title": "Reproducing Figure 4",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 3m 0s\n\n\n\n\n\nFigure 4"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html",
    "href": "reproduction/scripts/reproduce_txt67.html",
    "title": "Reproducing in-text results 6 and 7",
    "section": "",
    "text": "This notebook aims to reproduce in-text results 6 and 7 from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\nIn-text result 6:\nIn-text result 7:"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#parameters",
    "href": "reproduction/scripts/reproduce_txt67.html#parameters",
    "title": "Reproducing in-text results 6 and 7",
    "section": "Parameters",
    "text": "Parameters\nThese results are variants on the scenario from Figure 2B, when the IAT is 3 minutes (170 arrivals/day) and the NCD nurse utilisation exceeds 100% (is at 123%). The variants are to:\n\nAssign administrative work to the staff nurse\nHave the staff nurse complete 10% of NCD checks"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#set-up",
    "href": "reproduction/scripts/reproduce_txt67.html#set-up",
    "title": "Reproducing in-text results 6 and 7",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\n\n# To import results and produce figures\nfrom reproduction_helpers import process_results\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\n# Paths to save results to\noutput_folder = '../outputs'\ntxt6_path = os.path.join(output_folder, 'intext6.csv')\ntxt7_path = os.path.join(output_folder, 'intext7.csv')\ntxt7_100rep_path = os.path.join(output_folder, 'intext7_100rep.csv')\ntxt7_20p_path = os.path.join(output_folder, 'intext7_20p.csv')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#function",
    "href": "reproduction/scripts/reproduce_txt67.html#function",
    "title": "Reproducing in-text results 6 and 7",
    "section": "Function",
    "text": "Function\nThis is a function for getting the NCD utilisation.\n\ndef get_util(df):\n    '''\n    Gets NCD utilisation and transforms the dataframe to aid readability\n\n    Parameters:\n    -----------\n    df : pandas DataFrame\n        Dataframe with mean results for different outputs\n\n    Returns:\n    --------\n    util : pandas DataFrame\n        Dataframe with the NCD utilisation in each scenario\n    '''\n    # Get NCD utilisation\n    util = round(pd.DataFrame(df.loc['NCD occ']).T, 3)\n\n    # Rename index and row\n    util = util.rename_axis('Output')\n    util = util.rename({'NCD occ': 'NCD nurse utilisation'})\n\n    # Rename columns\n    util = util.rename({\n        'in67_base': 'Normal',\n        'in6_base_admin': 'Admin from NCD to staff nurse',\n        'in7_base_appointment': '10% OPD appointments from NCD to staff nurse',\n        'in7_base_admin_appointment': (\n            'Admin and 10% OPD appointments from NCD to staff nurse'),\n        'in7_base_admin_appointment_100rep': (\n            'Admin and 10% OPD appointments from NCD to staff nurse'),\n        'in7_base_admin_appointment_20p': (\n            'Admin and 20% OPD appointments from NCD to staff nurse')}, axis=1)\n\n    return util"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#run-model",
    "href": "reproduction/scripts/reproduce_txt67.html#run-model",
    "title": "Reproducing in-text results 6 and 7",
    "section": "Run model",
    "text": "Run model\nAs per usual, I have run these with ten replications. These runs give us the results needed for in-text result 6 and 7.\n\ndict_list = [\n    {\n        'OPD_iat': 3,\n        'rep_file': 'in67_base.xls',\n    },\n    {\n        'OPD_iat': 3,\n        'admin_ncd_to_staff': True,\n        'rep_file': 'in6_base_admin.xls',\n    },\n    {\n        'OPD_iat': 3,\n        'opd_ncd_to_staff': 0.1,\n        'rep_file': 'in7_base_appointment.xls',\n    },\n    {\n        'OPD_iat': 3,\n        'admin_ncd_to_staff': True,\n        'opd_ncd_to_staff': 0.1,\n        'rep_file': 'in7_base_admin_appointment.xls',\n    }\n]\n\n\n# Append 's_' to all items\nfor i, d in enumerate(dict_list):\n    dict_list[i] = {f's_{k}': v for k, v in d.items()}\n\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool() as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, dict_list)\n\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 9\n No of replications done 9\n No of replications done 9\n No of replications done 9"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#process-results",
    "href": "reproduction/scripts/reproduce_txt67.html#process-results",
    "title": "Reproducing in-text results 6 and 7",
    "section": "Process results",
    "text": "Process results\n\n# Process results\ndata = process_results([i['s_rep_file'] for i in dict_list], xls=True)\n\n\nIn-text result 6\n\ntxt6 = get_util(data[['in67_base', 'in6_base_admin']])\n\n# Save and display results\ntxt6.to_csv(txt6_path)\ntxt6\n\n\n\n\n\n\n\n\nNormal\nAdmin from NCD to staff nurse\n\n\nOutput\n\n\n\n\n\n\nNCD nurse utilisation\n1.232\n0.995\n\n\n\n\n\n\n\n\n\nIn-text result 7\n\ntxt7 = get_util(data)\n\n# Save and display results\ntxt7.to_csv(txt7_path)\ntxt7\n\n\n\n\n\n\n\n\nNormal\nAdmin from NCD to staff nurse\n10% OPD appointments from NCD to staff nurse\nAdmin and 10% OPD appointments from NCD to staff nurse\n\n\nOutput\n\n\n\n\n\n\n\n\nNCD nurse utilisation\n1.232\n0.995\n1.069\n0.834"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#in-text-7-variant-run-model-with-100-replications",
    "href": "reproduction/scripts/reproduce_txt67.html#in-text-7-variant-run-model-with-100-replications",
    "title": "Reproducing in-text results 6 and 7",
    "section": "In-text 7 variant: Run model with 100 replications",
    "text": "In-text 7 variant: Run model with 100 replications\nWe typically run with 10 replications to save time, since results are often very similar between 10 and 100 replications. Regardless, to confirm that the difference observed for in-text result 7 is not due to the replication number, I ran it with 100 replications.\n\n'''PHC.main(s_OPD_iat=3,\n         s_admin_ncd_to_staff=True,\n         s_opd_ncd_to_staff=0.1,\n         s_replication=100,\n         s_rep_file='in7_base_admin_appointment_100rep.xls')'''\n\n\"PHC.main(s_OPD_iat=3,\\n         s_admin_ncd_to_staff=True,\\n         s_opd_ncd_to_staff=0.1,\\n         s_replication=100,\\n         s_rep_file='in7_base_admin_appointment_100rep.xls')\"\n\n\n\nres_100 = process_results(['in7_base_admin_appointment_100rep.xls'], xls=True)\ntxt7_100rep = get_util(res_100)\ntxt7_100rep.to_csv(txt7_100rep_path)\ntxt7_100rep\n\n\n\n\n\n\n\n\nAdmin and 10% OPD appointments from NCD to staff nurse\n\n\nOutput\n\n\n\n\n\nNCD nurse utilisation\n0.827"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#in-text-7-variant-run-model-with-20",
    "href": "reproduction/scripts/reproduce_txt67.html#in-text-7-variant-run-model-with-20",
    "title": "Reproducing in-text results 6 and 7",
    "section": "In-text 7 variant: Run model with 20%",
    "text": "In-text 7 variant: Run model with 20%\nAlthough the paper states that 10% of cases were transferred, I explored whether transferring 20% of cases resulted in a utilisation that was closer to the reported (71%).\n\n'''PHC.main(s_OPD_iat=3,\n         s_admin_ncd_to_staff=True,\n         s_opd_ncd_to_staff=0.2,\n         s_rep_file='in7_base_admin_appointment_20p.xls')'''\n\n\"PHC.main(s_OPD_iat=3,\\n         s_admin_ncd_to_staff=True,\\n         s_opd_ncd_to_staff=0.2,\\n         s_rep_file='in7_base_admin_appointment_20p.xls')\"\n\n\n\nres_20p = process_results(['in7_base_admin_appointment_20p.xls'], xls=True)\ntxt7_20p = get_util(res_20p)\ntxt7_20p.to_csv(txt7_20p_path)\ntxt7_20p\n\n\n\n\n\n\n\n\nAdmin and 20% OPD appointments from NCD to staff nurse\n\n\nOutput\n\n\n\n\n\nNCD nurse utilisation\n0.69"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt67.html#run-time",
    "href": "reproduction/scripts/reproduce_txt67.html#run-time",
    "title": "Reproducing in-text results 6 and 7",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 2m 49s"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt5.html",
    "href": "reproduction/scripts/reproduce_txt5.html",
    "title": "Reproducing in-text result 5",
    "section": "",
    "text": "This notebook aims to reproduce in-text result 5 from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\nIn-text result 5:"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt5.html#parameters",
    "href": "reproduction/scripts/reproduce_txt5.html#parameters",
    "title": "Reproducing in-text result 5",
    "section": "Parameters",
    "text": "Parameters\nThis result appears to build on configuration 1 but with:\n\nHigh demand conditions (2 inpatient and childbirth cases per day - as in Figure 3A-D with (2/2/2))\nVarying the number of inpatient beds (6 to 4)"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt5.html#set-up",
    "href": "reproduction/scripts/reproduce_txt5.html#set-up",
    "title": "Reproducing in-text result 5",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\n\n# To import results and produce figures\nfrom reproduction_helpers import process_results\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\n# Paths to save image files to\noutput_folder = '../outputs'\nsave_path = os.path.join(output_folder, 'intext5.csv')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt5.html#run-model",
    "href": "reproduction/scripts/reproduce_txt5.html#run-model",
    "title": "Reproducing in-text result 5",
    "section": "Run model",
    "text": "Run model\n\n# Define model variants\ndict_list = [\n    {\n        'inpatient_bed_n': 6,\n        'IPD_iat': 720,\n        'delivery_iat': 720,\n        'ANC_iat': 720,\n        'rep_file': 'in5_6bed.xls'\n    },\n    {\n        'inpatient_bed_n': 4,\n        'IPD_iat': 720,\n        'delivery_iat': 720,\n        'ANC_iat': 720,\n        'rep_file': 'in5_4bed.xls'\n    },\n]\n\n\n# Append 's_' to all items\nfor i, d in enumerate(dict_list):\n    dict_list[i] = {f's_{k}': v for k, v in d.items()}\n\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool() as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, dict_list)\n\n No of replications done 0\n No of replications done 0\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 3\n No of replications done 3\n No of replications done 4\n No of replications done 4\n No of replications done 5\n No of replications done 5\n No of replications done 6\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 8\n No of replications done 8\n No of replications done 9\n No of replications done 9"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt5.html#process-results",
    "href": "reproduction/scripts/reproduce_txt5.html#process-results",
    "title": "Reproducing in-text result 5",
    "section": "Process results",
    "text": "Process results\n\n# Process results\ndata = process_results([i['s_rep_file'] for i in dict_list], xls=True)\n\n# Get bed utilisation metrics\nresult = data.loc[['ipd bed occ', 'ipd occ']]\n\n# Relabel dataframe for readability\nresult = result.rename_axis('Output')\nresult = result.rename({'ipd bed occ': 'Inpatient bed utilisation (metric 1)',\n                        'ipd occ': 'Inpatient bed utilisation (metric 2)'})\nresult = result.rename({'in5_6bed': '6 beds',\n                        'in5_4bed': '4 beds'}, axis=1)\n\n# Save and display result\nresult.to_csv(save_path, index=True)\nresult\n\n\n\n\n\n\n\n\n6 beds\n4 beds\n\n\nOutput\n\n\n\n\n\n\nInpatient bed utilisation (metric 1)\n0.186271\n0.280377\n\n\nInpatient bed utilisation (metric 2)\n0.198000\n0.297000"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt5.html#run-time",
    "href": "reproduction/scripts/reproduce_txt5.html#run-time",
    "title": "Reproducing in-text result 5",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 2m 11s"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html",
    "href": "reproduction/scripts/reproduce_txt34.html",
    "title": "Reproducing in-text results 3 and 4",
    "section": "",
    "text": "This notebook aims to reproduce in-text results 3 and 4 from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\nIn-text result 3:\nIn-text result 4:"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html#parameters",
    "href": "reproduction/scripts/reproduce_txt34.html#parameters",
    "title": "Reproducing in-text results 3 and 4",
    "section": "Parameters",
    "text": "Parameters\nThis result starts with the doctor utilisation from Figure 2A which is over 100% when patient load is 170 (IAT 3) and appointment times are 5 minutes (mean 5, SD 1, boundary 2), and with admin assigned to the staff nurse rather than the doctor\nThe variants introduced are to reduce the doctor intervention during delivery so that:\n\n50% delivery cases: no doctor\n30% delivery cases: doctor but only one-third of typical intervention\n20% delivery cases: doctor and full intervention\n\nAnd adding an additional doctor."
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html#set-up",
    "href": "reproduction/scripts/reproduce_txt34.html#set-up",
    "title": "Reproducing in-text results 3 and 4",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\n\n# To import results and produce figures\nfrom reproduction_helpers import process_results\nimport pandas as pd\nimport os\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\n# Paths to save image files to\noutput_folder = '../outputs'\ntxt3 = os.path.join(output_folder, 'intext3.csv')\ntxt4 = os.path.join(output_folder, 'intext4.csv')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html#run-model",
    "href": "reproduction/scripts/reproduce_txt34.html#run-model",
    "title": "Reproducing in-text results 3 and 4",
    "section": "Run model",
    "text": "Run model\n\n# Parameters used in both models\nbase_model = {\n    'OPD_iat': 3,\n    'rep_file': 'arr170',\n    'mean': 5,\n    'sd': 1,\n    'consult_boundary_1': 2,\n    'consult_boundary_2': 2\n}\n\n# Model variants\nvariants = [\n    # Base case for in-text result 3 and 4\n    {\n        'rep_file': 'in34_normal.xls'\n    },\n    # Scenarios for in-text result 3\n    {\n        'admin_doc_to_staff': True,\n        'rep_file': 'in3_admin.xls'\n    },\n    {\n        'doctor_delivery_scenario': True,\n        'rep_file': 'in3_delivery.xls'\n    },\n    {\n        'doctor_delivery_scenario': True,\n        'admin_doc_to_staff': True,\n        'rep_file': 'in3_admin_delivery.xls'\n    },\n    # Scenarios for in-text result 4\n    {\n        'doc_cap': 3,\n        'rep_file': 'in4_doctor.xls'\n    },\n    {\n        'doc_cap': 3,\n        'doctor_delivery_scenario': True,\n        'admin_doc_to_staff': True,\n        'rep_file': 'in4_admin_delivery_doctor.xls'\n    },\n]\n\n\n# Combine dictionaries\ndict_list = []\nfor var in variants:\n    dict_list.append({**base_model, **var})\n\n# Append 's_' to all items\nfor i, d in enumerate(dict_list):\n    dict_list[i] = {f's_{k}': v for k, v in d.items()}\n\n# View example\ndict_list[0]\n\n{'s_OPD_iat': 3,\n 's_rep_file': 'in34_normal.xls',\n 's_mean': 5,\n 's_sd': 1,\n 's_consult_boundary_1': 2,\n 's_consult_boundary_2': 2}\n\n\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool() as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, dict_list)\n\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 7\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 9\n No of replications done 9\n No of replications done 9\n No of replications done 9\n No of replications done No of replications done  99"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html#process-results",
    "href": "reproduction/scripts/reproduce_txt34.html#process-results",
    "title": "Reproducing in-text results 3 and 4",
    "section": "Process results",
    "text": "Process results\n\ndata = process_results([i['s_rep_file'] for i in dict_list], xls=True)\ndata\n\n\n\n\n\n\n\n\nin34_normal\nin3_admin\nin3_delivery\nin3_admin_delivery\nin4_doctor\nin4_admin_delivery_doctor\n\n\n\n\nOPD patients\n43965.100000\n43965.100000\n44063.100000\n44063.100000\n44026.000000\n44088.300000\n\n\nIPD patients\n178.600000\n178.600000\n187.200000\n187.200000\n186.500000\n187.300000\n\n\nANC patients\n360.900000\n360.900000\n357.900000\n357.900000\n366.700000\n361.900000\n\n\nDel patients\n373.300000\n373.300000\n365.500000\n365.500000\n367.500000\n368.800000\n\n\nOPD Q wt\n6.936889\n6.936889\n6.643605\n6.643605\n0.542593\n0.520176\n\n\nPharmacy Q wt\n1.282328\n1.282328\n1.282265\n1.282265\n2.419622\n2.442825\n\n\nLab Q wt\n3.123766\n3.123766\n3.113023\n3.113023\n4.454260\n4.524105\n\n\ndoc occ\n1.141365\n1.023434\n1.131213\n1.013403\n0.761388\n0.675327\n\n\nLab patient list\n250794.800000\n250794.800000\n252130.800000\n252130.800000\n251894.800000\n253860.600000\n\n\nOPD q len\n6.851667\n6.851667\n6.619829\n6.619829\n0.537120\n0.514162\n\n\nipd occ\n0.098000\n0.098000\n0.098000\n0.098000\n0.098000\n0.097000\n\n\nopd q len\n0.812750\n0.812750\n0.779243\n0.779243\n0.063533\n0.061060\n\n\npharmacy q len\n0.149890\n0.149890\n0.150061\n0.150061\n0.282726\n0.286158\n\n\nlab q len\n0.185814\n0.185814\n0.186597\n0.186597\n0.266636\n0.272577\n\n\nNCD occ\n1.230139\n1.230139\n1.234149\n1.234149\n1.228365\n1.235298\n\n\nlab occ\n0.728652\n0.728652\n0.735114\n0.735114\n0.730388\n0.736550\n\n\npharm occ\n0.853658\n0.853658\n0.855077\n0.855077\n0.853199\n0.855696\n\n\nstaff nurse occ\n0.325778\n0.404399\n0.323088\n0.401629\n0.323845\n0.403779\n\n\ndel occ\n0.285000\n0.285000\n0.286000\n0.286000\n0.286000\n0.281000\n\n\ndel referred\n62.200000\n62.200000\n55.800000\n55.800000\n56.100000\n56.800000\n\n\nipd bed occ\n0.093865\n0.093865\n0.095156\n0.095156\n0.095393\n0.095193\n\n\nprop_del_referred\n0.166276\n0.166276\n0.152398\n0.152398\n0.152683\n0.153875\n\n\n\n\n\n\n\n\ndef get_utilisation(df, index_name, new_name):\n    '''\n    Creates dataframe with columns for utilisation (for a given row) before and\n    after scenario change.\n\n    Parameters:\n    -----------\n    df : pandas DataFrame\n        Results from across the replications\n    index_name : string\n        Name of row with utilisation data\n    new_name : string\n        To rename the utilisation row (e.g. doc occ -&gt; doctor utilisation)\n\n    Returns:\n    --------\n    util : pandas DataFrame\n        Dataframe with three columns for utilisation before and after admin,\n        and change in utilisation.\n    '''\n    # Get utilisation\n    util = round(pd.DataFrame(df.loc[index_name]).T, 3)\n\n    # Rename index\n    util = util.rename_axis('Output')\n\n    # Rename row\n    util = util.rename({index_name: new_name})\n\n    # Rename columns for clarity for readers\n    util = util.rename({\n        'in34_normal': 'Normal',\n        'in3_delivery': 'Less delivery',\n        'in3_admin': 'Less admin',\n        'in3_admin_delivery': 'Less admin + less delivery',\n        'in4_doctor': 'Extra doctor',\n        'in4_admin_delivery_doctor': (\n            'Extra doctor + less admin + less delivery')}, axis=1)\n\n    return util"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html#get-in-text-result-3",
    "href": "reproduction/scripts/reproduce_txt34.html#get-in-text-result-3",
    "title": "Reproducing in-text results 3 and 4",
    "section": "Get in-text result 3",
    "text": "Get in-text result 3\n\n# Get results for doctor utilisation and staff nurse utilisation\nsubset3 = data[['in34_normal', 'in3_delivery', 'in3_admin', 'in3_admin_delivery']]\nutil3 = pd.concat([\n    get_utilisation(subset3, 'doc occ', 'Doctor utilisation'),\n    get_utilisation(subset3, 'staff nurse occ', 'Staff nurse utilisation')])\n\n# Save results and display results\nutil3.to_csv(txt3, index=True)\nutil3\n\n\n\n\n\n\n\n\nNormal\nLess delivery\nLess admin\nLess admin + less delivery\n\n\nOutput\n\n\n\n\n\n\n\n\nDoctor utilisation\n1.141\n1.131\n1.023\n1.013\n\n\nStaff nurse utilisation\n0.326\n0.323\n0.404\n0.402"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html#get-in-text-result-4",
    "href": "reproduction/scripts/reproduce_txt34.html#get-in-text-result-4",
    "title": "Reproducing in-text results 3 and 4",
    "section": "Get in-text result 4",
    "text": "Get in-text result 4\n\n# Get results for doctor utilisation and staff nurse utilisation\nsubset4 = data[['in34_normal', 'in4_doctor', 'in4_admin_delivery_doctor']]\nutil4 = get_utilisation(subset4, 'doc occ', 'Doctor utilisation')\n\n# Save results and display results\nutil4.to_csv(txt4, index=True)\nutil4\n\n\n\n\n\n\n\n\nNormal\nExtra doctor\nExtra doctor + less admin + less delivery\n\n\nOutput\n\n\n\n\n\n\n\nDoctor utilisation\n1.141\n0.761\n0.675"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt34.html#run-time",
    "href": "reproduction/scripts/reproduce_txt34.html#run-time",
    "title": "Reproducing in-text results 3 and 4",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 3m 7s"
  },
  {
    "objectID": "quarto_site/study_publication.html",
    "href": "quarto_site/study_publication.html",
    "title": "Publication",
    "section": "",
    "text": "View at: https://github.com/pythonhealthdatascience/stars-reproduce-shoaib-2022/tree/main/original_study/PHC--main\nCode from: https://github.com/shoaibiocl/PHC-"
  },
  {
    "objectID": "quarto_site/study_publication.html#code-and-data",
    "href": "quarto_site/study_publication.html#code-and-data",
    "title": "Publication",
    "section": "",
    "text": "View at: https://github.com/pythonhealthdatascience/stars-reproduce-shoaib-2022/tree/main/original_study/PHC--main\nCode from: https://github.com/shoaibiocl/PHC-"
  },
  {
    "objectID": "quarto_site/study_publication.html#journal-article",
    "href": "quarto_site/study_publication.html#journal-article",
    "title": "Publication",
    "section": "Journal article",
    "text": "Journal article\nArticle published with SIMULATION:\n\nDOI: https://doi.org/10.1177/00375497211030931\nReference: Shoaib and Ramamohan (2022) (citation from 2022 as first published online in 2021 but journal publication was March 2022 Volume 98 Issue 3)\n\nInstead, uploaded article from ArXiv (shared under CC BY-NC-ND):\n\nDOI: https://doi.org/10.48550/arXiv.2104.12492\nReference: Shoaib and Ramamohan (2021)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Reproducing Shoaib and Ramamohan 2022",
    "section": "",
    "text": "This book captures the reproduction of:\n\nShoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\n\nUse the navigation bar above to view:\n\nOriginal study - the original study article and associated artefacts.\nReproduction - code and documentation from reproduction of the model.\nEvaluation - describes model reproduction success and compares original study against guidelines for sharing research, criteria for journal reproducibility guidelines, and article reporting guidelines.\nLogbook - chronological entries detailing reproduction work.\nSummary - summary of the computational reproducibility assessment."
  },
  {
    "objectID": "index.html#about",
    "href": "index.html#about",
    "title": "Reproducing Shoaib and Ramamohan 2022",
    "section": "",
    "text": "This book captures the reproduction of:\n\nShoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\n\nUse the navigation bar above to view:\n\nOriginal study - the original study article and associated artefacts.\nReproduction - code and documentation from reproduction of the model.\nEvaluation - describes model reproduction success and compares original study against guidelines for sharing research, criteria for journal reproducibility guidelines, and article reporting guidelines.\nLogbook - chronological entries detailing reproduction work.\nSummary - summary of the computational reproducibility assessment."
  },
  {
    "objectID": "index.html#project-team",
    "href": "index.html#project-team",
    "title": "Reproducing Shoaib and Ramamohan 2022",
    "section": "Project team",
    "text": "Project team\n\n\nConducting this reproduction:\n\nAmy Heather \n\nProviding support during the reproduction:\n\nThomas Monks \nAlison Harper \n\nOther members of the team on STARS:\n\nNavonil Mustafee \nAndrew Mayne"
  },
  {
    "objectID": "index.html#protocol",
    "href": "index.html#protocol",
    "title": "Reproducing Shoaib and Ramamohan 2022",
    "section": "Protocol",
    "text": "Protocol\nThe protocol for this work is summarised in the diagram below and archived on Zenodo:\n\nHeather, A., Monks, T., Harper, A., Mustafee, N., & Mayne, A. (2024). Protocol for assessing the computational reproducibility of discrete-event simulation models on STARS. Zenodo. https://doi.org/10.5281/zenodo.12179846.\n\n\n\n\nWorkflow for computational reproducibility assessment"
  },
  {
    "objectID": "index.html#citation",
    "href": "index.html#citation",
    "title": "Reproducing Shoaib and Ramamohan 2022",
    "section": "Citation",
    "text": "Citation\nAPA: Heather A., Monks T., Harper A. (2024). STARS: Computational reproducibility of Shoaib and Ramamohan 2022 (version 0.1.0). URL: https://github.com/pythonhealthdatascience/stars-reproduce-shoaib-2022\nSee CITATION.cff and citation_bibtex.bib for alternative formats."
  },
  {
    "objectID": "index.html#license",
    "href": "index.html#license",
    "title": "Reproducing Shoaib and Ramamohan 2022",
    "section": "License",
    "text": "License\nSee License page."
  },
  {
    "objectID": "logbook/logbook.html",
    "href": "logbook/logbook.html",
    "title": "Logbook",
    "section": "",
    "text": "These diary entries record daily progress in reproduction of the study, providing a transparent and detailed record of work.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDay 9\n\n\n\n\n\n\nguidelines\n\n\n\n\n\n\n\n\n\nJul 3, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 8\n\n\n\n\n\n\nreport\n\n\ncompendium\n\n\n\n\n\n\n\n\n\nJul 1, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 7\n\n\n\n\n\n\nreproduce\n\n\nguidelines\n\n\nreport\n\n\n\n\n\n\n\n\n\nJun 28, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 6\n\n\n\n\n\n\nreproduce\n\n\n\n\n\n\n\n\n\nJun 27, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 5\n\n\n\n\n\n\nreproduce\n\n\n\n\n\n\n\n\n\nJun 26, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 4\n\n\n\n\n\n\nreproduce\n\n\n\n\n\n\n\n\n\nJun 25, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 3\n\n\n\n\n\n\nreproduce\n\n\n\n\n\n\n\n\n\nJun 24, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 2\n\n\n\n\n\n\nscope\n\n\nread\n\n\nreproduce\n\n\n\n\n\n\n\n\n\nJun 21, 2024\n\n\nAmy Heather\n\n\n\n\n\n\n\n\n\n\n\n\nDay 1\n\n\n\n\n\n\nsetup\n\n\nread\n\n\nscope\n\n\n\n\n\n\n\n\n\nJun 20, 2024\n\n\nAmy Heather\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html",
    "href": "logbook/posts/2024_06_28/index.html",
    "title": "Day 7",
    "section": "",
    "text": "Note\n\n\n\nReproduced in-text result 5 but couldn’t get 7 so emailed author. Total time used: 28h 14m (70.6%). Completed individual evaluation against guidelines (just require second opinion on uncertain and unmet)."
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#continuing-to-troubleshoot-in-text-result-5",
    "href": "logbook/posts/2024_06_28/index.html#continuing-to-troubleshoot-in-text-result-5",
    "title": "Day 7",
    "section": "9.15-9.25, 9.31-9.41, 9.46-9.47: Continuing to troubleshoot in-text result 5",
    "text": "9.15-9.25, 9.31-9.41, 9.46-9.47: Continuing to troubleshoot in-text result 5\nI noticed that my “fix” of changing a 6 yesterday actually messed up the ipd bed occ results (they’re now 1.1 something). The change was:\n\nbed_util.append(bed_time/(days*1440*6)) to\nbed_util.append(bed_time/(days*1440*delivery_bed_n))\n\nHowever, logically, this looks like it should be right? Since the calculation is days (length of simulation), 1440 (24h in min), and then 6 (the standard number of beds). And it’s working out the proportion of time that beds are utilised, so it makes sense that this six should be the number of beds. Moreover, for the first result, it should’ve remained the same as before (as delivery_bed_n=6).\nI then realised my mistake! I had input delivery_bed_n when I should have input inpatient_bed_n! And this fixed it!\nReviewing the values, although they are a little lower (3-4%), they do represent a marked increase from the 6 bed values, and so I feel (bearing that in mind), that this difference is minimal enough to consider them successfully reproduced as of 9.47.\n\nimport sys\nsys.path.append('../')\nfrom timings import calculate_times\n\n# Minutes used prior to today\nused_to_date = 1536\n\n# Times from today\ntimes = [\n    ('9.15', '9.25'),\n    ('9.31', '9.41'),\n    ('9.46', '9.47')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 21m, or 0h 21m\nTotal used to date: 1557m, or 25h 57m\nTime remaining: 843m, or 14h 3m\nUsed 64.9% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#continuing-to-troubleshoot-in-text-result-7",
    "href": "logbook/posts/2024_06_28/index.html#continuing-to-troubleshoot-in-text-result-7",
    "title": "Day 7",
    "section": "9.53-10.03, 10.07-10.08, 10.35-11.00, 11.04-11.23: Continuing to troubleshoot in-text result 7",
    "text": "9.53-10.03, 10.07-10.08, 10.35-11.00, 11.04-11.23: Continuing to troubleshoot in-text result 7\nI can’t spot any issues in PHC.py currently, so I tried instead outputting the full results spreadsheet and to see if there could be any differences. However, the results for NCD nurse utilisation matched up with the results from the replication results.\nContinued looking over article, code and results to see if I can spot anything, to no avail.\nTried changing the proportion of cases assigned to the staff nurse to see what impact this had (although well aware that text does state that it is 10%, and not more). As expected, the utilisation drops further - here, with 20% of cases assigned, the utilisation dropped to 69% (which is much closer to the original study’s 71%). However, that doesn’t align with how they described the scenario in the text.\n\nimport pandas as pd\n\npd.read_csv('intext7_20.csv')\n\n\n\n\n\n\n\n\nOutput\nNormal\nAdmin from NCD to staff nurse\n20% OPD appointments from NCD to staff nurse\nAdmin and 20% OPD appointments from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n1.237\n1.007\n0.924\n0.689\n\n\n\n\n\n\n\nI considered changing the arrivals although, realistically, this should be fine, since in-text result 7 just builds on the scenario established in in-text result 6, which matches up to the text, and - as stated in Figure 2B - the doctor’s consultation time should not affect the outcome (so shouldn’t need to change that either).\nI kept looking back over everything, but still, could not spot anything. Have emailed Tom and Alison to ask for their thoughts (as well as to get consensus on reproduction of prior items). I’m not sure if this is necessarily a case for contacting the author or not, given that the scenario appears to have been successfully set up (with utilisation dropping - and dropping further if 20% assigned)."
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#email-from-tom-and-email-to-shoaib",
    "href": "logbook/posts/2024_06_28/index.html#email-from-tom-and-email-to-shoaib",
    "title": "Day 7",
    "section": "11.30-12.22, 13.15-13.45: Email from Tom and email to Shoaib",
    "text": "11.30-12.22, 13.15-13.45: Email from Tom and email to Shoaib\nTom confirmed the other items were successfully reproduced. He also gave thoughts on in-text result 7, having looked over the code.\n\nHe thought the scenario code I’d add was straightforward and logic seemed correct.\nHe suggested changing percentage of time to see what value is needed to get apx. 70% - I confirmed that 0.2 got close.\nHe asked about stability with replication. I double checked the change in NCD nurse utilisation between 10 and 100 replications (got results from Table 6 with 10 replications from old commit, processed and saved it with the logbook post from 24th June). Confirmed it was tiny. However, to rule it out, will re-run over lunch.\nHe suggested otherwise to contact the study authors to let them know we’ve been very successful but see if they have any suggestions for this one final thing that we can’t quite get to work.\n\nI did a bit of tidying prior to emailing to Shoaib, drafted the email, and ran 100 replications for the final scenario over lunch.\nI also then add the results from setting the help as 20% rather than 10% (modifying the way I set this up in PHC.py so I could easily do so from the notebook).\nI then sent the email to Shoaib. This now marks the end of my work on in-text result 7 (since emailing was part of the troubleshooting for that) - although I may work on this further if we receive a response from Shoaib with any suggestions."
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#timings-for-reproduction",
    "href": "logbook/posts/2024_06_28/index.html#timings-for-reproduction",
    "title": "Day 7",
    "section": "Timings for reproduction",
    "text": "Timings for reproduction\nAfter this point, unless otherwise noted, timings will be for the evaluation stage (which are seperate to the reproduction timings).\n\n# Minutes used prior to today\nused_to_date = 1536\n\n# Times from today\ntimes = [\n    ('9.15', '9.25'),\n    ('9.31', '9.41'),\n    ('9.46', '9.47'),\n    ('9.53', '10.03'),\n    ('10.07', '10.08'),\n    ('10.35', '11.00'),\n    ('11.04', '11.23'),\n    ('11.30', '12.22'),\n    ('13.15', '13.45')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 158m, or 2h 38m\nTotal used to date: 1694m, or 28h 14m\nTime remaining: 706m, or 11h 46m\nUsed 70.6% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#badges",
    "href": "logbook/posts/2024_06_28/index.html#badges",
    "title": "Day 7",
    "section": "14.05-14.17: Badges",
    "text": "14.05-14.17: Badges\nUncertain:\n\nLicense: Couldn’t remember if we’d agreed that a license added upon our request should be marked as a condition met or not. Tentatively marked as ‘1’.\nComplete: Uncertain on this, as I had to modify the script alot to get results (i.e. writing scenario logic). However, arguably, I did have all the information I would need to do that? Tentatively marked as ‘1’.\nStructure: Does use object-oriented programming (which is great), but parameters are hard coded and uses global variables. Tentatively marked as ‘0’."
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#stars",
    "href": "logbook/posts/2024_06_28/index.html#stars",
    "title": "Day 7",
    "section": "14.18-14.26: STARS",
    "text": "14.18-14.26: STARS\nUncertain:\n\nLicense: As for badges.\nORCID: Have marked as not met, as there are no ORCID in the repository, although Varun Ramamohan does have ORCID ID with publication in SIMULATION."
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#stress-des",
    "href": "logbook/posts/2024_06_28/index.html#stress-des",
    "title": "Day 7",
    "section": "14.28-14.57, 15.10-15.47: STRESS-DES",
    "text": "14.28-14.57, 15.10-15.47: STRESS-DES\nUncertain:\n\n1.2 Model outputs: Is what I have quoted sufficient for rating of “Partially”?\n\n\n\n\n\n\n\nReflections on STRESS-DES\n\n\n\nDoesn’t necessarily feel like names are essential (re: 1.3)\nNot certain on difference between (A) and (B) (re: 1.3)\nOverlap between 2.4 scheduling of arrivals and 2.5.5 detail the arrival mechanism"
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#ispor-sdm",
    "href": "logbook/posts/2024_06_28/index.html#ispor-sdm",
    "title": "Day 7",
    "section": "15.48-16.28: ISPOR-SDM",
    "text": "15.48-16.28: ISPOR-SDM\nUncertain:\n\n12 Cross-validation: Is my conclusion reasonable?\n14 Predictive validity: There’s alot of validation work done, but not sure I can spot this, or any justification against it?"
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#timings-for-evaluation",
    "href": "logbook/posts/2024_06_28/index.html#timings-for-evaluation",
    "title": "Day 7",
    "section": "Timings for evaluation",
    "text": "Timings for evaluation\n\n# Minutes used prior to today\nused_to_date = 0\n\n# Times from today\ntimes = [\n    ('14.05', '14.17'),\n    ('14.18', '14.26'),\n    ('14.28', '14.57'),\n    ('15.10', '15.47'),\n    ('15.48', '16.28')\n]\n\ncalculate_times(used_to_date, times, limit=False)\n\nTime spent today: 126m, or 2h 6m\nTotal used to date: 126m, or 2h 6m"
  },
  {
    "objectID": "logbook/posts/2024_06_28/index.html#summary-report",
    "href": "logbook/posts/2024_06_28/index.html#summary-report",
    "title": "Day 7",
    "section": "Summary report",
    "text": "Summary report\nWith evaluation complete (barring discussion on uncertainities and unmet), now started working on summary report."
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html",
    "href": "logbook/posts/2024_06_27/index.html",
    "title": "Day 6",
    "section": "",
    "text": "Note\n\n\n\nReproduced in-text results 3, 4 and 6. Progress with 5 and 7. Total time used: 25h 36m (64.0%)"
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#consensus",
    "href": "logbook/posts/2024_06_27/index.html#consensus",
    "title": "Day 6",
    "section": "Consensus",
    "text": "Consensus\nI emailed Figure 4 and in-text results 1 and 2 to Tom and Alison, who both confirmed that they agreed these to be successfully reproduced."
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#in-text-result-2",
    "href": "logbook/posts/2024_06_27/index.html#in-text-result-2",
    "title": "Day 6",
    "section": "9.22-9.34: In-text result 2",
    "text": "9.22-9.34: In-text result 2\nOn reflection, I realised that I had not looked at the result for staff nurse utilisation. Add this, and it was consistent with the text. Hence, successfully reproduced at 9.34.\n\nimport sys\nsys.path.append('../')\nfrom timings import calculate_times\n\n# Minutes used prior to today\nused_to_date = 1262\n\n# Times from today\ntimes = [\n    ('9.22', '9.34')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 12m, or 0h 12m\nTotal used to date: 1274m, or 21h 14m\nTime remaining: 1126m, or 18h 46m\nUsed 53.1% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#in-text-result-3",
    "href": "logbook/posts/2024_06_27/index.html#in-text-result-3",
    "title": "Day 6",
    "section": "9.37-10.32: In-text result 3",
    "text": "9.37-10.32: In-text result 3\nThis result varies whether and for how long the doctor intervenes in delivery\n\n50% delivery cases: no doctor\n30% delivery cases: doctor but only one-third of typical intervention\n20% delivery cases: doctor and full intervention\n\nIn PHC.py, there are two classes: Delivery_with_doctor() and Delivery_no_doc(). Ordinarily, these are used in the class Delivery(), arrivals during OPD hours will get delivery with doctor, and arrivals outside of hours will get without:\nif 0 &lt; (self.registration_time - N * 1440) &lt; 480:\n    Delivery_with_doctor(urgent=True)      # sets priority\nelse:\n    Delivery_no_doc(urgent=True)\nHence, I think to have 50% with no doctor, we add a sample from a uniform distribution of 0 to 1, and then either side of 0.5 they will get a doctor or not, where currently it just allows Delivery_with_doctor(). This is based on the assumption that this scenario is just referring to delivery cases during OPD hours, when a doctor could have otherwise intervened. I set this up with a doctor_delivery_scenario parameter in main() and then changes to Delivery().\n# If True for scenario where reduce doctor intervention...\nif doctor_delivery_scenario:\n    # Sample intervention probability (between 0 and 1)\n    int_prob = sim.Uniform(0, 1)\n    # Assign 50% to receive doctor, and 50% to not\n    if int_prob &gt;= 0.5:\n        Delivery_with_doctor(urgent=True)\n    else:\n        Delivery_no_doc(urgent=True)\n# If scenario not in place (i.e. base case, normal function),\n# then just assign all to receive doctor...\nelse:\n    Delivery_with_doctor(urgent=True)\nWhilst doing this, changed comments by inputs to main() into a doc string for clarity as I am often adjusting these.\nFor the cases where a doctor is provided, look to then have 60% receive partial intervention and 40% receive full intervention. In Delivery_with_doctor(), doctor time is sample twice (depending on whether or not the model is in the warm-up period or not). Both as: doc_time = round(sim.Uniform(30, 60, 'minutes').sample(),2). This contributes to doctor utilisation as follows:\n\nPatient.doc_service_time.append(doc_time)\ndoc_tot_time = sum(Patient.doc_service_time)\nz = doc_tot_time/(420*days*doc_cap)\ndoc_occupancy.append(z) - and then doc_occupancy is used to calculate utilisation in the replication results spreadsheet\n\nAs such, I introduced a probability of receiving shorter or longer times around this Uniform sampling. I assumed 1/3 normal intervention to mean that the sampled time is simply divided by three.\n# If we are in a scenario where we are reducing the time spent\n# by doctors during delivery to one third of normal time, for 60%\n# of delivery patients...\nif doctor_delivery_scenario:\n    # Sample to get probability of short intervention\n    short_int_prop = sim.Uniform(0, 1)\n    if short_int_prop &gt;= 0.4:\n        doc_time = doc_time / 3\nHowever, this came back wrong, with very little change in utilisation:\n\nimport pandas as pd\n\npd.read_csv('intext3_wrong.csv')\n\n\n\n\n\n\n\n\nOutput\nNormal delivery\nReduced doctor intervention\nChange\n\n\n\n\n0\nDoctor utilisation\n1.142\n1.131\n-0.011\n\n\n1\nStaff nurse utilisation\n0.323\n0.321\n-0.002\n\n\n\n\n\n\n\n\n\n\n\n\n\nReflections\n\n\n\nAs before, time spent working out how to implement scenarios from the article"
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#problem-solving-in-text-result-3",
    "href": "logbook/posts/2024_06_27/index.html#problem-solving-in-text-result-3",
    "title": "Day 6",
    "section": "10.41-11.16, 11.28-11.47: Problem-solving in-text result 3",
    "text": "10.41-11.16, 11.28-11.47: Problem-solving in-text result 3\nNoticed I hadn’t add global doctor_delivery_scenario to Delivery_with_doctor, and that I hadn’t add the scenario to the warm-up section either. However, that seemed to have no impact -\n\nimport pandas as pd\n\npd.read_csv('intext3_wrong2.csv')\n\n\n\n\n\n\n\n\nOutput\nNormal delivery\nReduced doctor intervention\nChange\n\n\n\n\n0\nDoctor utilisation\n1.140\n1.129\n-0.011\n\n\n1\nStaff nurse utilisation\n0.321\n0.323\n0.002\n\n\n\n\n\n\n\nI tried running it with print statements after the 50% chance of doctor assignment, which confirmed that patients were being split between getting a doctor and not. I also ran with print statement around shortening of doctor time, which likewise confirmed that around 60% were having their times shortened.\nI looked across all the outputs and could spot only minor differences between the normal and reduced delivery results.\nI then tried setting the implementation up in a different way - instead of assigning people to the Delivery_no_doc() class, setting the intervention time to 0 in the Delivery_with_doctor() class. However, this made no difference:\n\npd.read_csv('intext3_wrong3.csv')\n\n\n\n\n\n\n\n\nOutput\nNormal delivery\nReduced doctor intervention\nChange\n\n\n\n\n0\nDoctor utilisation\n1.144\n1.129\n-0.015\n\n\n1\nStaff nurse utilisation\n0.326\n0.320\n-0.006\n\n\n\n\n\n\n\nOn reflection, I wondered if perhaps I had misinterpreted this scenario - and that actually, this scenario was on top of the change in admin, and that the language was ambiguous (that actually, it could be describing doing this seperately or in addition). This then resolved the issue, with results matching up to the paper. Hence, feel it is successfully reproduced at 11.47.\n\n\n\n\n\n\nReflections\n\n\n\nPotential misinterpretation of scenarios from a text description which can be ambiguous.\n\n\n\n# Minutes used prior to this item\nused_to_date = 1274\n\n# Times from today\ntimes = [\n    ('9.37', '10.32'),\n    ('10.41', '11.16'),\n    ('11.28', '11.47')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 109m, or 1h 49m\nTotal used to date: 1383m, or 23h 3m\nTime remaining: 1017m, or 16h 57m\nUsed 57.6% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#reproducing-in-text-result-4",
    "href": "logbook/posts/2024_06_27/index.html#reproducing-in-text-result-4",
    "title": "Day 6",
    "section": "11.55-12.03, 12.06-12.11: Reproducing in-text result 4",
    "text": "11.55-12.03, 12.06-12.11: Reproducing in-text result 4\nIt is again unclear whether the intervention in this case - adding a doctor - is in addition to or seperate to the prior interventions. As such, I will try running both options (just on top of base case, or in addition to admin and delivery changes).\nEither result matches up with the description, so present both as possible answers, but consder to be succesfully reproduced at 12.11\n\n# Minutes used prior to this item\nused_to_date = 1383\n\n# Times from today\ntimes = [\n    ('11.55', '12.03'),\n    ('12.06', '12.11')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 13m, or 0h 13m\nTotal used to date: 1396m, or 23h 16m\nTime remaining: 1004m, or 16h 44m\nUsed 58.2% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#times-below-start-on-in-text-result-5-and-amend-result-3s-table",
    "href": "logbook/posts/2024_06_27/index.html#times-below-start-on-in-text-result-5-and-amend-result-3s-table",
    "title": "Day 6",
    "section": "Times below: Start on in-text result 5 (and amend result 3’s table)",
    "text": "Times below: Start on in-text result 5 (and amend result 3’s table)\nTimes:\n\n12.14-12.18\n12.21-12.37\n12.41-12.56\n13.38-13.53\n15.10-15.23\n\nRe-ran with less delivery as an option alone for in-text result 3 (as this was missing from the table but would provide helpful context). Whilst that ran, started on in-text result 5.\nThis result appears to build on configuration 1 but with:\n\nHigh demand conditions (2 inpatient and childbirth cases per day - as in Figure 3A-D with (2/2/2))\nVarying the number of inpatient beds (6 to 4)\n\nHowever, changing the bed number with inpatient_bed_n had no impact on results, with utilisation at 18% for 4 and 6 beds.\nThis was based on ipd bed occ - although I noticed that ipd occ had results of 0.196 and then 0.295, which - if that is referring to utilisation - is much closer to the paper result of 33%. I explored how each of these were calculated:\nipd bed occ:\n\nThis was what I used for inpatient bed utilisation in Table 6 and Figure 3C\nipd bed occ is equal to bed_util\nbed_util is based on bed_time - bed_util.append(bed_time/(days*1440*6))\nbed_time is used in Delivery_no_doc(), Delivery_with_doctor(), IPD_no_doc(), and IPD_with_doc(). In each case, it is bed_time += y, where y is sampling from a distribution (e.g. y = sim.Uniform(240, 1440, 'minutes').sample(), y = sim.Triangular(60, 360, 180, 'minutes').bounded_sample(0))\n\nipd occ:\n\nCreated from bed_occupancy_list\nThat is based on bed.occupancy: bed_occupancy_list.append(round(bed.occupancy.mean(), 2))\nbed is made from sim.Resource(\"Bed\", capacity=inpatient_bed_n). It is used in Delivery_no_doc(), Delivery_with_doctor(), IPD_no_doc(), and IPD_with_doc()\nIn Salabim, a Resource occupancy is described as “occupancy (=claimed_quantity / capacity)”, which fits with being related to utilisation.\n\nHence, both methods should be providing utilisation of the beds (since both are based on time the beds are in use over the total possible time) - yet they have differing results - particularly when set to 4 beds.\n\npd.read_csv('intext5_wrong.csv', index_col=0)\n\n\n\n\n\n\n\n\nin5_6bed\nin5_4bed\n\n\n\n\nipd bed occ\n0.185185\n0.185522\n\n\nipd occ\n0.196000\n0.295000\n\n\n\n\n\n\n\nipd occ is based on the bed SimPy resource, which is what we altered to change the number of beds. Hence, it seems the bed capacity has been altered for that, but not altered somewhere for ipd bed occ.\nI looked back at the calculation of ipd bed occ and noticed that bed utilisation has 6 beds hard coded into it - bed_util.append(bed_time/(days*1440*6)). When I amended the script to adjust the bed capacity via a parameter input to main(), I had not noticed this, and had only changed it in the simpy Resource. I amended this accordingly and re-ran. Unfortunately, this did not fix it.\n\npd.read_csv('intext5_wrong2.csv', index_col=0)\n\n\n\n\n\n\n\n\nin5_6bed\nin5_4bed\n\n\n\n\nipd bed occ\n1.122112\n1.115264\n\n\nipd occ\n0.198000\n0.295000\n\n\n\n\n\n\n\nI then searched for all occurrences of the number 6, but identified nothing further that related to the number of beds.\nStruggling to identify a solution, I moved onto the next item in the scope, and plan to return to this later.\n\n\n\n\n\n\nReflections\n\n\n\nConfusion from duplicate outputs.\nHard-coding of parameters (which can then be tricky to spot afterwards to change)."
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#reproducing-in-text-result-6",
    "href": "logbook/posts/2024_06_27/index.html#reproducing-in-text-result-6",
    "title": "Day 6",
    "section": "15.24-15.55: Reproducing in-text result 6",
    "text": "15.24-15.55: Reproducing in-text result 6\nThis result is a variant of Figure 2B IAT 3, where we assign administrative work to the staff nurse to decrease the utilisation of the NCD nurse.\nIn the normal model, the admin work is assigned to the doctor and the NCD nurse. We previously add a various to move the work from the doctor to the staff nurse. Similar to last time, we add another variant, this time moving work from the NCD nurse to the staff nurse. I amended the name of the boolean controlling it for the in-text results 3/4 (for clarity, distinguishing between that scenario and this one), and re-ran that notebook.\nThe resultant NCD utilisation was 100%, as in the paper, so consider to be successfully reproduced at 15.55.\n\n# Minutes used prior to this item\nused_to_date = 1396\n\n# Times from today\ntimes = [\n    ('12.14', '12.18'),\n    ('12.21', '12.37'),\n    ('12.41', '12.56'),\n    ('13.38', '13.53'),\n    ('15.10', '15.23'),\n    ('15.24', '15.55')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 94m, or 1h 34m\nTotal used to date: 1490m, or 24h 50m\nTime remaining: 910m, or 15h 10m\nUsed 62.1% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#starting-on-in-text-result-7",
    "href": "logbook/posts/2024_06_27/index.html#starting-on-in-text-result-7",
    "title": "Day 6",
    "section": "15.58-16.44: Starting on in-text result 7",
    "text": "15.58-16.44: Starting on in-text result 7\nThis scenario appears to build on-top of the change in admin work (“in addition to the administrative work”). In it, 10% of the NCD cases are assigned to the staff nurse instead of the NCD nurse.\nIn PHC.py, I can see that the NCD nurses do admin and do OPD appointments. The appointments are in the class Patient(), and if OPD_PatientGenerator.OPD_List[OPD_PatientGenerator.patient_count][\"Age\"] &gt;= 30, then it requests an NCD nurse (yield self.request((NCD_Nurse, 1))). Their time spent is then saved to:\nPatient.NCD_Nurse_time_list.append(x)\nPatient.NCD_Nusre_1_time += x\nncd_time += x\nThis code is repeated before and after warm-up (with the difference being in whether results are saved). As such, to implement this scenario, it appears I need to change this section to instead:\n\nRequest a staff nurse - from other sections, can see this is yield self.request(staff_nurse)\nSave the time to the staff nurse time - from other sections, can see this is:\n\nMain.NT_list.append(temp)\nMain.SN_time += z\nMain.staff_nurse_IPD += temp\n\nThe NT_list is what I modified for in-text result 2.\nSN_time appears to be legacy code, as it is not used in the results section.\nstaff_nurse_IPD is used to store staff nurse time specifically spent on IPD (as opposed to delivery or ANC). It is just used in the large results spreadsheet. However, this is specific to IPD appointments rather than OPD.\n\nI sampled from a uniform distribution to control assignment of 10% of cases to the staff nurse.\nUpon running the model, I found these modifications reduced the NCD nurse utilisation markedly (99% to 84%), although not as much as in the paper (100% to 71%).\n\npd.read_csv('intext7_close.csv')\n\n\n\n\n\n\n\n\nOutput\nNormal\nAdmin from NCD to staff nurse\nAdmin and 10% OPD appointments from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n1.236\n0.982\n0.835\n\n\n\n\n\n\n\nI tried adding a scenario with just appointments (and not the admin change), just in case this could relate to misinterpretation of the next (although wouldn’t expect it to go lower, so wasn’t optimistic). As expected, this was not the solution, and the results were higher.\n\npd.read_csv('intext7_wrong.csv')\n\n\n\n\n\n\n\n\nOutput\nNormal\nAdmin from NCD to staff nurse\n10% OPD appointments from NCD to staff nurse\nAdmin and 10% OPD appointments from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n1.237\n0.989\n1.071\n0.834"
  },
  {
    "objectID": "logbook/posts/2024_06_27/index.html#timings",
    "href": "logbook/posts/2024_06_27/index.html#timings",
    "title": "Day 6",
    "section": "Timings",
    "text": "Timings\n\n# Minutes used prior to today\nused_to_date = 1262\n\n# Times from today\ntimes = [\n    ('9.22', '9.34'),\n    ('9.37', '10.32'),\n    ('10.41', '11.16'),\n    ('11.28', '11.47'),\n    ('11.55', '12.03'),\n    ('12.06', '12.11'),\n    ('12.14', '12.18'),\n    ('12.21', '12.37'),\n    ('12.41', '12.56'),\n    ('13.38', '13.53'),\n    ('15.10', '15.23'),\n    ('15.24', '15.55'),\n    ('15.58', '16.44')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 274m, or 4h 34m\nTotal used to date: 1536m, or 25h 36m\nTime remaining: 864m, or 14h 24m\nUsed 64.0% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html",
    "href": "logbook/posts/2024_06_20/index.html",
    "title": "Day 1",
    "section": "",
    "text": "Note\n\n\n\nSet up and scope. Total time used: 3h 59m (10.0%)"
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#set-up-repository",
    "href": "logbook/posts/2024_06_20/index.html#set-up-repository",
    "title": "Day 1",
    "section": "10.16-10.35: Set up repository",
    "text": "10.16-10.35: Set up repository\n\nCreate repository from template\nSet up environment\nSet up site on GitHub pages (quarto publish gh-pages)\nAmendments to files to reflect current paper (e.g. author name, citation):\n\nREADME.md\nquarto site index.qmd\nCITATION.cff\n_quarto.yml"
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#upload-code-to-repository-and-check-license",
    "href": "logbook/posts/2024_06_20/index.html#upload-code-to-repository-and-check-license",
    "title": "Day 1",
    "section": "10.41-10.43: Upload code to repository and check license",
    "text": "10.41-10.43: Upload code to repository and check license\nModel code from: https://github.com/shoaibiocl/PHC-. Downloaded repository and copied folder PHC--main into original_study/.\nThey shared under MIT license, so no amendments to our license required."
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#upload-journal-article-to-repository-and-compare-between-arxiv-and-simulation-version",
    "href": "logbook/posts/2024_06_20/index.html#upload-journal-article-to-repository-and-compare-between-arxiv-and-simulation-version",
    "title": "Day 1",
    "section": "10.44-11.15: Upload journal article to repository and compare between arxiv and simulation version",
    "text": "10.44-11.15: Upload journal article to repository and compare between arxiv and simulation version\nArticle is published with SIMULATION and is not open access: https://journals.sagepub.com/doi/10.1177/00375497211030931 (https://doi.org/10.1177/00375497211030931). Button to request reuse takes you to reuse which has charges for reuse.\nSearched for green open access version of article and identified pre-print on arxiv: https://arxiv.org/abs/2104.12492 (https://doi.org/10.48550/arXiv.2104.12492). That is shared via CC BY-NC-ND 4.0. This means we can:\n\nShare the article (inc. the images from the article)\nMust give attribution - appropriate credit, provide link to license, and indicate if changes are made\nND (NoDerivatives) - so cannot make any modifications to the article or images (inc. e.g. colour changes etc) - which is fine as don’t plan to do so\n\nAs such, saved the article as preprint.pdf within original_study/.\nSIMULATION first published online 18 July 2021. The pre-print was first submit 15 Feb 2021 with second version 21 June 2021 (after the SIMULATION date, hence anticipating should be similar). Glanced between the pre-print and publication in SIMULATION to look for differences:\n\nText - broadly looks very similar, spotted one difference (“Next, for assigning ages to outpatients” v.s. “Later, for assigning ages to outpatients”), and so there may be more.\nTables and figures - contents looked similar, spotted differences:\n\nTable 2 + 3 + 4 + 5 + 6 + C.1 footnotes - more abbreviations provided in SIMULATION paper\nFormatting differences for tables\nFigures provided seperately in pre-print (e.g. 2a vs 2b vs 2c vs 2d rather than all as a single figure - although that does make them easier to read when they are seperate)\n\n\nEmbed in study_publication.qmd with links."
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#detailed-comparison-of-exercept-from-the-two-papers",
    "href": "logbook/posts/2024_06_20/index.html#detailed-comparison-of-exercept-from-the-two-papers",
    "title": "Day 1",
    "section": "11.40-12.00: Detailed comparison of exercept from the two papers",
    "text": "11.40-12.00: Detailed comparison of exercept from the two papers\nDecided to do a more thorough comparison of the text content, to confirm that the arxiv version was appropriate to use. Converted files from arxiv and simulation to text using pdftotext on the command line. Then copied section-by-section into https://text-compare.com/ to look carefully for differences.\nCompared Abstract through to section 3.3. Found no cause for concern. Only differences were in spelling and grammar, or minor differences in phrasing (e.g. abbreviating words, abbreviating numbers, “etc” v.s. “among others”, “et al.” vs using second author surname). As such, stopped comparing at this point.\n\n\n\n\n\n\nReflection\n\n\n\nTook a while to do this stage (for simplicity, including all set-up in timing, but worth being aware that this has added a fair bit of extra time to if we could have just used the original article, so worth reflecting on whether should definitely be included in time, or if be aware of set-up times but perhaps would want to subtract from the overall times?)"
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#add-proper-citations-to-study_publication.qmd",
    "href": "logbook/posts/2024_06_20/index.html#add-proper-citations-to-study_publication.qmd",
    "title": "Day 1",
    "section": "13.10-13.15: Add proper citations to study_publication.qmd",
    "text": "13.10-13.15: Add proper citations to study_publication.qmd\nUpdated references.bib to include citations for SIMULATION and arXiv sources, and included those on study_publication.qmd, as well as a link to the license."
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#read-journal-article",
    "href": "logbook/posts/2024_06_20/index.html#read-journal-article",
    "title": "Day 1",
    "section": "13.18-14.00, 14.15-14.36: Read journal article",
    "text": "13.18-14.00, 14.15-14.36: Read journal article\nTook some notes whilst reading the first part of the paper, but mostly just highlighted the paper after that. Not shared highlights as license under CC BY-NC-ND so doesn’t allow modifications.\nTook some initial notes on scope which have incorporated in scope section below\n\n\n\n\n\n\nReading notes\n\n\n\n\n\nDiscrete-event simulations to model primary health centres (PHC) in India\n\nPHC are first point of contact with trained doctor\n\nRationale:\n\nEfforts in India towards “establishing new PHCs, upgrading existing primary health infrastructure, and increasing medical personnel numbers”, but “their operational effectiveness and influence on improving public health accessibility is not adequately quantified.” and there is a need for “assessment of theoperational aspects of these facilities before more resources are invested in their upgradation and/or establishing new PHC infrastructure.”\nProvides “template for developing models of similar primary/secondary healthcare facilities”\n“limited literature regarding whole facility simulation models that cater to multiple patient types with distinct clinical and operational flows through the facility (similar to PHCs). This is likely because most healthcare DES studies are undertaken to help analyse and/or solve specific problems associated with a facility, whereas our study aims to contribute towards establishing the computational infrastructure required to analyse the public health system in a region.”\n“our research contribution here involves the inclusion of limited inpatient care and childbirth care in our PHC models inaddition to modelling general OPD consultations and emergency cases”\n“our literature search did not yield any study that computationally examined: a) PHC operations, and b) how their operational performance would respond to changes in demand and/or capacity. Further, there appears to be very limited healthcare facility simulations in general in the Indian context. Our study aims to address these gaps.”\n\nModel design:\n\nVisited “multiple PHCs in a semi- urban/rural district in North India and collecting data regarding their operational patterns.”\nThen designed “archetypal or ‘generic’ DES model of PHC operations based on the commonalities” and “adapt (reuse with modification) this generic model to represent the different operational configurations encountered in our visits.”\nAlso compared with “benchmark configuration conforming to government-mandated operational guidelines, with demand estimated from disease burden data and service times closer to international estimates, which are significantly higher than observed service times at the PHCs.”\n\nFour patient types:\n\nOutpatients\nInpatients and/or emergency (“requiring care and observation for brief periods” e.g. injuries, diarrhoea)\nChildbirth\nAntenatal\n\nResources:\n\nDoctors (1 or 2, depending on configuration)\nNurses: (a) non-communicable disease trained, present during outpatient hours (b) staff nurses, for inpatient/emergency/childbird\nPharmacists (outpatient hours)\nLaboratory technician (outpatient hours)\nInpatient and childbirth beds\n\nFocus:\n\n“operational outcomes such as the average waiting time of patients for various resources (e.g., doctors, pharmacy, clinical laboratory), resource utilisation levels across the PHC, and the proportions of childbirth patients who wait longer than a certain time threshold.”\n“experiments to quantify how these PHC configurations respond to changes (increases) in demand, and identify solutions to potentially improve operational efficiency under conditions of high demand.”"
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#defining-scope",
    "href": "logbook/posts/2024_06_20/index.html#defining-scope",
    "title": "Day 1",
    "section": "14.37-15.01: Defining scope",
    "text": "14.37-15.01: Defining scope\nTables:\n\nTable 1 - n/a\nTable 2 - n/a\nTable 3 - n/a\nTable 4 - n/a\nTable 5 - no - about internal validation of model rather than results of model - don’t think focus is on validation of parameters, but instead, outcome of model built on those parameters, so would class as not in scope\nTable 6 - definitely in scope!\n\nFigures:\n\nFigure 1 - n/a\nFigure 2 - definitely in scope - but uncertain over whether to treat A / B / C / D as seperate figures or as one figure? In arXiv paper, they are presented quite seperately (although they are put together more in the simulation paper).\nFigure 3 - as for figure 2\nFigure 4 - in scope\n\nResults from the abstract or results section that I can’t currently spot as being covered by the tables and figures:\n\n\n\n\n\n\n\n\nSections quoted from Shoaib and Ramamohan (2021)\nPrecise result to be reproduced\nThoughts on whether to include in scope\n\n\n\n\n4.3 “We also note that waiting times for outpatient-related resources (laboratory, OPD consultation, etc. - not depicted in Figures 3a – 3d) increase marginally because the associated resources are also required by inpatient/childbirth/ANC cases, which increase in number in the above scenarios”\nNo - just marginal increase\nNo? Could argue not in scope, as all you’re aiming for is “seeing a marginal increase” - but likewise, if you saw the opposite of that, you could argue it’s not being reproduced. However, leaning towards the latter as nothing precise\n\n\n4.3.1 “To address this, we experimented with letting the staff nurse (whose utilisation is approximately 32%) take over the administrative work. This led to a 12% drop in the utilisation level, which implied that the doctor’s utilisation still exceeded 100%. Implementing this measure resulted in increasing the staff nurse utilisation to nearly 40%.”\nStaff nurse does all administrative work (none to doctor). Look at impact on doctor’s utilisation. When have outpatient load 170 patients per day.\nMaybe? - depends if I have interpreted the described scenario correctly\n\n\n4.3.1 “then considered a situation wherein the staff nurses require minimal intervention in childbirth cases. We assumed that in 50% of childbirth cases, staff nurses require no intervention by the doctor; require only one- third of the typical amount of intervention in 30% of cases, and require full intervention in the remaining 20% of cases. This led to a decrease of the doctor’s utilisation to 101% (a further decrease of approximately 1%), and an increase in the nurse’s utilisation to 40%.”\n50% childbirth have no doctor. 30% have one-third of typical amount of doctor intervention. 20% have full doctor intervention. Look at doctor and nurse utilisation. Normal doctor attendance described in 3.3.3 is that, if doctor is available, patient is attended by both a doctor and a staff nurse - and if not available, then they attend once available, with first-come first-serve alongside inpatient. In Table 4, can see doctor childbirth service time is from uniform distribution with min 30 max 60.\nYes? Think it might be in scope, and has precise results to reproduce\n\n\n4.3.1 “investigated the effect of stationing an additional doctor in the PHC. This yielded an average utilisation of well below 100% for each doctor.”\nNo precise result\nNo? Potentially not as doesn’t have a precise result, just “well below 100%”\n\n\n4.3.2 “We also observe that if the number of beds is reduced to four from six, the utilisation level is observed to be approximately thirty-three percent even under higher demand conditions (two inpatient and childbirth cases/day).”\nApx. 33% inpatient bed utilisation when there are four bed and there are 2 inpatient and childbirth cases per day\nMaybe? Only gives an approximate result which it says holders “even under higher demand” but is not specific to those conditions, and so could be a few percent different or more, depending on interpretation of “approximate”. Hence, not sure if precise enough to reproduce.\n\n\n4.3.3 “When the administrative work alone is assigned to the staff nurse the average utilisation of the NCD nurse decreases to 100%”\nOutpatient IAT 3 min and administrative work just performed by staff nurse (and not NCD nurse), NCD nurse utilisation 100%\nMaybe? Might be precise enough?\n\n\n4.3.3 “Further, in addition to the administrative work when the staff nurse assisted for NCD checks (for 10% cases) the utilisation of NCD nurse dropped to 71%.”\nIf 10% cases assigned to staff nurse instead of NCD, when outpatient IAT 3 min, NCD utilisation is 71%\nMaybe? Might be precise enough, assuming I’ve interpreted scenario correctly?\n\n\n\nAppendix C - not relevant, focused on validation."
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#discussed-scope-with-tom",
    "href": "logbook/posts/2024_06_20/index.html#discussed-scope-with-tom",
    "title": "Day 1",
    "section": "15.15-15.36: Discussed scope with Tom",
    "text": "15.15-15.36: Discussed scope with Tom\n\nTreat sub-figures as seperate figures.\nFor marginal/non-precise results in text, decided to include in scope and to see if we get a result that meets our judgement (e.g. our judgement of “big change” and so on), but if we think it doesn’t, can check with the original study authors if they know what the actual change they observed was, to confirm if the result is definitely different or just down to subjective differences\nAgreed on how I had interpreted some of the scenarios described in the text\nSuggested including results from the discussion as well, and found one more result, but agree it was covered by the text - “For example, as the sensitivity analyses with consultation times for doctors closer to international levels showed, PHC resources become stressed even when only 30% of current healthcare demand is addressed at a PHC. Further, we also find that a significant proportion of childbirth patients (approximately 16- 28% when the number of childbirth cases/day varies from 1-2) wait longer than two hours before receiving admission into the childbirth facility (bed) at a PHC”\nAfter, Tom double-checked discussion again and spotted no further items"
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#uploading-items-from-scope",
    "href": "logbook/posts/2024_06_20/index.html#uploading-items-from-scope",
    "title": "Day 1",
    "section": "15.59-16.53: Uploading items from scope",
    "text": "15.59-16.53: Uploading items from scope\nUploading:\n\nFigures as images\nTables as images\nTables as CSV\nResults from text as CSV\n\nDisplaying uploads within scope.qmd, along with description of decision."
  },
  {
    "objectID": "logbook/posts/2024_06_20/index.html#timings",
    "href": "logbook/posts/2024_06_20/index.html#timings",
    "title": "Day 1",
    "section": "Timings",
    "text": "Timings\n\nimport sys\nsys.path.append('../')\nfrom timings import calculate_times\n\n# Minutes used prior to today\nused_to_date = 0\n\n# Times from today\ntimes = [\n    ('10.16', '10.35'),\n    ('10.41', '10.43'),\n    ('10.44', '11.15'),\n    ('11.40', '12.00'),\n    ('13.10', '13.15'),\n    ('13.18', '14.00'),\n    ('14.15', '14.36'),\n    ('14.37', '15.01'),\n    ('15.15', '15.36'),\n    ('15.59', '16.53')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 239m, or 3h 59m\nTotal used to date: 239m, or 3h 59m\nTime remaining: 2161m, or 36h 1m\nUsed 10.0% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_26/index.html",
    "href": "logbook/posts/2024_06_26/index.html",
    "title": "Day 5",
    "section": "",
    "text": "Note\n\n\n\nReproduced Figure 4 and in-text results 1 and 2. Total time used: 21h 2m (52.6%)"
  },
  {
    "objectID": "logbook/posts/2024_06_26/index.html#times-below-creating-figure-4",
    "href": "logbook/posts/2024_06_26/index.html#times-below-creating-figure-4",
    "title": "Day 5",
    "section": "Times below: Creating Figure 4",
    "text": "Times below: Creating Figure 4\nTimes here (as lots to put in header):\n\n9.31-9.49\n10.04-10.50\n11.01-11.48\n11.56-12.02\n12.50-12.56\n13.08-13.38\n\nFrom text, understand this analysis to be variants of configruation one where the number of beds is increased by 1 or 2, and where the number of childbirth arrivals is 1, 1.5 or 2 per day.\nWorking out IAT:\n* 1 = IAT 1440 (as in e.g. config1)\n* 1.5 = 960 (as 720+240=960, and 960+480=1440)\n* 2 = IAT 720 (as we did for Figure 3)\nAs for others, just run 10 replications. The paper states they run 100, but that takes ages, and so I’ve taken the approach that - if it seems reasonably similar enough with 10 replications - I’m happy with it at this point. For posterity, can run all with 100 now or at the end if desired. As these just present mean results, I would only expect it to have a fairly minimal impact for mean of 10 v.s. 100 replications. For Table 6, I did run 100 replications as it was mean and SD.\nHowever, this is not correct:\n\nRealised this was my mistake and I had mis-interpreted it as adding 1 or 2 extra beds, but instead, it was simply having 1 or 2 beds in total. Upon re-reading the text again, this was definitely my mistake and not the article. Upon amending this, the figure looks much closer.\n\nI was reasonably confident in this being correct, but anticipate the differences here would likely be resolved by doing 100 replications rather than 10. As such, tried running more replications (25 still instead of 100 due to time). Notebook run time 7m 16s.\nThis brought the result closer, although still some small differences.\n\nAs the figure is labelled, I can compare the numbers:\n\nimport pandas as pd\n\n# Input results from original and reproduced figures\ncomp = pd.DataFrame({\n    'original': [0.021, 0.039, 0.0599, 0.150, 0.195, 0.270],\n    'reproduced': [0.019, 0.036, 0.060, 0.157, 0.218, 0.276]})\n\n# Find size of difference and % change\ncomp['diff'] = comp['reproduced'] - comp['original']\ncomp['pct_change'] = comp.pct_change(axis=1).iloc[:, 1]*100\ncomp\n\n\n\n\n\n\n\n\noriginal\nreproduced\ndiff\npct_change\n\n\n\n\n0\n0.0210\n0.019\n-0.0020\n-9.523810\n\n\n1\n0.0390\n0.036\n-0.0030\n-7.692308\n\n\n2\n0.0599\n0.060\n0.0001\n0.166945\n\n\n3\n0.1500\n0.157\n0.0070\n4.666667\n\n\n4\n0.1950\n0.218\n0.0230\n11.794872\n\n\n5\n0.2700\n0.276\n0.0060\n2.222222\n\n\n\n\n\n\n\nThey’re very similar, and the only difference I’m uncertain about is 1 bed with 1.5 arrivals, as the actual size of the difference is 0.023 (19.5% referred elsewhere v.s. 21.8% referred elsewhere).\nHowever, I think it is honestly pretty similar, and given that all the other points are very close. I tried running with 10 replications again to see if it looked particularly different, but came out as 0.221.\nSince everything else looks right, I guessed it could potentially be related to the IAT used for 1.5 births. Although I’m pretty confident in my estimated value, I decided to try running it with a different IAT - just using a value equidistant between 720 and 1440. When I did this, we got a much closer result for the 1 bed, but a more different result for the 2 bed, for 1.5 births.\n\nI again decided to try upping this to 25 replications to see if that has an impact.\n\nDue to the differing results observed, I decided to run both IATs for 100 replications and use the results from that that best matched the original paper. However, this was heating up the computer and VS Code crashed at 80 replications (before any results are saved). I then tried 25 replications, but this experienced an error and seemed to get stuck running one of the models after that -\nTraceback (most recent call last):\n  File \"/home/amy/mambaforge/envs/shoaib2022/lib/python3.9/site-packages/salabim/salabim.py\", line 4784, in step\n    next(c._process)\n  File \"/home/amy/Documents/stars/stars-reproduce-shoaib-2022/reproduction/PHC.py\", line 290, in process\n    yield self.hold(sim.Normal(5,1).bounded_sample())\n  File \"/home/amy/mambaforge/envs/shoaib2022/lib/python3.9/site-packages/salabim/salabim.py\", line 12058, in hold\n    self._reschedule(scheduled_time, priority, urgent, \"hold\")\n  File \"/home/amy/mambaforge/envs/shoaib2022/lib/python3.9/site-packages/salabim/salabim.py\", line 11827, in _reschedule\n    raise ValueError(\"scheduled time ({:0.3f}) before now ({:0.3f})\".format(scheduled_time, self.env._now))\nValueError: scheduled time (91194.770) before now (91195.054)\nAs that had taken 15 minutes and also alot of compute power, I decided to go with the simplest approach: to run again but with 10 replications, as I have done for prior figures (for consistency with prior figures, and as I know from experimenting between 10 and 25 replications, that often this only has a fairly small impact on the mean values observed).\nI then chose the IAT which produced results closest to the original paper (based on the assumption that the original authors might have reasonably used either value, since it is not provided and since I do not know the method used to estimate these).\nAt 13.38, decided this was successfully reproduced.\n\n\n\n\n\n\nReflections\n\n\n\nFound it a bit tricky to work out to go from number of arrivals to inter-arrival rate. Still not quite sure on how, beyond making estimates based on provided arrivals and IAT.\nModels that take a long time to run are a bit trickier to work with as it limits what you can do while you wait\nHave assumed here that potentially the result might be from two IAT (cannot guarnatee that to be the case, but is what enabled me to get more consistent results with original paper). Regardless of what is true in this case (as we cannot necessarily know), a learning here is that if you do directly change parameters in a script for scenarios, it potentially leaves more margin for error than if it is done programmatically.\n\n\n\nimport sys\nsys.path.append('../')\nfrom timings import calculate_times\n\n# Minutes used prior to today\nused_to_date = 1012\n\n# Times from today\ntimes = [\n    ('9.31', '9.49'),\n    ('10.04', '10.50'),\n    ('11.01', '11.48'),\n    ('11.56', '12.02'),\n    ('12.50', '12.56'),\n    ('13.08', '13.38')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 153m, or 2h 33m\nTotal used to date: 1165m, or 19h 25m\nTime remaining: 1235m, or 20h 35m\nUsed 48.5% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_26/index.html#in-text-result-1",
    "href": "logbook/posts/2024_06_26/index.html#in-text-result-1",
    "title": "Day 5",
    "section": "13.42-14.13: In-text result 1",
    "text": "13.42-14.13: In-text result 1\nUsed output from creating Figure 3, but focussed on waiting times for lab and OPD. Saved results as tables as actual change in minutes is only small, but plotting the figures makes it appear larger than it is.\nSatisifed that these represent “marginal increases” in these outcomes, and consider successfully reproduced at 14.13.\n\n# Minutes used prior to this reslut\nused_to_date = 1165\n\n# Times from today\ntimes = [\n    ('13.42', '14.13')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 31m, or 0h 31m\nTotal used to date: 1196m, or 19h 56m\nTime remaining: 1204m, or 20h 4m\nUsed 49.8% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_26/index.html#simplifying-reproduction-code",
    "href": "logbook/posts/2024_06_26/index.html#simplifying-reproduction-code",
    "title": "Day 5",
    "section": "15.05-15.22: Simplifying reproduction code",
    "text": "15.05-15.22: Simplifying reproduction code\nEncountering increasing repetition between reproduction notebooks, so decided to create reproduction_helpers.py with process_results() function as it is used frequently between notebooks."
  },
  {
    "objectID": "logbook/posts/2024_06_26/index.html#in-text-result-2",
    "href": "logbook/posts/2024_06_26/index.html#in-text-result-2",
    "title": "Day 5",
    "section": "15.39-16.23, 16.28-16.33: In-text result 2",
    "text": "15.39-16.23, 16.28-16.33: In-text result 2\nThis result starts with the doctor utilisation from Figure 2A which is over 100% when patient load is 170 (IAT 3) and appointment times are 5 minutes (mean 5, SD 1, boundary 2). The variant introduced is to give all administrative work to the staff nurse. This is not something that can currently be modified in main().\nThe class Main() mentions this, \"For sensitivity analysis. Admin work added to staff nurse rather than doctor\", but it is not clear what to modify in that section to change assignment of admin work.\nI worked through how admin work is generated and used throughout the script…\n\n\n\n\n\n\nHow admin work is generated and used\n\n\n\n\n\nThe script explains that the arrival of admin work is generated within Main(). It is generated by:\nk = int(sim.Normal(100,20).bounded_sample(60,140))\nIf it is not warmup, then k is used as follows:\nPatient.doc_service_time.append(k)\nMain.NCD_admin_work.append(k)\nncd_time += k\nDoc_service_time\nThe doc_service_time is composed of several times in a list (Patient.doc_service_time.append(doc_time), Patient.doc_service_time.append(total)) that are sum to find doc_tot_time (total time during 365 days) (doc_tot_time = sum(Patient.doc_service_time)).\nNCD_admin_work\nNCD_admin_work is add to sumi (for i in Main.NCD_admin_work: sumi += i) then cleared (Main.NCD_admin_work = []). sumi is:\n\nAdd to total_admin_work which is add to NCD nurse time and used to calculate Total_NCD_time.\n\nThat is add to NCD_occ_list, which is used in both results spreadsheets to find NCD nurse utilisation.\n\nUsed to calculate doctor admin time in the large results spreadsheet (whilst doctor admin time is not included in the replication results spreadsheet).\nUsed to calculate NCD nurse OPD time for the large results spreadsheet\n\nncd_time\nncd_time is composed of k (sampled admin work) and x (related to patient OPD visits). It is appended to ncd_util (ncd_util.append(ncd_time/(420*365))). ncd_util is the second NCD occ in the replication results spreadsheet. This row contains duplicate results with another NCD occ, and that row is based on NCD_occ_list (as mentioned above).\n\n\n\nAfter this, I understood that admin work was currently given to both the doctor and the NCD nurse - and therefore, the change would be to add it to the staff nurse instead of the doctor in that else statement (which is as mentioned in that comment in the script, but wasn’t clear to me upon first looking).\nThe doctor admin time is add via Patient.doc_service_time.append(k).\nLooking at the replication results spreadsheet, staff nurse occ is nurse_occ_list.\nThat list is created from nurse_occ_list.append((sum(Main.NT_list)+180*days)/(21*60*days)).\nThe NT_list is the nurse time list. It is created from Main.NT_list.append(temp) (which occurs several times in the script). In each case, temp refers to a sampled time (e.g. temp = sim.Uniform(120, 240, 'minutes').sample(), temp = sim.Triangular(8, 20.6, 12.3).sample()).\nAs such, I think that we should be able to add the admin work to the nurse time by appending k to NT_list. I amended PHC.py to enable input of a boolean to main() that adjusts who receives that time in Main().\nI observed a decrease in utilisation of 12% (114% utilisation to 102%).\n\n\n\n\n\n\nReflections\n\n\n\nMaking it clear and easy to modify the model - as least, for the variants presented in the paper. In this case, challenging to identify how to re-allocate admin tasks."
  },
  {
    "objectID": "logbook/posts/2024_06_26/index.html#timings",
    "href": "logbook/posts/2024_06_26/index.html#timings",
    "title": "Day 5",
    "section": "Timings",
    "text": "Timings\n\n# Minutes used prior to today\nused_to_date = 1012\n\n# Times from today\ntimes = [\n    ('9.31', '9.49'),\n    ('10.04', '10.50'),\n    ('11.01', '11.48'),\n    ('11.56', '12.02'),\n    ('12.50', '12.56'),\n    ('13.08', '13.38'),\n    ('13.42', '14.13'),\n    ('15.05', '15.22'),\n    ('15.39', '16.23'),\n    ('16.28', '16.33')\n]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 250m, or 4h 10m\nTotal used to date: 1262m, or 21h 2m\nTime remaining: 1138m, or 18h 58m\nUsed 52.6% of 40 hours max"
  },
  {
    "objectID": "evaluation/reporting.html",
    "href": "evaluation/reporting.html",
    "title": "Reporting guidelines",
    "section": "",
    "text": "This page evaluates the extent to which the journal article meets the criteria from two discrete-event simulation study reporting guidelines:\nAs cited throughout, any extracts from the paper on this page are sourced from Shoaib and Ramamohan (2021), which is shared under CC BY-NC-ND."
  },
  {
    "objectID": "evaluation/reporting.html#stress-des",
    "href": "evaluation/reporting.html#stress-des",
    "title": "Reporting guidelines",
    "section": "STRESS-DES",
    "text": "STRESS-DES\nOf the 24 items in the checklist:\n\n17 were met fully (✅)\n6 were partially met (🟡)\n1 was not met (❌)\n\n\n\n\n\n\n\n\n\n\nItem\nRecommendation\nMet by study?\nEvidence\n\n\n\n\nObjectives\n\n\n\n\n\n1.1 Purpose of the model\nExplain the background and objectives for the model\n✅ Fully\nExtensive description of healthcare context, gaps in the literature, and how this model addresses these. For example, from the Introduction: • The model “can provide researchers and analysts in other countries with similar hierarchical public health systems with a template for developing models of similar primary/secondary healthcare facilities”• “We found very limited work that utilises a generic modelling approach for simulating primary healthcare delivery facilities that handle multiple patient types (with distinct clinical and operational flows through multiple facility units) and services (the PHC provides outpatient care, childbirth, antenatal services, limited inpatient care, pharmacy and clinical laboratory services). Thus, another key research contribution of this study involves addressing the above research gap.”Shoaib and Ramamohan (2021)\n\n\n1.2 Model outputs\nDefine all quantitative performance measures that are reported, using equations where necessary. Specify how and when they are calculated during the model run along with how any measures of error such as confidence intervals are calculated.\n🟡 Partially\nA few example measures are mentioned in the Introduction: “Operational outcomes such as the average waiting time of patients for various resources (e.g., doctors, pharmacy, clinical laboratory), resource utilisation levels across the PHC, and the proportions of childbirth patients who wait longer than a certain time threshold.”In Table 6, a few measures are briefly defined - e.g. “Mean length of pharmacy queue (number of patients)”. However, many measures are not defined.Shoaib and Ramamohan (2021)\n\n\n1.3 Experimentation aims\nIf the model has been used for experimentation, state the objectives that it was used to investigate.(A) Scenario based analysis – Provide a name and description for each scenario, providing a rationale for the choice of scenarios and ensure that item 2.3 (below) is completed.(B) Design of experiments – Provide details of the overall design of the experiments with reference to performance measures and their parameters (provide further details in data below).(C) Simulation Optimisation – (if appropriate) Provide full details of what is to be optimised, the parameters that were included and the algorithm(s) that was be used. Where possible provide a citation of the algorithm(s).\n✅ Fully\nScenarios were sufficiently described throughout that I was able to reproduce (although language could be a little bit ambiguous in some places).Example of scenario description from 4.3.1 Doctor's Utilisation: “The sensitivity analyses reveal that at an average outpatient load of 170 patients per day, the utilisation of doctors increases substantially with increases in the mean service time and exceeds 100% at an average consultation time of five minutes/patient, implying that doctors may stay longer than the designated working hours to serve all patients arriving within the designated working hours. To address this, we experimented with letting the staff nurse (whose utilisation is approximately 32%) take over the administrative work. This led to a 12% drop in the utilisation level, which implied that the doctor’s utilisation still exceeded 100%.”Shoaib and Ramamohan (2021)\n\n\nLogic\n\n\n\n\n\n2.1 Base model overview diagram\nDescribe the base model using appropriate diagrams and description. This could include one or more process flow, activity cycle or equivalent diagrams sufficient to describe the model to readers. Avoid complicated diagrams in the main text. The goal is to describe the breadth and depth of the model with respect to the system being studied.\n✅ Fully\nFigure 1: Patient flow in the archetypal PHCShoaib and Ramamohan (2021)\n\n\n2.2 Base model logic\nGive details of the base model logic. Give additional model logic details sufficient to communicate to the reader how the model works.\n✅ Fully\nModel configurations described extensively in 3.3 Patient Flow.\n\n\n2.3 Scenario logic\nGive details of the logical difference between the base case model and scenarios (if any). This could be incorporated as text or where differences are substantial could be incorporated in the same manner as 2.2.\n✅ Fully\nDifference between model configurations are described extensively throughout 3 Model Development, and information on scenarios is provided in 4 Simulation Experiments and Results.Table 3: PHC configurationsShoaib and Ramamohan (2021)\n\n\n2.4 Algorithms\nProvide further detail on any algorithms in the model that (for example) mimic complex or manual processes in the real world (i.e. scheduling of arrivals/ appointments/ operations/ maintenance, operation of a conveyor system, machine breakdowns, etc.). Sufficient detail should be included (or referred to in other published work) for the algorithms to be reproducible. Pseudo-code may be used to describe an algorithm.\n✅ Fully\nProvides information on processes in 3.4 Estimation of Simulation Parameters and Table 4: Facility independent input parametersShoaib and Ramamohan (2021)\n\n\n2.5.1 Components - entities\nGive details of all entities within the simulation including a description of their role in the model and a description of all their attributes.\n✅ Fully\nEach patient type is described in 3.3 Patient Flow (3.3.1 Outpatient Department, 3.3.2 Inpatient Department, 3.3.3 Childbirth Patients, 3.3.4 ANC Patients)\n\n\n2.5.2 Components - activities\nDescribe the activities that entities engage in within the model. Provide details of entity routing into and out of the activity.\n✅ Fully\nActivities are described in 3.3 Patient Flow and illustrated in Figure 1: Patient flow in the archetypal PHCShoaib and Ramamohan (2021)\n\n\n2.5.3 Components - resources\nList all the resources included within the model and which activities make use of them.\n✅ Fully\nThe resources are listed in 3.3 Patient Flow - “All PHC resources – doctors, NCD nurses, staff nurses, pharmacy, the laboratory – are shared by all patient types, where applicable”. Their use is then described in that section, and illustrated in Figure 1: Patient flow in the archetypal PHCShoaib and Ramamohan (2021)\n\n\n2.5.4 Components - queues\nGive details of the assumed queuing discipline used in the model (e.g. First in First Out, Last in First Out, prioritisation, etc.). Where one or more queues have a different discipline from the rest, provide a list of queues, indicating the queuing discipline used for each. If reneging, balking or jockeying occur, etc., provide details of the rules. Detail any delays or capacity constraints on the queues.\n✅ Fully\nDescribed in 3.3 Patient Flow - for example, 3.3.2 Inpatient Department: “inpatients have nonpreemptive priority in comparison to outpatients with regard to consulting with the doctor – that is, if the doctor is busy with an outpatient when an inpatient arrives, the inpatient moves to the head of the outpatient queue. The doctor then attends to the inpatient once they are finished consulting with the outpatient”\n\n\n2.5.5 Components - entry/exit points\nGive details of the model boundaries i.e. all arrival and exit points of entities. Detail the arrival mechanism (e.g. ‘thinning’ to mimic a non-homogenous Poisson process or balking)\n✅ Fully\nModel boundaries clearly illustrated by Figure 1: Patient flow in the archetypal PHC. (Entry at top, exit at bottom).Arrival mechanism described in 3.4 Estimation of Simulation Parameters, e.g. “Patient arrival (for all four patient types, and for each configuration) is modeled by using an exponential distribution for the interarrival time”Shoaib and Ramamohan (2021)\n\n\nData\n\n\n\n\n\n3.1 Data sources\nList and detail all data sources. Sources may include:• Interviews with stakeholders,• Samples of routinely collected data,• Prospectively collected samples for the purpose of the simulation study,• Public domain data published in either academic or organisational literature. Provide, where possible, the link and DOI to the data or reference to published literature.All data source descriptions should include details of the sample size, sample date ranges and use within the study.\n✅ Fully\nVery detailed description. Examples…3.1 Generic Modelling Approach and PHC Operational Data Collection:“We visited nine PHCs (out of ten total) in a north Indian district with a mix of urban, semi-urban, and rural populations to collect data regarding PHC operations. Permission to visit these PHCs and collect operational data was obtained from the district civil surgeon. Data collected included operational patterns (e.g., patient flow), staffing and resource levels”…Table 1: Data summary of staffing level, patient load and other facilities at PHCsTable 2: Service time summary for key PHC resources3.2.1 Benchmark PHC Configuration: “we estimated the demand for primary care using morbidity data from the Brookings India report. We used the disease incidence data reported for a ten-month period in India from the Brookings report to estimate the number of people seeking medical care in the district where thePHCs we visited were located. Next, using the percentage contribution of each disease”… (continues)Shoaib and Ramamohan (2021)\n\n\n3.2 Pre-processing\nProvide details of any data manipulation that has taken place before its use in the simulation, e.g. interpolation to account for missing data or the removal of outliers.\n✅ Fully\nDetailed description, with examples as for 3.1 Data sources.\n\n\n3.3 Input parameters\nList all input variables in the model. Provide a description of their use and include parameter values. For stochastic inputs provide details of any continuous, discrete or empirical distributions used along with all associated parameters. Give details of all time dependent parameters and correlation.Clearly state:• Base case data• Data use in experimentation, where different from the base case.• Where optimisation or design of experiments has been used, state the range of values that parameters can take.• Where theoretical distributions are used, state how these were selected and prioritised above other candidate distributions.\n🟡 Partially\nNearly all information required was provided, with examples like Table 3: PHC configurationsThe exception is that sometimes the number of arrivals per day is provided, but the required interarrival time to model this is not provided, nor a formula for calculation of this.Shoaib and Ramamohan (2021)\n\n\n3.4 Assumptions\nWhere data or knowledge of the real system is unavailable what assumptions are included in the model? This might include parameter values, distributions or routing logic within the model.\n✅ Fully\nHas a section dedicated to this: 3.4.1 Model Assumptions\n\n\nExperimentation\n\n\n\n\n\n4.1 Initialisation\nReport if the system modelled is terminating or non-terminating. State if a warm-up period has been used, its length and the analysis method used to select it. For terminating systems state the stopping condition.State what if any initial model conditions have been included, e.g., pre-loaded queues and activities. Report whether initialisation of these variables is deterministic or stochastic.\n🟡 Partially\nDoes not state whether it is terminating or non-terminating.However, does describe the warm-up in 4 Simulation Experiments and Results: “The simulation was run for 365 days, with a warm-up period of 180 days. The warm-up period, per usual simulation practice, was run with the same set of patient arrival and service rates as in the steady state period (see Table 3 and Table 4). The duration of the warm-up period was chosen to allow a sufficient amount of time for the simulation outcomes to achieve steady state.”Shoaib and Ramamohan (2021)\n\n\n4.2 Run length\nDetail the run length of the simulation model and time units.\n✅ Fully\nRun length in 4 Simulation Experiments and Results: “The simulation was run for 365 days, with a warm-up period of 180 days”Throughout the paper, mentions the time unit (minutes)Shoaib and Ramamohan (2021)\n\n\n4.3 Estimation approach\nState the method used to account for the stochasticity: For example, two common methods are multiple replications or batch means. Where multiple replications have been used, state the number of replications and for batch means, indicate the batch length and whether the batch means procedure is standard, spaced or overlapping. For both procedures provide a justification for the methods used and the number of replications/size of batches.\n🟡 Partially\nStates but does not justify the number of replications in 4 Simulation Experiments and Results: “Results from 100 replication runs were collected for all computational experiments”Shoaib and Ramamohan (2021)\n\n\nImplementation\n\n\n\n\n\n5.1 Software or programming language\nState the operating system and version and build number.State the name, version and build number of commercial or open source DES software that the model is implemented in.State the name and version of general-purpose programming languages used (e.g. Python 3.5).Where frameworks and libraries have been used provide all details including version numbers.\n🟡 Partially\nStates the IDE, programming language and simulation software. Does not describe operating systems, or any versions.4 Simulation Experiments and Results: “The PHC simulation was programmed using the Python programming language on the Pycharm IntelliJ integrated development environment. Python’s Salabim package, which is a third-partypackage developed for discrete event simulation, was used in programming the model”Shoaib and Ramamohan (2021)\n\n\n5.2 Random sampling\nState the algorithm used to generate random samples in the software/programming language used e.g. Mersenne Twister.If common random numbers are used, state how seeds (or random number streams) are distributed among sampling processes.\n❌ Not met\nNot described in the paper. Know from the code that they used common random numbers without seed control.\n\n\n5.3 Model execution\nState the event processing mechanism used e.g. three phase, event, activity, process interaction.Note that in some commercial software the event processing mechanism may not be published. In these cases authors should adhere to item 5.1 software recommendations.State all priority rules included if entities/activities compete for resources.If the model is parallel, distributed and/or use grid or cloud computing, etc., state and preferably reference the technology used. For parallel and distributed simulations the time management algorithms used. If the HLA is used then state the version of the standard, which run-time infrastructure (and version), and any supporting documents (FOMs, etc.)\n🟡 Partially\nDoes not state event processing mechanismDoes describe priority rules, e.g. 3.3.2 Inpatient Department: “inpatients have nonpreemptive priority in comparison to outpatients with regard to consulting with the doctor – that is, if the doctor is busy with an outpatient when an inpatient arrives, the inpatient moves to the head of the outpatient queue. The doctor then attends to the inpatient once they are finished consulting with the outpatient”\n\n\n5.4 System specification\nState the model run time and specification of hardware used. This is particularly important for large scale models that require substantial computing power. For parallel, distributed and/or use grid or cloud computing, etc. state the details of all systems used in the implementation (processors, network, etc.)\n✅ Fully\n4 Simulation Experiments and Results: “All computational experiments were performed on a workstation with a quad-core Intel Xeon processor, base frequency of 3.7 GHz, and 16 gigabytes of RAM. Completing 100 replications required approximately forty-three minutes and forty-four seconds.”Shoaib and Ramamohan (2021)\n\n\nCode access\n\n\n\n\n\n6.1 Computer model sharing statement\nDescribe how someone could obtain the model described in the paper, the simulation software and any other associated software (or hardware) needed to reproduce the results. Provide, where possible, the link and DOIs to these.\n✅ Fully\n4 Simulation Experiments and Results: “The software for the generic PHC model (configuration 1) is available at this location: https://github.com/shoaibiocl/PHC-/blob/main/PHC.py”Shoaib and Ramamohan (2021)"
  },
  {
    "objectID": "evaluation/reporting.html#des-checklist-derived-from-ispor-sdm",
    "href": "evaluation/reporting.html#des-checklist-derived-from-ispor-sdm",
    "title": "Reporting guidelines",
    "section": "DES checklist derived from ISPOR-SDM",
    "text": "DES checklist derived from ISPOR-SDM\nOf the 18 items in the checklist:\n\n12 were met fully (✅)\n2 was partially met (🟡)\n3 was not met (❌)\n1 were not applicable (N/A)\n\n\n\n\n\n\n\n\n\n\nItem\nAssessed if…\nMet by study?\nEvidence/location\n\n\n\n\nModel conceptualisation\n\n\n\n\n\n1 Is the focused health-related decision problem clarified?\n…the decision problem under investigation was defined. DES studies included different types of decision problems, eg, those listed in previously developed taxonomies.\n✅ Fully\n1 Introduction: “Although there has been a considerable increase in the number of PHCs across the country, i.e., from 9,115 during 1981-85 to 25,650 in 2017,13 their operational effectiveness and influence on improving public health accessibility is not adequately quantified. In this backdrop, there is need for an assessment of theoperational aspects of these facilities before more resources are invested in their upgradation and/or establishing new PHC infrastructure.”Shoaib and Ramamohan (2021)\n\n\n2 Is the modeled healthcare setting/health condition clarified?\n…the physical context/scope (eg, a certain healthcare unit or a broader system) or disease spectrum simulated was described.\n✅ Fully\nWider context provided in 1 Introduction, e.g. “Outside large public hospitals in urban metropolitan areas that provide highly specialised tertiary care (called superspecialty hospitals), the public health system in India comprises three levels of formal medical care: the primary health centre (PHC, which offers primary care), the community health centre (CHC, which offers primary and limited secondary care), and the district hospital (DH, which offers comprehensive secondary and limited tertiary care).”Additional description in Appendix A: Overview of Public Health System in IndiaShoaib and Ramamohan (2021)\n\n\n3 Is the model structure described?\n…the model’s conceptual structure was described in the form of either graphical or text presentation.\n✅ Fully\nModel configurations described extensively in 3.3 Patient Flow.Figure 1: Patient flow in the archetypal PHCShoaib and Ramamohan (2021)\n\n\n4 Is the time horizon given?\n…the time period covered by the simulation was reported.\n✅ Fully\nRun length in 4 Simulation Experiments and Results: “The simulation was run for 365 days, with a warm-up period of 180 days”Shoaib and Ramamohan (2021)\n\n\n5 Are all simulated strategies/scenarios specified?\n…the comparators under test were described in terms of their components, corresponding variations, etc\n✅ Fully\nScenarios were sufficiently described throughout that I was able to reproduce (although language could be a little bit ambiguous in some places).Example of scenario description from 4.3.1 Doctor's Utilisation: “The sensitivity analyses reveal that at an average outpatient load of 170 patients per day, the utilisation of doctors increases substantially with increases in the mean service time and exceeds 100% at an average consultation time of five minutes/patient, implying that doctors may stay longer than the designated working hours to serve all patients arriving within the designated working hours. To address this, we experimented with letting the staff nurse (whose utilisation is approximately 32%) take over the administrative work. This led to a 12% drop in the utilisation level, which implied that the doctor’s utilisation still exceeded 100%.”Shoaib and Ramamohan (2021)\n\n\n6 Is the target population described?\n…the entities simulated and their main attributes were characterized.\n✅ Fully\nThroughout paper, as in 2 Is the modeled healthcare setting/health condition clarified?\n\n\nParamaterisation and uncertainty assessment\n\n\n\n\n\n7 Are data sources informing parameter estimations provided?\n…the sources of all data used to inform model inputs were reported.\n✅ Fully\nVery detailed description. Examples…3.1 Generic Modelling Approach and PHC Operational Data Collection:“We visited nine PHCs (out of ten total) in a north Indian district with a mix of urban, semi-urban, and rural populations to collect data regarding PHC operations. Permission to visit these PHCs and collect operational data was obtained from the district civil surgeon. Data collected included operational patterns (e.g., patient flow), staffing and resource levels”…Table 1: Data summary of staffing level, patient load and other facilities at PHCsTable 2: Service time summary for key PHC resources3.2.1 Benchmark PHC Configuration: “we estimated the demand for primary care using morbidity data from the Brookings India report. We used the disease incidence data reported for a ten-month period in India from the Brookings report to estimate the number of people seeking medical care in the district where thePHCs we visited were located. Next, using the percentage contribution of each disease”… (continues)Shoaib and Ramamohan (2021)\n\n\n8 Are the parameters used to populate model frameworks specified?\n…all relevant parameters fed into model frameworks were disclosed.\n🟡 Partially\nNearly all information required was provided, with examples like Table 3: PHC configurationsThe exception is that sometimes the number of arrivals per day is provided, but the required interarrival time to model this is not provided, nor a formula for calculation of this.Shoaib and Ramamohan (2021)\n\n\n9 Are model uncertainties discussed?\n…the uncertainty surrounding parameter estimations and adopted statistical methods (eg, 95% confidence intervals or possibility distributions) were reported.\n🟡 Partially\nStandard deviations provided for Table 6, but otherwise, mostly just mean results.\n\n\n10 Are sensitivity analyses performed and reported?\n…the robustness of model outputs to input uncertainties was examined, for example via deterministic (based on parameters’ plausible ranges) or probabilistic (based on a priori-defined probability distributions) sensitivity analyses, or both.\n✅ Fully\nSection with sensitivity analyses: 4.3. Sensitivity Analysis and Configuration Optimisation\n\n\nValidation\n\n\n\n\n\n11 Is face validity evaluated and reported?\n…it was reported that the model was subjected to the examination on how well model designs correspond to the reality and intuitions. It was assumed that this type of validation should be conducted by external evaluators with no stake in the study.\n❌ Not met\nObservation of and discussion with medical staff was conducted to get information on each PHC (e.g. patient load) - e.g. 3.1 Generic Modelling Approach and PHC Operational Data Collection: “these service times were estimated based on discussions with doctors and nurses.”However, could not find any description of the model designs being reviewed by an external evaluator.Shoaib and Ramamohan (2021)\n\n\n12 Is cross validation performed and reported\n…comparison across similar modeling studies which deal with the same decision problem was undertaken.\nN/A\nNot provided, but throughout the Introduction, they repeatedly described how there is no or little literature around this, so it is reasonable to assume (based on their introduction) that there might not be similar modeling studies available to compare against.\n\n\n13 Is external validation performed and reported?\n…the modeler(s) examined how well the model’s results match the empirical data of an actual event modeled.\n✅ Fully\n4.1 Model Validation and Queueing Analysis: “We were unable to perform external validation of the simulation model by comparing its outcomes to, for example, operational outcomes published in the literature, because we were unable to identify any previously published data in the Indian context regarding PHC operational outcomes such as average outpatient waiting time, utilisation of doctors, staff nurses, etc. However, the outcomes generated by the model for all configurations were in good agreement with those observed during our visits to the PHCs. For example, the waiting times observed for outpatients visiting configuration 1 PHCs were negligible, and the utilisation of all resources, as observed in terms was also well below 50%. In addition, we were able to compare the estimates of time spent waiting in the outpatient queue and doctor’s utilisation generated by our model to the corresponding estimate obtained from primary data collected from a visit to the primary care unit of a similar public health facility in another district.”\n\n\n14 Is predictive validation performed or attempted?\n…the modeler(s) examined the consistency of a model’s predictions of a future event and the actual outcomes in the future. If this was not undertaken, it was assessed whether the reasons were discussed.\n❌ Not met\nCannot identify any description of this, or justification for why it was not undertaken\n\n\nGeneralisability and stakeholder involvement\n\n\n\n\n\n15 Is the model generalizability issue discussed?\n…the modeler(s) discussed the potential of the resulting model for being applicable to other settings/populations (single/multiple application).\n✅ Fully\n5 Discussion & Conclusions: “While we conducted limited additional visits to primary healthcare facilities in other districts for collection of data to validate the model and observed similar patterns, generalisation of our observations to PHCs across the diverse and vast health landscape of India must be made with appropriate caution. The generic modelling approach that we have adopted can provide some relief here - given the diversity in the operational configurations of PHCs that we encountered in this district (e.g., compare PHCs 4, 5 and 6 in Table 1), and the fact that the government guidelines for PHC configurations are applicable on a national level, it is likely that one of the configuration models that we have developed will be similar to PHC configurations encountered in other districts across the country.”Shoaib and Ramamohan (2021)\n\n\n16 Are decision makers or other stakeholders involved in modeling?\n…the modeler(s) reported in which part throughout the modeling process decision makers and other stakeholders (eg, subject experts) were engaged.\n❌ Not met\nDid not find any mention of this in the text.\n\n\n17 Is the source of funding stated?\n…the sponsorship of the study was indicated.\n✅ Fully\nIn the paper published in Simulation, it has a funding section which states that no specific grant was received for the research. (Shoaib and Ramamohan (2022))\n\n\n18 Are model limitations discussed?\n…limitations of the assessed model, especially limitations of interest to decision makers, were discussed.\n✅ Fully\n5 Discussion & Conclusions: “A challenge in developing such simulation models in the Indian context is obtaining adequate access to the facilities under consideration for a sufficiently long period of time to collect data required to fit distributions for every input parameter of the simulation. For instance, given the limited data maintained for inpatient length of stays, we were unable to observe inpatient admissions long enough to collect sufficient data to find the best-fitting distribution for inpatient length of stay. In such cases, we estimated these parameters based on our discussions with key medical personnel. We anticipate that the model will have to be updated when data for these parameters will become available. Further, we note that we have only included resources and operations associated with provision of medical care, and hence have not included maintenance/cleaning personnel, etc.”Shoaib and Ramamohan (2021)"
  },
  {
    "objectID": "evaluation/badges.html",
    "href": "evaluation/badges.html",
    "title": "Journal badges",
    "section": "",
    "text": "This page evaluates the extent to which the author-published research artefacts meet the criteria of badges related to reproducibility from various organisations and journals.\nCaveat: Please note that these criteria are based on available information about each badge online, and that we have likely differences in our procedure (e.g. allowed troubleshooting for execution and reproduction, not under tight time pressure to complete). Moreover, we focus only on reproduction of the discrete-event simulation, and not on other aspects of the article. We cannot guarantee that the badges below would have been awarded in practice by these journals."
  },
  {
    "objectID": "evaluation/badges.html#criteria",
    "href": "evaluation/badges.html#criteria",
    "title": "Journal badges",
    "section": "Criteria",
    "text": "Criteria\n\n\nCode\nfrom IPython.display import display, Markdown\nimport numpy as np\nimport pandas as pd\n\n# Criteria and their definitions\ncriteria = {\n    'archive': 'Stored in a permanent archive that is publicly and openly accessible',\n    'id': 'Has a persistent identifier',\n    'license': 'Includes an open license',\n    'relevant': '''Arefacts are relevant to and contribute to the article's results''',\n    'complete': 'Complete set of materials shared (as would be needed to fully reproduce article)',\n    'structure': 'Artefacts are well structured/organised (e.g. to the extent that reuse and repurposing is facilitated, adhering to norms and standards of research community)',\n    'documentation_sufficient': 'Artefacts are sufficiently documented (i.e. to understand how it works, to enable it to be run, including package versions)',\n    'documentation_careful': 'Artefacts are carefully documented (more than sufficient - i.e. to the extent that reuse and repurposing is facilitated - e.g. changing parameters, reusing for own purpose)',\n    # This criteria is kept seperate to documentation_careful, as it specifically requires a README file\n    'documentation_readme': 'Artefacts are clearly documented and accompanied by a README file with step-by-step instructions on how to reproduce results in the manuscript',\n    'execute': 'Scripts can be successfully executed',\n    'regenerated': 'Independent party regenerated results using the authors research artefacts',\n    'hour': 'Reproduced within approximately one hour (excluding compute time)',\n}\n\n# Evaluation for this study\neval = pd.Series({\n    'archive': 0,\n    'id': 0,\n    'license': 1,\n    'relevant': 1,\n    'complete': 1,\n    'structure': 0,\n    'documentation_sufficient': 0,\n    'documentation_careful': 0,\n    'documentation_readme': 0,\n    'execute': 1,\n    'regenerated': 1,\n    'hour': 0,\n})\n\n# Get list of criteria met (True/False) overall\neval_list = list(eval)\n\n# Define function for creating the markdown formatted list of criteria met\ndef create_criteria_list(criteria_dict):\n    '''\n    Creates a string which contains a Markdown formatted list with icons to\n    indicate whether each criteria was met\n\n    Parameters:\n    -----------\n    criteria_dict : dict\n        Dictionary where keys are the criteria (variable name) and values are\n        Boolean (True/False of whether this study met the criteria)\n\n    Returns:\n    --------\n    formatted_list : string\n        Markdown formatted list\n    '''\n    callout_icon = {True: '✅',\n                    False: '❌'}\n    # Create list with...\n    formatted_list = ''.join([\n        '* ' +\n        callout_icon[eval[key]] + # Icon based on whether it met criteria\n        ' ' +\n        value + # Full text description of criteria\n        '\\n' for key, value in criteria_dict.items()])\n    return(formatted_list)\n\n# Define groups of criteria\ncriteria_share_how = ['archive', 'id', 'license']\ncriteria_share_what = ['relevant', 'complete']\ncriteria_doc_struc = ['structure', 'documentation_sufficient', 'documentation_careful', 'documentation_readme']\ncriteria_run = ['execute', 'regenerated', 'hour']\n\n# Create text section\ndisplay(Markdown(f'''\nTo assess whether the author's materials met the requirements of each badge, a list of criteria was produced. Between each badge (and between categories of badge), there is often alot of overlap in criteria.\n\nThis study met **{sum(eval_list)} of the {len(eval_list)}** unique criteria items. These were as follows:\n\nCriteria related to how artefacts are shared -\n\n{create_criteria_list({k: criteria[k] for k in criteria_share_how})}\n\nCriteria related to what artefacts are shared -\n\n{create_criteria_list({k: criteria[k] for k in criteria_share_what})}\n\nCriteria related to the structure and documentation of the artefacts -\n\n{create_criteria_list({k: criteria[k] for k in criteria_doc_struc})}\n\nCriteria related to running and reproducing results -\n\n{create_criteria_list({k: criteria[k] for k in criteria_run})}\n'''))\n\n\nTo assess whether the author’s materials met the requirements of each badge, a list of criteria was produced. Between each badge (and between categories of badge), there is often alot of overlap in criteria.\nThis study met 5 of the 12 unique criteria items. These were as follows:\nCriteria related to how artefacts are shared -\n\n❌ Stored in a permanent archive that is publicly and openly accessible\n❌ Has a persistent identifier\n✅ Includes an open license\n\nCriteria related to what artefacts are shared -\n\n✅ Arefacts are relevant to and contribute to the article’s results\n✅ Complete set of materials shared (as would be needed to fully reproduce article)\n\nCriteria related to the structure and documentation of the artefacts -\n\n❌ Artefacts are well structured/organised (e.g. to the extent that reuse and repurposing is facilitated, adhering to norms and standards of research community)\n❌ Artefacts are sufficiently documented (i.e. to understand how it works, to enable it to be run, including package versions)\n❌ Artefacts are carefully documented (more than sufficient - i.e. to the extent that reuse and repurposing is facilitated - e.g. changing parameters, reusing for own purpose)\n❌ Artefacts are clearly documented and accompanied by a README file with step-by-step instructions on how to reproduce results in the manuscript\n\nCriteria related to running and reproducing results -\n\n✅ Scripts can be successfully executed\n✅ Independent party regenerated results using the authors research artefacts\n❌ Reproduced within approximately one hour (excluding compute time)"
  },
  {
    "objectID": "evaluation/badges.html#badges",
    "href": "evaluation/badges.html#badges",
    "title": "Journal badges",
    "section": "Badges",
    "text": "Badges\n\n\nCode\n# Full badge names\nbadge_names = {\n    # Open objects\n    'open_niso': 'NISO \"Open Research Objects (ORO)\"',\n    'open_niso_all': 'NISO \"Open Research Objects - All (ORO-A)\"',\n    'open_acm': 'ACM \"Artifacts Available\"',\n    'open_cos': 'COS \"Open Code\"',\n    'open_ieee': 'IEEE \"Code Available\"',\n    # Object review\n    'review_acm_functional': 'ACM \"Artifacts Evaluated - Functional\"',\n    'review_acm_reusable': 'ACM \"Artifacts Evaluated - Reusable\"',\n    'review_ieee': 'IEEE \"Code Reviewed\"',\n    # Results reproduced\n    'reproduce_niso': 'NISO \"Results Reproduced (ROR-R)\"',\n    'reproduce_acm': 'ACM \"Results Reproduced\"',\n    'reproduce_ieee': 'IEEE \"Code Reproducible\"',\n    'reproduce_psy': 'Psychological Science \"Computational Reproducibility\"'\n}\n\n# Criteria required by each badge\nbadges = {\n    # Open objects\n    'open_niso': ['archive', 'id', 'license'],\n    'open_niso_all': ['archive', 'id', 'license', 'complete'],\n    'open_acm': ['archive', 'id'],\n    'open_cos': ['archive', 'id', 'license', 'complete', 'documentation_sufficient'],\n    'open_ieee': ['complete'],\n    # Object review\n    'review_acm_functional': ['documentation_sufficient', 'relevant', 'complete', 'execute'],\n    'review_acm_reusable': ['documentation_sufficient', 'documentation_careful', 'relevant', 'complete', 'execute', 'structure'],\n    'review_ieee': ['complete', 'execute'],\n    # Results reproduced\n    'reproduce_niso': ['regenerated'],\n    'reproduce_acm': ['regenerated'],\n    'reproduce_ieee': ['regenerated'],\n    'reproduce_psy': ['regenerated', 'hour', 'structure', 'documentation_readme'],\n}\n\n# Identify which badges would be awarded based on criteria\n# Get list of badges met (True/False) overall\naward = {}\nfor badge in badges:\n    award[badge] = all([eval[key] == 1 for key in badges[badge]])\naward_list = list(award.values())\n\n# Write introduction\n# Get list of badges met (True/False) by category\naward_open = [v for k,v in award.items() if k.startswith('open_')]\naward_review = [v for k,v in award.items() if k.startswith('review_')]\naward_reproduce = [v for k,v in award.items() if k.startswith('reproduce_')]\n\n# Create and display text for introduction\ndisplay(Markdown(f'''\nIn total, the original study met the criteria for **{sum(award_list)} of the {len(award_list)} badges**. This included:\n\n* **{sum(award_open)} of the {len(award_open)}** “open objects” badges\n* **{sum(award_review)} of the {len(award_review)}** “object review” badges\n* **{sum(award_reproduce)} of the {len(award_reproduce)}** “reproduced” badges\n'''))\n\n# Make function that creates collapsible callouts for each badge\ndef create_badge_callout(award_dict):\n    '''\n    Displays Markdown callouts created for each badge in the dictionary, showing\n    whether the criteria for that badge was met.\n\n    Parameters:\n    -----------\n    award_dict : dict\n        Dictionary where key is badge (as variable name), and value is Boolean\n        (whether badge is awarded)\n    '''\n    callout_appearance = {True: 'tip',\n                          False: 'warning'}\n    callout_icon = {True: '✅',\n                    False: '❌'}\n    callout_text = {True: 'Meets all criteria:',\n                    False: 'Does not meet all criteria:'}\n\n    for key, value in award_dict.items():\n        # Create Markdown list with...\n        criteria_list = ''.join([\n            '* ' +\n            callout_icon[eval[k]] + # Icon based on whether it met criteria\n            ' ' +\n            criteria[k] + # Full text description of criteria\n            '\\n' for k in badges[key]])\n        # Create the callout and display it\n        display(Markdown(f'''\n::: {{.callout-{callout_appearance[value]} appearance=\"minimal\" collapse=true}}\n\n## {callout_icon[value]} {badge_names[key]}\n\n{callout_text[value]}\n\n{criteria_list}\n:::\n'''))\n\n# Create badge functions with introductions and callouts\ndisplay(Markdown('''\n### \"Open objects\" badges\n\nThese badges relate to research artefacts being made openly available.\n'''))\ncreate_badge_callout({k: v for (k, v) in award.items() if k.startswith('open_')})\n\ndisplay(Markdown('''\n### \"Object review\" badges\n\nThese badges relate to the research artefacts being reviewed against criteria of the badge issuer.\n'''))\ncreate_badge_callout({k: v for (k, v) in award.items() if k.startswith('review_')})\n\ndisplay(Markdown('''\n### \"Reproduced\" badges\n\nThese badges relate to an independent party regenerating the reuslts of the article using the author objects.\n'''))\ncreate_badge_callout({k: v for (k, v) in award.items() if k.startswith('reproduce_')})\n\n\nIn total, the original study met the criteria for 5 of the 12 badges. This included:\n\n1 of the 5 “open objects” badges\n1 of the 3 “object review” badges\n3 of the 4 “reproduced” badges\n\n\n\n“Open objects” badges\nThese badges relate to research artefacts being made openly available.\n\n\n\n\n\n\n\n\n❌ NISO “Open Research Objects (ORO)”\n\n\n\n\n\nDoes not meet all criteria:\n\n❌ Stored in a permanent archive that is publicly and openly accessible\n❌ Has a persistent identifier\n✅ Includes an open license\n\n\n\n\n\n\n\n\n\n\n\n\n❌ NISO “Open Research Objects - All (ORO-A)”\n\n\n\n\n\nDoes not meet all criteria:\n\n❌ Stored in a permanent archive that is publicly and openly accessible\n❌ Has a persistent identifier\n✅ Includes an open license\n✅ Complete set of materials shared (as would be needed to fully reproduce article)\n\n\n\n\n\n\n\n\n\n\n\n\n❌ ACM “Artifacts Available”\n\n\n\n\n\nDoes not meet all criteria:\n\n❌ Stored in a permanent archive that is publicly and openly accessible\n❌ Has a persistent identifier\n\n\n\n\n\n\n\n\n\n\n\n\n❌ COS “Open Code”\n\n\n\n\n\nDoes not meet all criteria:\n\n❌ Stored in a permanent archive that is publicly and openly accessible\n❌ Has a persistent identifier\n✅ Includes an open license\n✅ Complete set of materials shared (as would be needed to fully reproduce article)\n❌ Artefacts are sufficiently documented (i.e. to understand how it works, to enable it to be run, including package versions)\n\n\n\n\n\n\n\n\n\n\n\n\n✅ IEEE “Code Available”\n\n\n\n\n\nMeets all criteria:\n\n✅ Complete set of materials shared (as would be needed to fully reproduce article)\n\n\n\n\n\n\n“Object review” badges\nThese badges relate to the research artefacts being reviewed against criteria of the badge issuer.\n\n\n\n\n\n\n\n\n❌ ACM “Artifacts Evaluated - Functional”\n\n\n\n\n\nDoes not meet all criteria:\n\n❌ Artefacts are sufficiently documented (i.e. to understand how it works, to enable it to be run, including package versions)\n✅ Arefacts are relevant to and contribute to the article’s results\n✅ Complete set of materials shared (as would be needed to fully reproduce article)\n✅ Scripts can be successfully executed\n\n\n\n\n\n\n\n\n\n\n\n\n❌ ACM “Artifacts Evaluated - Reusable”\n\n\n\n\n\nDoes not meet all criteria:\n\n❌ Artefacts are sufficiently documented (i.e. to understand how it works, to enable it to be run, including package versions)\n❌ Artefacts are carefully documented (more than sufficient - i.e. to the extent that reuse and repurposing is facilitated - e.g. changing parameters, reusing for own purpose)\n✅ Arefacts are relevant to and contribute to the article’s results\n✅ Complete set of materials shared (as would be needed to fully reproduce article)\n✅ Scripts can be successfully executed\n❌ Artefacts are well structured/organised (e.g. to the extent that reuse and repurposing is facilitated, adhering to norms and standards of research community)\n\n\n\n\n\n\n\n\n\n\n\n\n✅ IEEE “Code Reviewed”\n\n\n\n\n\nMeets all criteria:\n\n✅ Complete set of materials shared (as would be needed to fully reproduce article)\n✅ Scripts can be successfully executed\n\n\n\n\n\n\n“Reproduced” badges\nThese badges relate to an independent party regenerating the reuslts of the article using the author objects.\n\n\n\n\n\n\n\n\n✅ NISO “Results Reproduced (ROR-R)”\n\n\n\n\n\nMeets all criteria:\n\n✅ Independent party regenerated results using the authors research artefacts\n\n\n\n\n\n\n\n\n\n\n\n\n✅ ACM “Results Reproduced”\n\n\n\n\n\nMeets all criteria:\n\n✅ Independent party regenerated results using the authors research artefacts\n\n\n\n\n\n\n\n\n\n\n\n\n✅ IEEE “Code Reproducible”\n\n\n\n\n\nMeets all criteria:\n\n✅ Independent party regenerated results using the authors research artefacts\n\n\n\n\n\n\n\n\n\n\n\n\n❌ Psychological Science “Computational Reproducibility”\n\n\n\n\n\nDoes not meet all criteria:\n\n✅ Independent party regenerated results using the authors research artefacts\n❌ Reproduced within approximately one hour (excluding compute time)\n❌ Artefacts are well structured/organised (e.g. to the extent that reuse and repurposing is facilitated, adhering to norms and standards of research community)\n❌ Artefacts are clearly documented and accompanied by a README file with step-by-step instructions on how to reproduce results in the manuscript"
  },
  {
    "objectID": "evaluation/badges.html#sources",
    "href": "evaluation/badges.html#sources",
    "title": "Journal badges",
    "section": "Sources",
    "text": "Sources\nNational Information Standards Organisation (NISO) (NISO Reproducibility Badging and Definitions Working Group (2021))\n\n“Open Research Objects (ORO)”\n“Open Research Objects - All (ORO-A)”\n“Results Reproduced (ROR-R)”\n\nAssociation for Computing Machinery (ACM) (Association for Computing Machinery (ACM) (2020))\n\n“Artifacts Available”\n“Artifacts Evaluated - Functional”\n“Artifacts Evaluated - Resuable”\n“Results Reproduced”\n\nCenter for Open Science (COS) (Blohowiak et al. (2023))\n\n“Open Code”\n\nInstitute of Electrical and Electronics Engineers (IEEE) (Institute of Electrical and Electronics Engineers (IEEE) (n.d.))\n\n“Code Available”\n“Code Reviewed”\n“Code Reproducible”\n\nPsychological Science (Hardwicke and Vazire (2023) and Association for Psychological Science (APS) (2023))\n\n“Computational Reproducibility”"
  },
  {
    "objectID": "evaluation/artefacts.html",
    "href": "evaluation/artefacts.html",
    "title": "STARS framework",
    "section": "",
    "text": "This page evaluates the extent to which the original study meets the recommendations from the STARS framework for the sharing of code and associated materials from discrete-event simulation models (Monks, Harper, and Mustafee (2024)).\nOf the 8 essential STARS components:\n\n3 were met fully (✅)\n5 were not met (❌)\n\nOf the 5 optional STARS components:\n\n5 were not met (❌)\n\n\n\n\n\n\n\n\n\n\nComponent\nDescription\nMet by study?\nEvidence/location\n\n\n\n\nEssential components\n\n\n\n\n\nOpen license\nFree and open-source software (FOSS) license (e.g. MIT, GNU Public License (GPL))\n✅ Full\nMIT License\n\n\nDependency management\nSpecify software libraries, version numbers and sources (e.g. dependency management tools like virtualenv, conda, poetry)\n❌ Not met\n-\n\n\nFOSS model\nCoded in FOSS language (e.g. R, Julia, Python)\n✅ Fully\nPython\n\n\nMinimum documentation\nMinimal instructions (e.g. in README) that overview (a) what model does, (b) how to install and run model to obtain results, and (c) how to vary parameters to run new experiments\n❌ Not met\n-\n\n\nORCID\nORCID for each study author\n❌ Not met\nNo ORCID in the repository (though Varun Ramamohan does have ORCID ID with publication in SIMULATION)\n\n\nCitation information\nInstructions on how to cite the research artefact (e.g. CITATION.cff file)\n❌ Not met\n-\n\n\nRemote code repository\nCode available in a remote code repository (e.g. GitHub, GitLab, BitBucket)\n✅ Fully\nAvailable on GitHub: https://github.com/shoaibiocl/PHC-\n\n\nOpen science archive\nCode stored in an open science archive with FORCE11 compliant citation and guaranteed persistance of digital artefacts (e.g. Figshare, Zenodo, the Open Science Framework (OSF), and the Computational Modeling in the Social and Ecological Sciences Network (CoMSES Net))\n❌ Not met\n-\n\n\nOptional components\n\n\n\n\n\nEnhanced documentation\nOpen and high quality documentation on how the model is implemented and works (e.g. via notebooks and markdown files, brought together using software like Quarto and Jupyter Book). Suggested content includes:• Plain english summary of project and model• Clarifying license• Citation instructions• Contribution instructions• Model installation instructions• Structured code walk through of model• Documentation of modelling cycle using TRACE• Annotated simulation reporting guidelines• Clear description of model validation including its intended purpose\n❌ Not met\n-\n\n\nDocumentation hosting\nHost documentation (e.g. with GitHub pages, GitLab pages, BitBucket Cloud, Quarto Pub)\n❌ Not met\n-\n\n\nOnline coding environment\nProvide an online environment where users can run and change code (e.g. BinderHub, Google Colaboratory, Deepnote)\n❌ Not met\n-\n\n\nModel interface\nProvide web application interface to the model so it is accessible to less technical simulation users\n❌ Not met\n-\n\n\nWeb app hosting\nHost web app online (e.g. Streamlit Community Cloud, ShinyApps hosting)\n❌ Not met\n-\n\n\n\n\n\n\n\nReferences\n\nMonks, Thomas, Alison Harper, and Navonil Mustafee. 2024. “Towards Sharing Tools and Artefacts for Reusable Simulations in Healthcare.” Journal of Simulation 0 (0): 1–20. https://doi.org/10.1080/17477778.2024.2347882."
  },
  {
    "objectID": "evaluation/reproduction_report.html",
    "href": "evaluation/reproduction_report.html",
    "title": "Summary report",
    "section": "",
    "text": "Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\n\nThis is a discrete-event simulation modelling primary health centres (PHCs) in India. There are four patient types: outpatients, inpatients, childbirth cases and antenatal care patients. Four model configurations are developed based on observed PHC practices or government-mandated operational guidelines. The paper explores different operational patterns for scenarios where very high utilisation was observed, to explore what might help reduce utilisation of these resources.\nImages on this page are sourced from Shoaib and Ramamohan (2021), which is shared under CC BY-NC-ND."
  },
  {
    "objectID": "evaluation/reproduction_report.html#study",
    "href": "evaluation/reproduction_report.html#study",
    "title": "Summary report",
    "section": "",
    "text": "Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\n\nThis is a discrete-event simulation modelling primary health centres (PHCs) in India. There are four patient types: outpatients, inpatients, childbirth cases and antenatal care patients. Four model configurations are developed based on observed PHC practices or government-mandated operational guidelines. The paper explores different operational patterns for scenarios where very high utilisation was observed, to explore what might help reduce utilisation of these resources.\nImages on this page are sourced from Shoaib and Ramamohan (2021), which is shared under CC BY-NC-ND."
  },
  {
    "objectID": "evaluation/reproduction_report.html#computational-reproducibility",
    "href": "evaluation/reproduction_report.html#computational-reproducibility",
    "title": "Summary report",
    "section": "Computational reproducibility",
    "text": "Computational reproducibility\nSuccessfully reproduced 16 out of 17 (94%) of items in the scope in 28h 14m (70.6%).\nRequired troubleshooting:\n\nEnvironment - took a while to set-up the environment with all packages and versions needed (some packages not listed in imports, and lots of confusion around statistics package which has base from Python 3.4 and a version on conda)\nResults spreadsheets - there were two possible results spreadsheets, and between and within these, there were multiple metrics for the same output that sometimes had differing results. Had to identify which spreadsheet and metric to use, as well as add some outputs that were missing.\nProgrammatically changing parameter values - had to modify script to remove some hard-coded parameters, and to allow parameters to modified by a second script (rather than needing to directly change the model code)\nReplications and run time - due to slow model run time, set up parallel processing and reduced the number of replications\nIdentifying parameters for each scenario - the configuration parameters were mostly provided in a table, whilst the scenarios were largely described in the text. It took some time to identify the parameters/context of each scenario, particuarly as there were sometimes discrepancies, and as some scenarioes were quite ambiguous and I initially misunderstood them\nEstimating parameters - had to estimate/guess some inter-arrival times and consultation boundaries, as they were not provided, and a method to calculate them was not provided\nWriting code to create tables and figures\nWorking out how to change the model for each scenario - for several scenarios, it took some time looking through the model code to understand how I needed to change it to implement a scenario\n\n\nTable 6Figure 2AFigure 2BFigure 2CFigure 2DFigure 3AFigure 3BFigure 3CFigure 3DFigure 4In-text result 1In-text result 2In-text result 3In-text result 4In-text result 5In-text result 6In-text result 7\n\n\nTable 6. “Operational outcomes for each PHC configuration simulation. * Number of doctors/OPD cases/IPD cases/childbirth/ANC (patients)/inpatient beds/labour room” Shoaib and Ramamohan (2021)\n \n\n\nFigure 2a. “Impact on doctor’s utilisation.” Shoaib and Ramamohan (2021)\n \n\n\nFigure 2b. “Impact on the NCD nurse’s utilisation.” Shoaib and Ramamohan (2021)\n \n\n\nFigure 2c. “Impact on the average waiting time (minutes) in the OPD”. Shoaib and Ramamohan (2021)\n \n\n\nFigure 2d. “Impact on the average waiting time (minutes) in the pharmacy”. Shoaib and Ramamohan (2021)\n \n\n\nFigure 3a. “Impact on the doctor’s utilisation. Two levels of outpatient consultation times (minutes) are used”. Shoaib and Ramamohan (2021)\n \n\n\nFigure 3b. “Impact on the staff nurse’s utilisation”. Shoaib and Ramamohan (2021)\n \n\n\nFigure 3c. “Impact on the inpatient bed’s utilisation”. Shoaib and Ramamohan (2021)\n \n\n\nFigure 3d. “Impact on the proportion of childbirth cases referred elsewhere”. Shoaib and Ramamohan (2021)\n \n\n\nFigure 4. “Effect of including additional labour beds on proportion of childbirth patients referred elsewhere”. Shoaib and Ramamohan (2021)\n \n\n\n“We also note that waiting times for outpatient-related resources (laboratory, OPD consultation, etc. - not depicted in Figures 3a – 3d) increase marginally because the associated resources are also required by inpatient/childbirth/ANC cases, which increase in number in the above scenarios” Shoaib and Ramamohan (2021)\nReproduction (marginal increases from (1/1/1) through to (2/2/2)):\n\n\n\n\n\n\n\n\n\nConsultation time: mean (SD)\n(1/1/1)\n(2/1/1)\n(2/2/2)\nOutput\n\n\n\n\n0\n0.87 (0.21)\n0.011\n0.010\n0.023\nOPD queue waiting time (minutes)\n\n\n1\n2.5 (0.5)\n0.121\n0.124\n0.158\nOPD queue waiting time (minutes)\n\n\n2\n0.87 (0.21)\n2.069\n2.070\n2.110\nLab queue waiting time (minutes)\n\n\n3\n2.5 (0.5)\n2.314\n2.322\n2.308\nLab queue waiting time (minutes)\n\n\n\n\n\n\n\n\n\n“To address this, we experimented with letting the staff nurse (whose utilisation is approximately 32%) take over the administrative work. This led to a 12% drop in the utilisation level, which implied that the doctor’s utilisation still exceeded 100%. Implementing this measure resulted in increasing the staff nurse utilisation to nearly 40%.” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\nOutput\nOriginal utilisation\nUtilisation if admin is assigned to the staff nurse\nChange\n\n\n\n\n0\nDoctor utilisation\n1.141\n1.023\n-0.118\n\n\n1\nStaff nurse utilisation\n0.326\n0.404\n0.078\n\n\n\n\n\n\n\n\n\n“…then considered a situation wherein the staff nurses require minimal intervention in childbirth cases. We assumed that in 50% of childbirth cases, staff nurses require no intervention by the doctor; require only one- third of the typical amount of intervention in 30% of cases, and require full intervention in the remaining 20% of cases. This led to a decrease of the doctor’s utilisation to 101% (a further decrease of approximately 1%), and an increase in the nurse’s utilisation to 40%.” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nLess delivery\nLess admin\nLess admin + less delivery\n\n\n\n\n0\nDoctor utilisation\n1.141\n1.131\n1.023\n1.013\n\n\n1\nStaff nurse utilisation\n0.326\n0.323\n0.404\n0.402\n\n\n\n\n\n\n\n\n\n“..investigated the effect of stationing an additional doctor in the PHC. This yielded an average utilisation of well below 100% for each doctor.” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nExtra doctor\nExtra doctor + less admin + less delivery\n\n\n\n\n0\nDoctor utilisation\n1.141\n0.761\n0.675\n\n\n\n\n\n\n\n\n\n“We also observe that if the number of beds is reduced to four from six, the utilisation level is observed to be approximately thirty-three percent even under higher demand conditions (two inpatient and childbirth cases/day).” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\nOutput\n6 beds\n4 beds\n\n\n\n\n0\nInpatient bed utilisation (metric 1)\n0.186271\n0.280377\n\n\n1\nInpatient bed utilisation (metric 2)\n0.198000\n0.297000\n\n\n\n\n\n\n\n\n\n“When the administrative work alone is assigned to the staff nurse the average utilisation of the NCD nurse decreases to 100%” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nAdmin from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n1.232\n0.995\n\n\n\n\n\n\n\n\n\n“Further, in addition to the administrative work when the staff nurse assisted for NCD checks (for 10% cases) the utilisation of NCD nurse dropped to 71%.” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nAdmin from NCD to staff nurse\n10% OPD appointments from NCD to staff nurse\nAdmin and 10% OPD appointments from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n1.232\n0.995\n1.069\n0.834"
  },
  {
    "objectID": "evaluation/reproduction_report.html#evaluation-against-guidelines",
    "href": "evaluation/reproduction_report.html#evaluation-against-guidelines",
    "title": "Summary report",
    "section": "Evaluation against guidelines",
    "text": "Evaluation against guidelines\n\n\n                                                \n\n\nContext: The original study repository was evaluated against criteria from journal badges relating to how open and reproducible the model is and against guidance for sharing artefacts from the STARS framework. The original study article and supplementary materials (excluding code) were evaluated against reporting guidelines for DES models: STRESS-DES, and guidelines adapted from ISPOR-SDM."
  },
  {
    "objectID": "evaluation/scope.html",
    "href": "evaluation/scope.html",
    "title": "Scope",
    "section": "",
    "text": "This page outlines that parts of the journal article which we will attempt to reproduce.\nAs cited throughout, images on this page are sourced from Shoaib and Ramamohan (2021), which is shared under CC BY-NC-ND."
  },
  {
    "objectID": "evaluation/scope.html#within-scope",
    "href": "evaluation/scope.html#within-scope",
    "title": "Scope",
    "section": "Within scope",
    "text": "Within scope\nThere are 17 items in the scope (1 table, 9 figures, and 7 in-text results).\n\n\n\n\n\n\nTable 6\n\n\n\n\n\n\n\n\nTable 6. “Operational outcomes for each PHC configuration simulation. * Number of doctors/OPD cases/IPD cases/childbirth/ANC (patients)/inpatient beds/labour room” Shoaib and Ramamohan (2021)\n\n\nCSV version:\n\nimport pandas as pd\n\ntab6 = pd.read_csv('../original_study/tab6.csv')\ntab6\n\n\n\n\n\n\n\n\noutcome\nconfig1_mean\nconfig1_sd\nconfig2_mean\nconfig2_sd\nconfig3_mean\nconfig3_sd\nbenchmark_mean\nbenchmark_sd\n\n\n\n\n0\nDoctor utilisation\n0.268\n0.003\n0.372\n0.004\n0.354\n0.002\n1.142\n0.006\n\n\n1\nNCD Nurse utilisation\n0.865\n0.011\n0.469\n0.005\n0.468\n0.005\n1.232\n0.019\n\n\n2\nStaff nurse utilisation\n0.323\n0.008\n0.243\n0.006\n0.160\n0.001\n0.322\n0.008\n\n\n3\nPharmacist utilisation\n0.643\n0.004\n0.288\n0.003\n0.289\n0.003\n0.855\n0.005\n\n\n4\nLab utilisation\n0.559\n0.008\n0.254\n0.004\n0.239\n0.004\n0.736\n0.011\n\n\n5\nInpatient bed utilisation\n0.093\n0.004\n0.055\n0.003\n0.011\n0.001\n0.093\n0.004\n\n\n6\nLabour bed utilisation\n0.283\n0.010\n0.153\n0.009\nNaN\nNaN\n0.281\n0.012\n\n\n7\nMean length of OPD queue (number of patients)\n0.000\n0.000\n0.007\n0.001\n0.001\n0.000\n0.817\n0.027\n\n\n8\nOPD queue waiting time (minutes)\n0.009\n0.004\n0.171\n0.032\n0.034\n0.001\n6.789\n0.268\n\n\n9\nMean length of pharmacy queue (number of patie...\n0.090\n0.002\n0.010\n0.001\n0.009\n0.000\n0.150\n0.002\n\n\n10\nPharmacy queue waiting time (minutes)\n1.025\n0.021\n0.244\n0.008\n0.232\n0.006\n1.282\n0.018\n\n\n11\nMean length of Lab queue (number of patients)\n0.094\n0.003\n0.012\n0.001\n0.011\n0.000\n0.188\n0.001\n\n\n12\nLab queue waiting time (minutes)\n2.084\n0.054\n0.606\n0.023\n0.571\n0.020\n3.135\n0.005\n\n\n13\nFraction of childbirth cases referred\n0.156\n0.019\n0.088\n0.022\nNaN\nNaN\n0.157\n0.180\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 2a\n\n\n\n\n\n\n\n\nFigure 2a. “Impact on doctor’s utilisation.” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 2b\n\n\n\n\n\n\n\n\nFigure 2b. “Impact on the NCD nurse’s utilisation.” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 2c\n\n\n\n\n\n\n\n\nFigure 2c. “Impact on the average waiting time (minutes) in the OPD”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 2d\n\n\n\n\n\n\n\n\nFigure 2d. “Impact on the average waiting time (minutes) in the pharmacy”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 3a\n\n\n\n\n\n\n\n\nFigure 3a. “Impact on the doctor’s utilisation. Two levels of outpatient consultation times (minutes) are used”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 3b\n\n\n\n\n\n\n\n\nFigure 3b. “Impact on the staff nurse’s utilisation”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 3c\n\n\n\n\n\n\n\n\nFigure 3c. “Impact on the inpatient bed’s utilisation”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 3d\n\n\n\n\n\n\n\n\nFigure 3d. “Impact on the proportion of childbirth cases referred elsewhere”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nFigure 4\n\n\n\n\n\n\n\n\nFigure 4. “Effect of including additional labour beds on proportion of childbirth patients referred elsewhere”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 1\n\n\n\n\n\nFrom section 4.3: “We also note that waiting times for outpatient-related resources (laboratory, OPD consultation, etc. - not depicted in Figures 3a – 3d) increase marginally because the associated resources are also required by inpatient/childbirth/ANC cases, which increase in number in the above scenarios”\nInterpretation:\n\nRun sensitivity analysis as in Figures 3a-d, but look at outcomes relating to laboratory and outpatient consulation\nResult: marginal increase\n\n\n\n\n\n\n\n\n\n\nIn-text result 2\n\n\n\n\n\nFrom section 4.3.1: “To address this, we experimented with letting the staff nurse (whose utilisation is approximately 32%) take over the administrative work. This led to a 12% drop in the utilisation level, which implied that the doctor’s utilisation still exceeded 100%. Implementing this measure resulted in increasing the staff nurse utilisation to nearly 40%.”\nInterpretation:\n\nAverage patient load of 170 per day\nAverage consultation time of 5 min per patient\nChange doctor to have no administrative work, and assign all to staff nurse\nResults: doctor utilisation 103%\n\n103% is because the next result is 1% below, and as there is a 12% drop from fig 2a, still over 100%, and nurse utilisation at 40%\n\n\n\n\n\n\n\n\n\nIn-text result 3\n\n\n\n\n\nFrom section 4.3.1: “then considered a situation wherein the staff nurses require minimal intervention in childbirth cases. We assumed that in 50% of childbirth cases, staff nurses require no intervention by the doctor; require only one- third of the typical amount of intervention in 30% of cases, and require full intervention in the remaining 20% of cases. This led to a decrease of the doctor’s utilisation to 101% (a further decrease of approximately 1%), and an increase in the nurse’s utilisation to 40%.”\nInterpretation:\n\nAverage patient load of 170 per day\nAverage consultation time of 5 min per patient\nChange doctors from always attending childbirth cases when free to 50% not attending, 30% attending but for one-third of normal time, 20% attending for normal time\nResult: Doctor utilisation 101% and nurse utilisation 40%\n\n\n\n\n\n\n\n\n\n\nIn-text result 4\n\n\n\n\n\nFrom section 4.3.1: “investigated the effect of stationing an additional doctor in the PHC. This yielded an average utilisation of well below 100% for each doctor.”\nInterpretation:\n\nAverage patient load of 170 per day\nAverage consultation time of 5 min per patient\nAdd a doctor\nResult: each doctor has utilisation “well below 100%”\n\n\n\n\n\n\n\n\n\n\nIn-text result 5\n\n\n\n\n\nFrom section 4.3.2: “We also observe that if the number of beds is reduced to four from six, the utilisation level is observed to be approximately thirty-three percent even under higher demand conditions (two inpatient and childbirth cases/day).”\nInterpretation:\n\nReduce from six to four inpatient beds\nConditions un-specified (assume standard, and also high demand (2 inpatient and childbirth cases per day))\nResult: Approximately 33% utilisation\n\n\n\n\n\n\n\n\n\n\nIn-text result 6\n\n\n\n\n\nFrom section 4.3.3: “When the administrative work alone is assigned to the staff nurse the average utilisation of the NCD nurse decreases to 100%”\nInterpretation:\n\nOutpatient interarrival time 3 minutes\nNo administrative work for NCD nurse, only assigned to staff nurse\nResult: NCD nurse utilisation 100%\n\n\n\n\n\n\n\n\n\n\nIn-text result 7\n\n\n\n\n\nFrom section 4.3.3: “Further, in addition to the administrative work when the staff nurse assisted for NCD checks (for 10% cases) the utilisation of NCD nurse dropped to 71%.”\nInterpretation:\n\nOutpatient interarrival time 3 minutes\nPotentially combined with change in administrative work\nAssigned staff nurse for 10% of NCD cases\nResult: NCD nurse utilisation 71%"
  },
  {
    "objectID": "evaluation/scope.html#outside-scope",
    "href": "evaluation/scope.html#outside-scope",
    "title": "Scope",
    "section": "Outside scope",
    "text": "Outside scope\nThese are tables and figures from the main body of the text which were considered to be outside the scope of this reproduction.\n\n\n\n\n\n\nFigure 1\n\n\n\n\n\n\n\n\nFigure 1. “Patient flow in the archetypal PHC”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nTable 1\n\n\n\n\n\n\n\n\nTable 1. “Data summary of staffing level, patient load, and other facilities at PHCs”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nTable 2\n\n\n\n\n\n\n\n\nTable 2. “Service time data summary for key PHC resources”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nTable 3\n\n\n\n\n\n\n\n\nTable 3. “PHC configurations. 1: Note: the nurses work in shifts – that is, each nurse works alone in an eight-hour shift. NA = not applicable. All configurations have 6 inpatient beds and 1 childbirth room (with a single bed).” Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nTable 4\n\n\n\n\n\n\n\n\nTable 4. “Facility independent input parameters”. Shoaib and Ramamohan (2021)\n\n\n\n\n\n\n\n\n\n\n\nTable 5\n\n\n\n\n\n\n\n\nTable 5. “Internal validation outcomes for doctor’s utilisation”. Shoaib and Ramamohan (2021)"
  },
  {
    "objectID": "evaluation/reflections.html",
    "href": "evaluation/reflections.html",
    "title": "Reflections",
    "section": "",
    "text": "This page contains reflections on the facilitators and barriers to this reproduction, as well as a full list of the troubleshooting steps taken to reproduce this work."
  },
  {
    "objectID": "evaluation/reflections.html#what-would-have-helped-facilitate-this-reproduction",
    "href": "evaluation/reflections.html#what-would-have-helped-facilitate-this-reproduction",
    "title": "Reflections",
    "section": "What would have helped facilitate this reproduction?",
    "text": "What would have helped facilitate this reproduction?\nProvide environment (packages and versions)\n\nNot all packages needed will be listed in the imports (e.g. greenlet, pathlib)\nDidn’t work with latest package versions, had to backdate it for it to work\nStruggled making environment due to confusion around base package statistics, which had mixed up with one that can be imported from conda/pypi\nTime consuming (apx. 1h30 exc. computation time)\n\nMake clear results with all outputs\n\nSpent some time comparing two alternative results spreadsheets, which had slightly different results for the same metrics, which was a little confusing\nAlso, the same spreadsheet sometimes had duplicate metrics (either with the same or differing results), which again, could be a bit confusing\nHad to add some outputs and calculations (e.g. proportion of childbirth cases referred, standard deviation)\n\nWrite the model so it can be modified programmatically and avoid hard-coded values\n\nThis is so you don’t have to directly change parameters in the script itself.\nMakes it easier for reproduction to run multiple versions of the model using the same script\nMakes hidden errors less likely (e.g. if miss changing a parameter somewhere, or input the wrong parameters and don’t realise)\nAlso, makes it easier for scenario analyses, to spot where need to change hard-coded values\n\nTry to improve speed of model where possible\n\nSlow run time meant I introduced parallel processing for the model variants, and generally only ran 10 rather than 100 replications\n\nGive all parameters for a given scenario in a single table\n\nFor example, initially didn’t realise that had to change consultation boundaries as well as mean and standard deviation, as this is not listed in Table 4 (although is in the text)\nCan be difficult to identify parameters for the scenarios if they are not provided in a table or in the script, but are only described in the article\nThere were some discrepancies in the parameters of the scenarios between the main text of the article and the tables and figures. This could’ve been helped by more comprehensive tables or outlines of the parameters for each configuration and scenario, so that you weren’t having to rely on combining the text and tables/figures.\nSome parameters that could not be calculated were not provided - ie. what consultation boundaries to use when mean length of doctor consultation was 2.5 minutes\nSome scenarios were quite ambiguous/unclear from their description in the text, and I initially misunderstood the required parameters for the scenarios\n\nExplain how to calculate parameters, if not provided\n\nWas unclear how to estimate inter-arrival time (when only provided number of arrivals)\n\nProvide code to process results into tables and/or figures\n\nIt took a little bit of time to create the tables and figures from scratch, making them visually similar to the original article\n\nProvide code for scenarios\n\nThere were several instances where it took quite a while to understand how and where to modify the code in order to run scenarios (e.g. no arrivals, transferring admin work, reducing doctor intervention in deliveries)\n\nReduce duplication of code\n\nThe model often contained very similar code before or after warm-up. This has the potential to introduce mistakes - with a suspected (although unconfirmed) mistake being that the lower boundary for the doctor consultation times in configuration 1 differed before and after warm-up.\n\nIncluding tick marks/grid lines on axes\n\nThis is so it is easier to read across and judge where a result is above or below a certain Y value\n\nBonus: Ease of seeds in salabim\n\nThis wasn’t necessary for the reproduction due to the replication number, but I wanted to note that a great facilitator to this work was the ease of setting a seed with salabim package. I only had to change one line of code to then get consistent results between runs (unlike other simulation software like SimPy where you have to consider the use of seeds by different sampling functions). Moreover, by default, salabim would have set a seed (this was just overwridden by choice of original authors)."
  },
  {
    "objectID": "evaluation/reflections.html#full-list-of-troubleshooting-steps",
    "href": "evaluation/reflections.html#full-list-of-troubleshooting-steps",
    "title": "Reflections",
    "section": "Full list of troubleshooting steps",
    "text": "Full list of troubleshooting steps\n\n\n\n\n\n\nView list\n\n\n\n\n\nTroubleshooting steps are grouped by theme, and the day these occurred is given in brackets at the end of each bullet.\n\nEnvironment\n\nNo environment file, and no versions for Python or Salabim in paper (2)\nDependencies based on PHC.py and package versions on or prior to 14th March 2021 (2)\nEnvironment slow to build with lots of package conflicts (2)\nTried only specifying Python version but still lots of conflicts (2)\nSwitched to using mamba which returned conflict message that was much easier to understand (2)\nStatistics required Python 2.7 - changed this and it built successfully. (2)\nAdd pathlib to environment (2)\nSalabim not working. Tried installing Pillow. Then realised mistake was that statistics on conda/PyPi is an import to allow it to work with 2.7, but actually, statistics is a built-in python module that was introduced in Python 3.4. (2)\nDeleted statistics and rebuilt environment, which worked fine but several more recent packages than paper, but left for now (2)\nAdd greenlet to environment (required from salabim documentation) (2)\nWasn’t working, so rebuilt environment with older versions like I’d planned originally, and it worked fine! So probably would’ve worked fine to begin with (with addition of pathlib and greenlet), if I’d not included statistics (2)\nAdd xlrd and pandas to environment so can import the .xls files produced and process them, and openpyxl so could import .xlsx (although understand that these weren’t previously in environment as the provided code did not process the results) (2)\n\nThis was time consuming - approximate time (exc. long conda computation time for solving environment):\n\n\nTime spent today: 89m, or 1h 29m\nTotal used to date: 89m, or 1h 29m\n\n\n\n\nResults spreadsheets\n\nDefault is to produce results with a hard coded name in main folder - modified code so this goes to an outputs/ folder and has a specified file name (2)\nScript had code to produce two results spreadsheets: Outputs.xlsx (replication spreadsheet, which was active) and Config_3(2).xlsx (full average results spreadsheet, which was disabled). Spent some time comparing results between these spreadsheets, finding they had different labels and sometimes missing certain results. The results also did not exactly match (when comparing base configuration 1) but all were likely due to rounding differences. Later inspection of the code revealed some were created consistently, and some results were calculated differently, between the spreadsheets. One was also missing standard deviation. Made a choice to use one of the spreadsheets rather than the other. (2)\nHad to add proportion of childbirth cases referred (2)\nThe replication spreadsheet had two OPD queue length outputs with differing results, with only one being based on the list of OPD patients (waitingline_OPD), whilst the other was based on a list of delivery patients (an_list) (3)\nHad to add standard deviation (3)\nThe replication spreadsheet also had two inpatient bed utilisation metrics (one calculated manually, and one based on a Salabim Resource value)\n\n\n\nProgrammatically changing the parameter values\n\nModified the main() function so that the parameters provided to that functions are inputs, so that it can be run and parameters changed from a seperate script. (2)\nConfirming that global variables were still operating as expected, following my changes to the code. (3)\n\n\n\nReplications\n\nPaper lists 100 replications, but script (for which all other parameters match up with configuration 1) is set up to run with 10 replications (2)\nTakes a very long time to run 100, and since results look so similar to with 10, largely only ran 10 replications (with exception of first item, Table 6) (4)\nThese were very slow to run, so set up parallel processing to run the model variants. (4)\nChanged Table 6 to also run 10 replications (8)\n\n\n\nDiscrepancies in the article\n\nConfiguration 4 stated 4 nurses in table but 5 nurses in the text (deduced should be 4, since described as working consecutive 8 hour shifts) (3)\nTable 3 caption describes all configurations as 6 inpatient and 1 labour bed, whilst Table 6 describes configuration 3 as 0 labour beds, but since no labour arrival, has no impact on results. (3)\nDifferences in the number of arrivals for each configuration between Table 6 and section 3.3.1 (e.g. 125 v.s. 130). As inter-arrival times were provided for these (and we use that rather than number of arrivals), this didn’t have an impact. (3)\n\n\n\nEstimating IAT\n\nWas unclear how to get the IAT, when only the number of arrivals is provided, and had to make rough estimates for these based on the know IAT and arrival numbers (3,5)\nFor Figure 4, the estimate I was confident in did not reproduce results, but an estimate I didn’t think would be right did! (5)\n\n\n\nConsultation boundaries\n\nDidn’t initially realise I needed to change the consultation lower boundary, as well as the mean and standard deviation for the appointment, as this was not listed in Table 4 (but is in the text) (3)\nNoticed that the original PHC.py script had two different boundaries before and after warm-up. Not certain if this was intentional or not, but left as is. (3)\nDid not provide consultation boundaries to use when mean is 2.5, so had to guess these. (4)\n\n\n\nCreating tables and/or figures\n\nFor each result, had to manually produce the table and/or figure as no code was provided for this (2,3,4)\n\n\n\nAmbiguous/unclear scenarios\nFor each scenario, I had to identify the required parameters from the text. This was often relatively straightforward, although in some cases, it was less so -\n\nFor Figure 2C, initially misunderstood which consultation times to use (4)\nFor Figure 4, initially misunderstood this as adding 1 or 2 extra beds, rather than being a totaly of 1 or 2 beds (5)\nFor in-text result 3, initially misunderstood the change in doctor intervention as being seperate from the admin change, rather than in addition to the admin change (6)\nFor in-text result 4, it was likely unclear if the additiona of a doctor was seperate or in addition to prior changes (although regardless, the result worked out, as just needed to be utiliation “well below 100%”) (6)\n\n\n\nWorking out how to change the model to add the scenarios\n\nConfiguration has no arrivals, and was unclear how to set this in the model. Tried giving high IAT but was getting 1 antenatal arrival with every run. Instead, set ANC() and Delivery as True/False in main(), which then successfully prevented arrivals. (3)\nFor in-text result 2, spent a while understanding how admin work was generated and use, so I knew how to add code that transfers it to the nurse. It was initially challenging to identify how to reallocate these tasks. (5)\nLikewise, for in-text result 3, it took a while to understand how and where to change the code to modify the doctor’s intervention in delivery cases. (6)\nFor in-text result 5 and 7, it took a while to identify where I needed to change the script to get consistent results. For result 5, I initially made a mistake when modifying the script, replacing hard-coded values with delivery_bed_n when I should’ve replaced them with inpatient_bed_n (6,7)\n\n\n\nWhether scenario parameters reported are correct\n\nFor in-text 7, I was unable to reproduce results, without changing the scenario from a change of 10% cases transferred to 20% cases transferred. Although we cannot be sure whether this was definitely the answer - or whether there is anything wrong elsewhere. (7)\n\n\n\nSeeds\n\nAdd seed so get consistent results between runs (since was not needed to assess reproduction success, added during research compendium stage) (8)"
  },
  {
    "objectID": "evaluation/reproduction_success.html",
    "href": "evaluation/reproduction_success.html",
    "title": "Reproduction success",
    "section": "",
    "text": "Of the 17 items in the scope, 94% (16 out of 17) were considered to be successfully reproduced.\nAs cited throughout, images on this page are sourced from Shoaib and Ramamohan (2021), which is shared under CC BY-NC-ND.\nUnless otherwise stated, items were run with 10 replications rather than 100. This is because 100 replications took a long time to run, and as results were very similar between 10 and 100 replications."
  },
  {
    "objectID": "evaluation/reproduction_success.html#time-to-completion",
    "href": "evaluation/reproduction_success.html#time-to-completion",
    "title": "Reproduction success",
    "section": "Time-to-completion",
    "text": "Time-to-completion\nNon-interactive plot:\n\n\n\n\n\n\n\n\n\nInteractive plot:"
  },
  {
    "objectID": "evaluation/reproduction_success.html#reproduction-of-items-from-the-scope",
    "href": "evaluation/reproduction_success.html#reproduction-of-items-from-the-scope",
    "title": "Reproduction success",
    "section": "Reproduction of items from the scope",
    "text": "Reproduction of items from the scope\n\n\n\n\n\n\nTable 6\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\nSimulation Outcome\nConfiguration 1\nConfiguration 2\nConfiguration 3\nBenchmark Case\n\n\n\n\n0\nDoctor utilisation\n0.269 (0.002)\n0.372 (0.004)\n0.354 (0.001)\n1.141 (0.005)\n\n\n1\nNCD Nurse utilisation\n0.868 (0.01)\n0.467 (0.004)\n0.467 (0.004)\n1.23 (0.015)\n\n\n2\nStaff nurse utilisation\n0.318 (0.007)\n0.246 (0.006)\n0.161 (0.001)\n0.326 (0.009)\n\n\n3\nPharmacist utilisation\n0.643 (0.003)\n0.289 (0.003)\n0.288 (0.003)\n0.854 (0.004)\n\n\n4\nLab utilisation\n0.555 (0.007)\n0.254 (0.003)\n0.239 (0.004)\n0.729 (0.015)\n\n\n5\nInpatient bed utilisation\n0.092 (0.004)\n0.057 (0.004)\n0.012 (0.001)\n0.094 (0.004)\n\n\n6\nLabour bed utilisation\n0.28 (0.014)\n0.157 (0.007)\nnan (nan)\n0.285 (0.013)\n\n\n7\nMean length of OPD queue (number of patients)\n0.001 (0.0)\n0.007 (0.001)\n0.001 (0.0)\n0.813 (0.04)\n\n\n8\nOPD queue waiting time (minutes)\n0.008 (0.004)\n0.178 (0.032)\n0.035 (0.002)\n6.937 (0.317)\n\n\n9\nMean length of pharmacy queue (number of patie...\n0.09 (0.003)\n0.01 (0.0)\n0.009 (0.0)\n0.15 (0.003)\n\n\n10\nPharmacy queue waiting time (minutes)\n1.028 (0.031)\n0.244 (0.005)\n0.23 (0.006)\n1.282 (0.02)\n\n\n11\nMean length of Lab queue (number of patients)\n0.095 (0.003)\n0.012 (0.0)\n0.011 (0.0)\n0.186 (0.006)\n\n\n12\nLab queue waiting time (minutes)\n2.093 (0.044)\n0.597 (0.016)\n0.561 (0.024)\n3.124 (0.082)\n\n\n13\nFraction of childbirth cases referred\n0.148 (0.015)\n0.092 (0.01)\nnan (nan)\n0.166 (0.019)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 2A\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 2B\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 2C\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 2D\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 3A\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 3B\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 3C\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 3D\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 4\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal (Shoaib and Ramamohan (2021)):\n\n\n\n\n\nReproduction:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 1\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal:\nFrom section 4.3: “We also note that waiting times for outpatient-related resources (laboratory, OPD consultation, etc. - not depicted in Figures 3a – 3d) increase marginally because the associated resources are also required by inpatient/childbirth/ANC cases, which increase in number in the above scenarios”\nInterpretation:\n\nRun sensitivity analysis as in Figures 3A-D, but look at outcomes relating to laboratory and outpatient waiting times\nResult: marginal increase\n\nReproduction:\nWe observed marginal increases (e.g. .1 or 0.01 of a minute).\n\n\n\n\n\n\n\n\n\nConsultation time: mean (SD)\n(1/1/1)\n(2/1/1)\n(2/2/2)\nOutput\n\n\n\n\n0\n0.87 (0.21)\n0.011\n0.010\n0.023\nOPD queue waiting time (minutes)\n\n\n1\n2.5 (0.5)\n0.121\n0.124\n0.158\nOPD queue waiting time (minutes)\n\n\n2\n0.87 (0.21)\n2.069\n2.070\n2.110\nLab queue waiting time (minutes)\n\n\n3\n2.5 (0.5)\n2.314\n2.322\n2.308\nLab queue waiting time (minutes)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 2\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal:\nFrom section 4.3.1: “To address this, we experimented with letting the staff nurse (whose utilisation is approximately 32%) take over the administrative work. This led to a 12% drop in the utilisation level, which implied that the doctor’s utilisation still exceeded 100%. Implementing this measure resulted in increasing the staff nurse utilisation to nearly 40%.”\nInterpretation:\n\nAverage patient load of 170 per day\nAverage consultation time of 5 min per patient\nChange doctor to have no administrative work, and assign all to staff nurse\nResults: doctor utilisation 103%, staff nurse utilisation nearly 40%\n\nReproduction:\nWe observe doctor utilisation drop 12% (114% to 102%), and staff nurse utilisation rise from 32% to 40%.\n\n\n\n\n\n\n\n\n\nOutput\nOriginal utilisation\nUtilisation if admin is assigned to the staff nurse\nChange\n\n\n\n\n0\nDoctor utilisation\n1.141\n1.023\n-0.118\n\n\n1\nStaff nurse utilisation\n0.326\n0.404\n0.078\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 3\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal:\nFrom section 4.3.1: “then considered a situation wherein the staff nurses require minimal intervention in childbirth cases. We assumed that in 50% of childbirth cases, staff nurses require no intervention by the doctor; require only one- third of the typical amount of intervention in 30% of cases, and require full intervention in the remaining 20% of cases. This led to a decrease of the doctor’s utilisation to 101% (a further decrease of approximately 1%), and an increase in the nurse’s utilisation to 40%.”\nInterpretation:\n\nAverage patient load of 170 per day\nAverage consultation time of 5 min per patient\nChange doctors from always attending childbirth cases when free to 50% not attending, 30% attending but for one-third of normal time, 20% attending for normal time\nResult: Doctor utilisation 101% and nurse utilisation 40%\n\nReproduction:\nThe above interpretation was incorrect - this result is obtained by changing the delivery in addition to the admin changes.\nDoctor utilisation decreases by a further 1% (102% to 101%). No change in staff nurse utilisation - but remains around 40%, and the original paper describes the nurse utilisation as not changing significantly, and from changing from “nearly 40%” to 40%, so our slight difference from that is very small and likely just model stochasticity and having run 10 replications.\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nLess delivery\nLess admin\nLess admin + less delivery\n\n\n\n\n0\nDoctor utilisation\n1.141\n1.131\n1.023\n1.013\n\n\n1\nStaff nurse utilisation\n0.326\n0.323\n0.404\n0.402\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 4\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal:\nFrom section 4.3.1: “investigated the effect of stationing an additional doctor in the PHC. This yielded an average utilisation of well below 100% for each doctor.”\nInterpretation:\n\nAverage patient load of 170 per day\nAverage consultation time of 5 min per patient\nAdd a doctor\nResult: each doctor has utilisation “well below 100%”\n\nReproduction:\nThe exact parameters of the scenario are ambiguous. However, regardless of whether the additional doctor is alone (as in interpretation above), or in addition to the previous admin and delivery changes (as was the case for in-text result 3), in both cases the doctor utilisation can safely be described as “well below 100%”.\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nExtra doctor\nExtra doctor + less admin + less delivery\n\n\n\n\n0\nDoctor utilisation\n1.141\n0.761\n0.675\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 5\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal:\nFrom section 4.3.2: “We also observe that if the number of beds is reduced to four from six, the utilisation level is observed to be approximately thirty-three percent even under higher demand conditions (two inpatient and childbirth cases/day).”\nInterpretation:\n\nReduce from six to four inpatient beds\nConditions un-specified (assume standard, and also high demand (2 inpatient and childbirth cases per day))\nResult: Approximately 33% utilisation\n\nReproduction:\nFor this result, I realised there were two metrics for bed utilisation being calculated. In prior results (e.g. Figure 3C), I used the first metric, which was calculated manually by the original study author. The second metric is the occupancy returned by the bed SimPy resource. Regardless of which metric we might or should use, both have fairly similar results (differing by 1%) - either raising from 19% to 28%, or from 20% to 30%.\nAlthough this is a bit different from the original study result, I feel it is reasonably similar enough - and a marked increase - to be considered successfully reproduced.\n\n\n\n\n\n\n\n\n\nOutput\n6 beds\n4 beds\n\n\n\n\n0\nInpatient bed utilisation (metric 1)\n0.186271\n0.280377\n\n\n1\nInpatient bed utilisation (metric 2)\n0.198000\n0.297000\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 6\n\n\n\n\n\nConsensus: Successfully reproduced\nOriginal:\nFrom section 4.3.3: “When the administrative work alone is assigned to the staff nurse the average utilisation of the NCD nurse decreases to 100%”\nInterpretation:\n\nOutpatient interarrival time 3 minutes\nNo administrative work for NCD nurse, only assigned to staff nurse\nResult: NCD nurse utilisation 100%\n\nReproduction:\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nAdmin from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n1.232\n0.995\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn-text result 7\n\n\n\n\n\nConsensus: Not reproduced\nOriginal:\nFrom section 4.3.3: “Further, in addition to the administrative work when the staff nurse assisted for NCD checks (for 10% cases) the utilisation of NCD nurse dropped to 71%.”\nInterpretation:\n\nOutpatient interarrival time 3 minutes\nPotentially combined with change in administrative work\nAssigned staff nurse for 10% of NCD cases\nResult: NCD nurse utilisation 71%\n\nReproduction:\nWe see a large decrease, but still a fair bit higher than 71%. We get a closer result if we set 20% of cases to be referred to the staff nurse.\nResult when 10% cases are transferred (10 replications):\n\n\n\n\n\n\n\n\n\nOutput\nNormal\nAdmin from NCD to staff nurse\n10% OPD appointments from NCD to staff nurse\nAdmin and 10% OPD appointments from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n1.232\n0.995\n1.069\n0.834\n\n\n\n\n\n\n\nResult when 10% cases are transferred (100 replications):\n\n\n\n\n\n\n\n\n\nOutput\nAdmin and 10% OPD appointments from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n0.827\n\n\n\n\n\n\n\nResult when 20% cases are transferred (10 replications):\n\n\n\n\n\n\n\n\n\nOutput\nAdmin and 20% OPD appointments from NCD to staff nurse\n\n\n\n\n0\nNCD nurse utilisation\n0.69"
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html",
    "href": "logbook/posts/2024_06_21/index.html",
    "title": "Day 2",
    "section": "",
    "text": "Note\n\n\n\nBuilt environment and got Table 6 config 1 results. Total time used: 8h 51m (22%)"
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#archive-scope-on-zenodo",
    "href": "logbook/posts/2024_06_21/index.html#archive-scope-on-zenodo",
    "title": "Day 2",
    "section": "10.02-10.16: Archive scope on Zenodo",
    "text": "10.02-10.16: Archive scope on Zenodo\nArchiving repository on Zenodo, now that have made consensus decision on scope following:\n\nDiscussion with Tom yesterday.\nEmails with Alison this morning, who also had a look over paper and our planned scope, and confirmed that she felt it looked complete.\n\nBefore doing so, created entry in CHANGELOG.md and updated CITATION.cff to include myself, Tom and Alison, and to amend the version and title."
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#look-over-code",
    "href": "logbook/posts/2024_06_21/index.html#look-over-code",
    "title": "Day 2",
    "section": "10.23-10.30 : Look over code",
    "text": "10.23-10.30 : Look over code\n\nAll code in PHC.py.\nSalabim.\nModel created using classes.\nFunction main() defines parameters (e.g. number of doctors) and runs model.\nNo random seed.\nSaves results to .xlsx with lots of stats (can spot lots from Table 6). Also outputs the input parameters used.\nCan’t spot code for defined scenarios or figures, so anticipating will need to create for self."
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#timings-below-set-up-environment",
    "href": "logbook/posts/2024_06_21/index.html#timings-below-set-up-environment",
    "title": "Day 2",
    "section": "(Timings below): Set up environment",
    "text": "(Timings below): Set up environment\nTimings for this section (provided as list rather than in header as often paused for time spent solving environment):\n\n10.31-10.47\n11.00-11.01\n11.03-11.04\n11.12-11.35\n\nNo environment file provided. Can’t spot Python or Salabim version in the paper, nor in README from prior commit. Therefore:\n\nDependencies from PHC.py\n\nDidn’t include random as should be in base\n\nModel code commit to GitHub on 14th March 2021. Paper first published online with simulation 18th July 2021, and latest arXiv version from 21st June 2021.\nHence, looked for package versions with dates on or prior to the earlier 14th March 2021.\n\nhttps://pypi.org/project/matplotlib/#history\nhttps://pypi.org/project/numpy/#history\nhttps://devguide.python.org/versions/\nhttps://pypi.org/project/salabim/#history\nhttps://pypi.org/project/statistics/#history\nhttps://pypi.org/project/XlsxWriter/#history\n\n\nname: shoaib2022\nchannels:\n  - defaults\ndependencies:\n  - matplotlib=3.3.4\n  - numpy=1.20.1\n  - pip=21.0.1\n  - python=3.9\n  - statistics=1.0.3.5\n  - xlsxwriter=1.3.7\n  - xlwt=1.3.0\n  - pip:\n    - salabim==21.0.2\nSpent along time solving environment and looking for incompatable packages (which excluded from timing above). Had lots of conflicts:\nUnsatisfiableError: The following specifications were found to be incompatible with each other:\n\nOutput in format: Requested package -&gt; Available versions\n\nPackage libuuid conflicts for:\nxlwt=1.3.0 -&gt; python[version='&gt;=3.11,&lt;3.12.0a0'] -&gt; libuuid[version='&gt;=1.0.3,&lt;2.0a0|&gt;=1.41.5,&lt;2.0a0']\nstatistics=1.0.3.5 -&gt; python[version='&gt;=3.10,&lt;3.11.0a0'] -&gt; libuuid[version='&gt;=1.0.3,&lt;2.0a0|&gt;=1.41.5,&lt;2.0a0']\nxlsxwriter=1.3.7 -&gt; python -&gt; libuuid[version='&gt;=1.0.3,&lt;2.0a0|&gt;=1.41.5,&lt;2.0a0']\n\nPackage certifi conflicts for:\npip=21.0.1 -&gt; setuptools -&gt; certifi[version='&gt;=2016.09|&gt;=2016.9.26']\nmatplotlib=3.3.4 -&gt; matplotlib-base[version='&gt;=3.3.4,&lt;3.3.5.0a0'] -&gt; certifi[version='&gt;=2020.06.20']\n\nPackage _libgcc_mutex conflicts for:\nnumpy=1.20.1 -&gt; libgcc-ng[version='&gt;=7.3.0'] -&gt; _libgcc_mutex[version='*|0.1',build=main]\npython=3.9 -&gt; libgcc-ng[version='&gt;=11.2.0'] -&gt; _libgcc_mutex[version='*|0.1',build=main]\n\nPackage pip conflicts for:\nnumpy=1.20.1 -&gt; python[version='&gt;=3.9,&lt;3.10.0a0'] -&gt; pip\nxlwt=1.3.0 -&gt; python[version='&gt;=3.11,&lt;3.12.0a0'] -&gt; pip\nmatplotlib=3.3.4 -&gt; python[version='&gt;=3.7,&lt;3.8.0a0'] -&gt; pip\nxlsxwriter=1.3.7 -&gt; python -&gt; pip\npip=21.0.1\npython=3.9 -&gt; pip\n\nPackage wheel conflicts for:\npython=3.9 -&gt; pip -&gt; wheel\npip=21.0.1 -&gt; wheel\n\nPackage ca-certificates conflicts for:\nxlwt=1.3.0 -&gt; python[version='&gt;=2.7,&lt;2.8.0a0'] -&gt; ca-certificates\npython=3.9 -&gt; openssl[version='&gt;=3.0.13,&lt;4.0a0'] -&gt; ca-certificates\nstatistics=1.0.3.5 -&gt; python[version='&lt;3'] -&gt; ca-certificates\nxlsxwriter=1.3.7 -&gt; python -&gt; ca-certificates\n\nPackage setuptools conflicts for:\npython=3.9 -&gt; pip -&gt; setuptools\nmatplotlib=3.3.4 -&gt; matplotlib-base[version='&gt;=3.3.4,&lt;3.3.5.0a0'] -&gt; setuptools\npip=21.0.1 -&gt; setuptools\n\nPackage numpy conflicts for:\nmatplotlib=3.3.4 -&gt; matplotlib-base[version='&gt;=3.3.4,&lt;3.3.5.0a0'] -&gt; numpy[version='&gt;=1.16.6,&lt;2.0a0']\nnumpy=1.20.1The following specifications were found to be incompatible with your system:\n\n  - feature:/linux-64::__glibc==2.35=0\n  - feature:|@/linux-64::__glibc==2.35=0\n  - numpy=1.20.1 -&gt; libgcc-ng[version='&gt;=7.3.0'] -&gt; __glibc[version='&gt;=2.17']\n  - python=3.9 -&gt; libgcc-ng[version='&gt;=11.2.0'] -&gt; __glibc[version='&gt;=2.17']\n\nYour installed version is: 2.35\nInstead of going package by package, tried out a simpler approach of changing to only specify the Python version and none of the individual packages. Still found lots of conflicts:\nPackage expat conflicts for:\nnumpy -&gt; python[version='&gt;=3.12,&lt;3.13.0a0'] -&gt; expat[version='&gt;=2.5.0,&lt;3.0a0|&gt;=2.6.2,&lt;3.0a0']\nxlsxwriter -&gt; python[version='&gt;=3.12,&lt;3.13.0a0'] -&gt; expat[version='&gt;=2.5.0,&lt;3.0a0|&gt;=2.6.2,&lt;3.0a0']\nmatplotlib -&gt; python[version='&gt;=3.12,&lt;3.13.0a0'] -&gt; expat[version='&gt;=2.5.0,&lt;3.0a0|&gt;=2.6.2,&lt;3.0a0']\npip -&gt; python[version='&gt;=3.12,&lt;3.13.0a0'] -&gt; expat[version='&gt;=2.5.0,&lt;3.0a0|&gt;=2.6.2,&lt;3.0a0']\n\nPackage numpy conflicts for:\nnumpy\nmatplotlib -&gt; matplotlib-base[version='&gt;=3.8.4,&lt;3.8.5.0a0'] -&gt; numpy[version='&gt;=1.15.4,&lt;2.0a0|&gt;=1.16.6,&lt;2.0a0|&gt;=1.20|&gt;=1.21.5,&lt;2.0a0|&gt;=1.21.6,&lt;2.0a0|&gt;=1.23.5,&lt;2.0a0|&gt;=1.26.4,&lt;2.0a0|&gt;=1.26.0,&lt;2.0a0|&gt;=1.22.3,&lt;2.0a0|&gt;=1.19.2,&lt;2.0a0|&gt;=1.21.2,&lt;2.0a0']\nmatplotlib -&gt; numpy[version='&gt;=1.14.6,&lt;2.0a0']\n\nPackage _libgcc_mutex conflicts for:\nmatplotlib -&gt; libgcc-ng[version='&gt;=7.3.0'] -&gt; _libgcc_mutex[version='*|0.1',build=main]\nnumpy -&gt; libgcc-ng[version='&gt;=11.2.0'] -&gt; _libgcc_mutex[version='*|0.1',build=main]\npython=3.9 -&gt; libgcc-ng[version='&gt;=11.2.0'] -&gt; _libgcc_mutex[version='*|0.1',build=main]\n\nPackage certifi conflicts for:\nmatplotlib -&gt; tornado -&gt; certifi[version='&gt;=2016.09|&gt;=2016.9.26|&gt;=2020.06.20']\npip -&gt; setuptools -&gt; certifi[version='&gt;=2016.09|&gt;=2016.9.26']\n\nPackage python conflicts for:\npip -&gt; python[version='&gt;=2.7,&lt;2.8.0a0|&gt;=3.10,&lt;3.11.0a0|&gt;=3.11,&lt;3.12.0a0|&gt;=3.9,&lt;3.10.0a0|&gt;=3.12,&lt;3.13.0a0|&gt;=3.8,&lt;3.9.0a0|&gt;=3.7,&lt;3.8.0a0|&gt;=3.6,&lt;3.7.0a0|&gt;=3.5,&lt;3.6.0a0']\npython=3.9\npip -&gt; wheel -&gt; python\nmatplotlib -&gt; cycler[version='&gt;=0.10'] -&gt; python[version='&gt;=3|&gt;=3.6']\nxlsxwriter -&gt; python[version='&gt;=2.7,&lt;2.8.0a0|&gt;=3.10,&lt;3.11.0a0|&gt;=3.12,&lt;3.13.0a0|&gt;=3.9,&lt;3.10.0a0|&gt;=3.8,&lt;3.9.0a0|&gt;=3.11,&lt;3.12.0a0|&gt;=3.4|&gt;=3.6,&lt;3.7.0a0|&gt;=3.7,&lt;3.8.0a0|&gt;=3.5,&lt;3.6.0a0']\nxlwt -&gt; python[version='&gt;=2.7,&lt;2.8.0a0|&gt;=3.10,&lt;3.11.0a0|&gt;=3.11,&lt;3.12.0a0|&gt;=3.9,&lt;3.10.0a0|&gt;=3.8,&lt;3.9.0a0|&gt;=3.7,&lt;3.8.0a0|&gt;=3.6,&lt;3.7.0a0|&gt;=3.5,&lt;3.6.0a0']\nstatistics -&gt; docutils[version='&gt;=0.3'] -&gt; python[version='&gt;=3.11,&lt;3.12.0a0|&gt;=3.12,&lt;3.13.0a0|&gt;=3.7,&lt;3.8.0a0|&gt;=3.9,&lt;3.10.0a0|&gt;=3.8,&lt;3.9.0a0|&gt;=3.6,&lt;3.7.0a0|&gt;=3.5,&lt;3.6.0a0']\nmatplotlib -&gt; python[version='&gt;=2.7,&lt;2.8.0a0|&gt;=3.10,&lt;3.11.0a0|&gt;=3.11,&lt;3.12.0a0|&gt;=3.9,&lt;3.10.0a0|&gt;=3.12,&lt;3.13.0a0|&gt;=3.8,&lt;3.9.0a0|&gt;=3.7,&lt;3.8.0a0|&gt;=3.6,&lt;3.7.0a0|&gt;=3.5,&lt;3.6.0a0']\nnumpy -&gt; python[version='&gt;=2.7,&lt;2.8.0a0|&gt;=3.10,&lt;3.11.0a0|&gt;=3.11,&lt;3.12.0a0|&gt;=3.12,&lt;3.13.0a0|&gt;=3.9,&lt;3.10.0a0|&gt;=3.8,&lt;3.9.0a0|&gt;=3.7,&lt;3.8.0a0|&gt;=3.6,&lt;3.7.0a0|&gt;=3.5,&lt;3.6.0a0']\nstatistics -&gt; python[version='&lt;3|&gt;=3.10,&lt;3.11.0a0|&gt;=2.7,&lt;2.8.0a0']\n\nPackage bzip2 conflicts for:\nxlsxwriter -&gt; python[version='&gt;=3.12,&lt;3.13.0a0'] -&gt; bzip2[version='&gt;=1.0.8,&lt;2.0a0']\nmatplotlib -&gt; python[version='&gt;=3.11,&lt;3.12.0a0'] -&gt; bzip2[version='&gt;=1.0.8,&lt;2.0a0']\nnumpy -&gt; python[version='&gt;=3.10,&lt;3.11.0a0'] -&gt; bzip2[version='&gt;=1.0.8,&lt;2.0a0']\nxlwt -&gt; python[version='&gt;=3.11,&lt;3.12.0a0'] -&gt; bzip2[version='&gt;=1.0.8,&lt;2.0a0']\nstatistics -&gt; python[version='&gt;=3.10,&lt;3.11.0a0'] -&gt; bzip2[version='&gt;=1.0.8,&lt;2.0a0']\npip -&gt; python[version='&gt;=3.11,&lt;3.12.0a0'] -&gt; bzip2[version='&gt;=1.0.8,&lt;2.0a0']\n\nPackage setuptools conflicts for:\npython=3.9 -&gt; pip -&gt; setuptools\npip -&gt; setuptools\nmatplotlib -&gt; setuptools\n\nPackage wheel conflicts for:\npip -&gt; wheel\npython=3.9 -&gt; pip -&gt; wheelThe following specifications were found to be incompatible with your system:\n\n  - feature:/linux-64::__glibc==2.35=0\n  - matplotlib -&gt; libgcc-ng[version='&gt;=7.3.0'] -&gt; __glibc[version='&gt;=2.17']\n  - numpy -&gt; libgcc-ng[version='&gt;=11.2.0'] -&gt; __glibc[version='&gt;=2.17']\n  - python=3.9 -&gt; libgcc-ng[version='&gt;=11.2.0'] -&gt; __glibc[version='&gt;=2.17']\n\nYour installed version is: 2.35\nBased on this stack overflow post, decided to instead try using mamba.\nconda install -n base conda-forge::mamba\nBut then read that was not recommended so tried -\ncurl -L -O \"https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh\"\nBut that wasn’t working so deleted and tried these instructions -\nwget https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-Linux-x86_64.sh\n\nbash Mambaforge-Linux-x86_64.sh\n\nyes\n\nyes\n\n# Closed terminal then reopened terminal\nThen, tried creating environment:\nmamba env create -f environment.yml\nThis returned a more understandable message:\nLibMambaUnsatisfiableError: Encountered problems while solving:\n  - package statistics-1.0.3.5-py27_1 requires python &gt;=2.7,&lt;2.8.0a0, but none of the providers can be installed\n\nCould not solve for environment specs\nThe following packages are incompatible\n├─ python 3.9**  is requested and can be installed;\n└─ statistics is not installable because there are no viable options\n   ├─ statistics 1.0.3.5 would require\n   │  └─ python [2.7* |&gt;=2.7,&lt;2.8.0a0 ], which conflicts with any installable versions previously reported;\n   ├─ statistics 1.0.3.5 would require\n   │  └─ python &gt;=3.10,&lt;3.11.0a0 , which conflicts with any installable versions previously reported;\n   └─ statistics 1.0.3.5 would require\n      └─ python &lt;3 , which conflicts with any installable versions previously reported.\nAppears from this message (and supported versions listed on pypi) that would need to switch to python 2.7. Environment then successfully installed, and update .yml to show versions it used.\nname: shoaib2022\nchannels:\n  - defaults\ndependencies:\n  - matplotlib=2.2.3\n  - numpy=1.16.6\n  - pip=19.3.1\n  - python=2.7\n  - statistics=1.0.3.5\n  - xlsxwriter=3.0.1\n  - xlwt=1.3.0\n  - pip:\n    - salabim==20.0.4\nAt a glance, all are lower than those I’d previously specified, except xlsxwriter, which is 3.0.1 (10 Aug 2021). As it would not be possible for them to have used this version, I set that to 1.3.7 and rebuilt environment.\nThis built quickly and with no issue."
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#running-script-and-returning-to-environment",
    "href": "logbook/posts/2024_06_21/index.html#running-script-and-returning-to-environment",
    "title": "Day 2",
    "section": "11.51-11.57, 12.03-12.37: Running script and returning to environment",
    "text": "11.51-11.57, 12.03-12.37: Running script and returning to environment\nCopied PHC.py into reproduction/ and ran file with environment active.\nImportError: No module named pathlib. Installed latest version of pathlib (which is from 2014) into environment.\nThen error:\nTraceback (most recent call last):\n  File \"/home/amy/Documents/stars/stars-reproduce-shoaib-2022/reproduction/PHC.py\", line 1, in &lt;module&gt;\n    import salabim as sim\n  File \"/home/amy/mambaforge/envs/shoaib2022/lib/python2.7/site-packages/salabim/__init__.py\", line 1, in &lt;module&gt;\n    from .salabim import *\n  File \"/home/amy/mambaforge/envs/shoaib2022/lib/python2.7/site-packages/salabim/salabim.py\", line 9451, in &lt;module&gt;\n    class AnimateCombined(collections.UserList):\nAttributeError: 'module' object has no attribute 'UserList'\nWanted to just explore basic salabim example first, to check environment is working, so made notebook that just imports salabim. Running required installation of ipykernel in environment. Excluded installation time for this from timings above. Then ran import salabim as sim, but this returned the same error as before just upon import.\nCurrent salabim documentation lists a few different imports that might be required. Went to old documentation on their GitHub, to the 20.0.4 branch then PDF with documentation (which is 20.0.3, but likewise if you go to 20.0.5 branch): https://github.com/salabim/salabim/blob/20%2C0%2C4/salabim.pdf. Then ran:\npip install Pillow\nWhich didn’t have much impact. Error message seems to relate to collections not having UserList. Collections is a built-in module in base python. Tried to just import collections (which was fine), then run collections.UserList which returns same error.\nLooking at documentation for Python 2.7.18, collections does not yet have UserList, but it does from 3.0.\nHave realised mistake - that statistics on conda/PyPi is an import to allow it to work with 2.7, but actually, statistics is a built-in python module that was introduced in Python 3.4.\nAs such, deleted environment and removed statistics from the requirements, and just set requirement of Python 3.9 (as tried before) and built using mamba.\nEnvironment prior:\nname: shoaib2022\nchannels:\n  - defaults\ndependencies:\n  - ipykernel=4.10.0\n  - matplotlib=2.2.3\n  - numpy=1.16.6\n  - pathlib=1.0.1\n  - pip=19.3.1\n  - python=2.7\n  - statistics=1.0.3.5\n  - xlsxwriter=1.3.7\n  - xlwt=1.3.0\n  - pip:\n    - salabim==20.0.4\nEnvironment tried now:\nname: shoaib2022\nchannels:\n  - defaults\ndependencies:\n  - ipykernel\n  - matplotlib\n  - numpy\n  - pathlib\n  - pip\n  - python=3.9\n  - xlsxwriter\n  - xlwt\n  - pip:\n    - salabim\nRun:\nconda deactivate\nconda remove -n shoaib2022 --all\nmamba env create -f environment.yml\nconda activate shoaib2022\nThis quickly installed, and updated environment file with the versions it used:\nname: shoaib2022\nchannels:\n  - defaults\ndependencies:\n  - ipykernel=6.28.0\n  - matplotlib=3.8.4\n  - numpy=1.26.4\n  - pathlib=1.0.1\n  - pip=24.0\n  - python=3.9.19\n  - xlsxwriter=3.1.1\n  - xlwt=1.3.0\n  - pip:\n    - salabim==24.0.6\nCan see that several of these are more recent that would have been possible for the paper. But trying import of salabim now works. Decided to try running the script with this environment, just to see if it can work.\nModuleNotFoundError: No module named 'greenlet'\nCan see this was suggested in the salabim documentation. Add greenlet to environment and remade environment with mamba env update -f environment.yml. This add greenlet==3.0.3. Then re-run PHC.py. Got:\nTraceback (most recent call last):\n  File \"/home/amy/Documents/stars/stars-reproduce-shoaib-2022/reproduction/PHC.py\", line 1300, in &lt;module&gt;\n    main()\n  File \"/home/amy/Documents/stars/stars-reproduce-shoaib-2022/reproduction/PHC.py\", line 932, in main\n    Main(name='')\n  File \"/home/amy/mambaforge/envs/shoaib2022/lib/python3.9/site-packages/salabim/salabim.py\", line 7131, in __init__\n    raise ValueError(\nValueError: process may not be a generator (contain yield statements.)\nMaybe this a non yieldless model. In that case:\n- add sim.yieldless(False) or\n- remove all yields or\n- run salabim_unyield.py"
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#continued-and-got-config1-table6-results-confirmed-match",
    "href": "logbook/posts/2024_06_21/index.html#continued-and-got-config1-table6-results-confirmed-match",
    "title": "Day 2",
    "section": "13.17-15.07: Continued and got config1 table6 results (confirmed match)",
    "text": "13.17-15.07: Continued and got config1 table6 results (confirmed match)\nSuspicious my error could be because I’m used versions that are more recent than I know possible. Hence, delete environment and this time rebuild as specified at start but without statistics, but with the new ones I know I need, with versions based on their release history. Exception was ipykernel, as that was something I’ve added to run notebooks, and not something the original study required.\nname: shoaib2022\nchannels:\n  - defaults\ndependencies:\n  - ipykernel\n  - matplotlib=3.3.4\n  - numpy=1.20.1\n  - pathlib=1.0.1\n  - pip=21.0.1\n  - python=3.9.19\n  - xlsxwriter=1.3.7\n  - xlwt=1.3.0\n  - pip:\n    - greenlet==1.0.0\n    - salabim==21.0.2\nThis built fine! So probably would’ve worked to begin with without statistics. Then ran PHC.py, and it started running fine, outputting No of replications done 0, No of replications done 1…\nEnsure is set up with correct parameters. Configuration 1 is (from Table 3 and 6):\n\n2 doctors: doc_cap = 2\n4 nurses: staff_nurse_cap = 3, NCD_nurse_cap = 1\n130 OPD cases, so OPD inter-arrival time 4: OPD_iat = 4\n0.5 IPD cases, so IPD inter-arrival time 2880: IPD_iat = 2880\n1 childbirth, so childbirth inter-arrival time 1440: delivery_iat = 1440\n1 ANC (patients), so ANC inter-arrival time 1440: ANC_iat = 1440\n6 inpatient beds: bed = sim.Resource(\"Bed\", capacity=6)\n1 labour room: delivery_bed = sim.Resource(\"Del bed\", capacity = 1)\n100 replications: replication = 10\n365 days: days = 365\nWarm-up 180 days: warm_up = 180*24*60\n\nExcept for number of replications, all match up to configuration 1.\nProduced Outputs.xlsx in main folder, which moved manually to reproduction/, and copied to logbook folder to display below. This ran ten replications, with results in each column.\n\nimport xlrd\nimport pandas as pd\n\nmodel_path = 'Outputs.xls'\n\nbook = xlrd.open_workbook(model_path)\nresult = pd.read_excel(book, header=None, index_col=0)\nresult\n\n\n\n\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n0\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOPD patients\n32836.000000\n33066.000000\n33023.000000\n32870.000000\n33240.000000\n33232.000000\n33216.000000\n33368.000000\n33314.000000\n33171.000000\n\n\nIPD patients\n174.000000\n166.000000\n171.000000\n177.000000\n198.000000\n194.000000\n206.000000\n178.000000\n198.000000\n178.000000\n\n\nANC patients\n368.000000\n362.000000\n386.000000\n380.000000\n388.000000\n381.000000\n372.000000\n370.000000\n350.000000\n355.000000\n\n\nDel patients\n384.000000\n367.000000\n369.000000\n361.000000\n309.000000\n360.000000\n359.000000\n397.000000\n385.000000\n339.000000\n\n\nOPD Q wt\n0.006038\n0.008066\n0.006059\n0.006793\n0.005244\n0.010225\n0.007012\n0.016915\n0.008484\n0.018205\n\n\nPharmacy Q wt\n1.047611\n1.019909\n1.011980\n1.016690\n1.006467\n1.032219\n1.020334\n1.017687\n1.017410\n1.003815\n\n\nLab Q wt\n2.063080\n2.096727\n2.121108\n1.958464\n2.096112\n2.160190\n2.039157\n2.069498\n2.135470\n2.139755\n\n\ndoc occ\n0.269761\n0.271455\n0.265695\n0.271491\n0.266211\n0.269985\n0.269385\n0.274394\n0.270916\n0.264823\n\n\nLab patient list\n34553.000000\n68973.000000\n103851.000000\n137618.000000\n172163.000000\n206714.000000\n241073.000000\n275273.000000\n309924.000000\n344492.000000\n\n\nOPD q len\n0.005855\n0.009359\n0.004993\n0.007724\n0.005061\n0.011423\n0.005998\n0.010305\n0.010064\n0.017429\n\n\nipd occ\n0.100000\n0.100000\n0.100000\n0.100000\n0.090000\n0.100000\n0.090000\n0.100000\n0.100000\n0.100000\n\n\nopd q len\n0.000531\n0.000713\n0.000535\n0.000598\n0.000462\n0.000909\n0.000619\n0.001494\n0.000751\n0.001609\n\n\npharmacy q len\n0.091809\n0.089833\n0.089091\n0.089266\n0.088519\n0.091496\n0.089756\n0.089564\n0.089736\n0.088452\n\n\nlab q len\n0.093966\n0.095058\n0.097672\n0.087332\n0.095604\n0.098494\n0.092430\n0.093381\n0.097421\n0.097366\n\n\nNCD occ\n0.856243\n0.876655\n0.868920\n0.862815\n0.875444\n0.864627\n0.873573\n0.882904\n0.885179\n0.851488\n\n\nlab occ\n0.559366\n0.552778\n0.566939\n0.550767\n0.558711\n0.559475\n0.554049\n0.557318\n0.562513\n0.553164\n\n\npharm occ\n0.637989\n0.643297\n0.639525\n0.638504\n0.644518\n0.642726\n0.645787\n0.647810\n0.647879\n0.641500\n\n\nstaff nurse occ\n0.328762\n0.322683\n0.321956\n0.321020\n0.305951\n0.322970\n0.323056\n0.335735\n0.331135\n0.312820\n\n\ndel occ\n0.280000\n0.290000\n0.300000\n0.290000\n0.260000\n0.290000\n0.280000\n0.300000\n0.300000\n0.280000\n\n\ndel referred\n58.000000\n53.000000\n56.000000\n54.000000\n44.000000\n55.000000\n55.000000\n62.000000\n72.000000\n47.000000\n\n\nNCD occ\n0.856243\n0.876655\n0.868920\n0.862815\n0.875444\n0.864627\n0.873573\n0.882904\n0.885179\n0.851488\n\n\nipd bed occ\n0.101028\n0.091502\n0.097690\n0.092269\n0.082897\n0.094390\n0.091500\n0.098772\n0.092360\n0.090019\n\n\n\n\n\n\n\nAdd xlrd and pandas to environment (quarto and reproduction) so can import the .xls files produced and process them.\nProcessed this in reproduce.ipynb so can match up results to Table 6 (as use different label names), and calculate proportion of childbirth referred.\nConfirmed that values all matched up with only apx. 1% difference at most, which is great!"
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#second-results-spreadsheet",
    "href": "logbook/posts/2024_06_21/index.html#second-results-spreadsheet",
    "title": "Day 2",
    "section": "15.23-16.17: Second results spreadsheet",
    "text": "15.23-16.17: Second results spreadsheet\nThere is REPLICATION = xlsxwriter.Workbook(\"Config_3(2).xlsx\") with results that I didn’t get. Tried uncommenting REPLICATION.close() and reran PHC.py.\nAlso, changed save location of the output files, so they go into reproduction/outputs/ rather than main folder, by modifying PHC.py.\nIn reproduction.ipynb, compared results from that to the processed Outputs.xls. To import .xlsx file using pd.read_excel, had to add openpyxl to environment.\n\ncompare = pd.read_csv('t6_mean_compare.csv')\ncompare\n\n\n\n\n\n\n\n\nt6_outcome\nsimple_outcome\nfull_outcome\nt6_result\nsimple_result\nfull_result\n\n\n\n\n0\nDoctor utilisation\ndoc occ\nDoctor Occupancy\n0.268\n0.269412\n0.269358\n\n\n1\nNCD Nurse utilisation\nNCD occ\nNCD Nurse Occupancy\n0.865\n0.869785\n0.860000\n\n\n2\nStaff nurse utilisation\nstaff nurse occ\nStaff nurse Occupancy\n0.323\n0.322609\n0.330000\n\n\n3\nPharmacist utilisation\npharm occ\nPharmacist Occupancy\n0.643\n0.642954\n0.642419\n\n\n4\nLab utilisation\nlab occ\nLab Occupancy\n0.559\n0.557508\n0.680000\n\n\n5\nInpatient bed utilisation\nipd bed occ\nBed occupancy\n0.093\n0.093243\n0.090000\n\n\n6\nLabour bed utilisation\ndel occ\nNaN\n0.283\n0.287000\nNaN\n\n\n7\nMean length of OPD queue (number of patients)\nOPD q len\nMean length of OPD queue\n0.000\n0.008821\n0.000900\n\n\n8\nOPD queue waiting time (minutes)\nOPD Q wt\nOPD queue waiting time\n0.009\n0.009304\n0.009700\n\n\n9\nMean length of pharmacy queue (number of patie...\npharmacy q len\nMean length of pharmacy queue\n0.090\n0.089752\n0.090000\n\n\n10\nPharmacy queue waiting time (minutes)\nPharmacy Q wt\nPharmacy queue waiting time\n1.025\n1.019412\n1.030000\n\n\n11\nMean length of Lab queue (number of patients)\nlab q len\nMean length of Lab queue\n0.094\n0.094872\n0.100000\n\n\n12\nLab queue waiting time (minutes)\nLab Q wt\nLab queue waiting time\n2.084\n2.087956\n2.080000\n\n\n13\nFraction of childbirth cases referred\nprop_del_referred\nNaN\n0.156\n0.153168\nNaN\n\n\n\n\n\n\n\nThis had similar results but observations:\n\nDifferent labels again\nAlso does not have fraction of childbirth cases referred\nCan’t spot labour bed utilisation in the larger results table\n\nThe results are not an exact match but all are likely due to rounding differences. As the outputs one was processed additionally using spreadsheet with replication results, feel its better to use the full results spreadsheet they create, as that works with the raw results (and not potentially rounded results in the spreadsheet).\nMatch:\n\ndoctor utilisation\npharmacist utilisation\n\nDon’t match:\n\nncd nurse utilisation (rounding?)\nstaff nurse utilisation (rounding?)\nlab utilisation (rounding?)\nbed occupancy (rounding?)\nmean OPD queue length (rounding as simple results using replication spreadsheet which might have rounding)\nOPD queue waiting times (rounding?)\nmean pharmacy queue length (rounding?)\npharacy queue waiting tim (rounding?)\nlab queue waiting time (rounding?)\n\nHowever, that doesn’t have the standard deviation for all the results included - and its missing labour bed utilisation and fraction of childbirth cases. Also, the full result is potentially more rounded than the reported, and as it was commented out in the .py file originally, that lends me to suspect that results could likely be based on the replication spreadsheet results.\nDecision: Use replication spreadsheet results."
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#setting-parameter-values-from-notebook",
    "href": "logbook/posts/2024_06_21/index.html#setting-parameter-values-from-notebook",
    "title": "Day 2",
    "section": "16.22-16.48: Setting parameter values from notebook",
    "text": "16.22-16.48: Setting parameter values from notebook\nIn order to run the different scenarios without needing to change the PHC.py itself each time, worked to modify the function main() so that the parameters provided to that function are inputs.\nThen ran the model from reproduce.ipynb."
  },
  {
    "objectID": "logbook/posts/2024_06_21/index.html#timings",
    "href": "logbook/posts/2024_06_21/index.html#timings",
    "title": "Day 2",
    "section": "Timings",
    "text": "Timings\n\nimport sys\nsys.path.append('../')\nfrom timings import calculate_times\n\n# Minutes used prior to today\nused_to_date = 239\n\n# Times from today\ntimes = [\n    ('10.02', '10.16'),\n    ('10.23', '10.30'),\n    ('10.31', '10.47'),\n    ('11.00', '11.01'),\n    ('11.03', '11.04'),\n    ('11.12', '11.35'),\n    ('11.51', '11.57'),\n    ('12.03', '12.37'),\n    ('13.17', '15.07'),\n    ('15.23', '16.17'),\n    ('16.22', '16.48')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 292m, or 4h 52m\nTotal used to date: 531m, or 8h 51m\nTime remaining: 1869m, or 31h 9m\nUsed 22.1% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_07_01/index.html",
    "href": "logbook/posts/2024_07_01/index.html",
    "title": "Day 8",
    "section": "",
    "text": "Note\n\n\n\nReflections, summary report and research compendium."
  },
  {
    "objectID": "logbook/posts/2024_07_01/index.html#reflections",
    "href": "logbook/posts/2024_07_01/index.html#reflections",
    "title": "Day 8",
    "section": "Reflections",
    "text": "Reflections\nCreated reflections page with full list of troubleshooting steps, and a summarised list of barriers and facilitators to the reproduction, to learn from."
  },
  {
    "objectID": "logbook/posts/2024_07_01/index.html#summary-report",
    "href": "logbook/posts/2024_07_01/index.html#summary-report",
    "title": "Day 8",
    "section": "Summary report",
    "text": "Summary report\nFinished up summary report."
  },
  {
    "objectID": "logbook/posts/2024_07_01/index.html#research-compendium",
    "href": "logbook/posts/2024_07_01/index.html#research-compendium",
    "title": "Day 8",
    "section": "Research compendium",
    "text": "Research compendium\nMaking changes to the repository (as specified in the protocol) so it can serve as a “research compendium”.\n\nMoved all python files into a scripts/ folder. Amended paths in these scripts, e.g. the location of outputs/ to ../outputs for when importing or saving results.\nAdd seed so we get consistent results between runs\n\nBy default, Salabim sets random seed 1234567, but the study authors had set sim.Environment(trace=False, random_seed='', time_unit='minutes'), which we know from the documentation means no reseeding.\nAs we want to enable reproducible results between runs (for writing up the results obtained, and for testing), modified PHC.py to set seed to 42 in environment.\nI ran one of the notebooks twice and observed no change in the results between those runs, confirming this had been set up easily and successfully.\nNote: Set suggestion to implement seeds during reproduction stage in the protocol, although this is focused on being able to compare your results to the original, and needing a seed if it varies too much to do so. In this case, since the number of replications was sufficient to observe minimal variation, I did not implement at that stage, and instead add them now.\nHowever, then realised I had forgot to change the seed between replications, and so was just getting the sample result for every replication. As such, modified seed so it increments with each replication (as replications are run in PHC.py using a for loop). Re-ran notebook twice and confirmed there was no change.\n\nChanged Table 6 to run to 10 replications, alike the other outcomes, as this is simpler for reproduction and as we know that there are relatively minimal differences between 10 and 100 replications (as you can see from commit 59f6ada).\nRun notebooks using single command\n\nTried running nbconvert from command line or Makefile, but fails to use environment, returning ModuleNotFoundError: No module named 'salabim'\nTried downgrading nbconvert but issue persists\nTried setting jupyter interpreter in VSCode settings, and that said I needed to install package notebook\nThen, realised I needed to add it as a kernel for jupyter (so it would appear when run jupyter kernelspec list). Did so by running source activate shoaib2022, python -m ipykernel install --user --name shoaib2022, then source deactivate\nSet this up in a bash script (to add the kernel each time (otherwise it can’t seem to find it, despite being in the kernelspec list), and to then execute the notebooks using nbconvert)\n\nTidy up notebooks\n\nAdd the result being reproduced to the start of each notebook, so it is easier to reference to it\nRe-ran all using the bash script, to ensure all have been run with the seeds\n\nCreate tests\n\nInitially explored exporting each dict_list from the reproduction notebooks using pickle (with open('saved_dictionary.pkl', 'wb') as f: pickle.dump(dictionary, f)). However, decided this was then contrary to the principles of testing, where want to be defining each parameter used in the test, so instead set this up manually for each configuration."
  },
  {
    "objectID": "logbook/posts/2024_07_03/index.html",
    "href": "logbook/posts/2024_07_03/index.html",
    "title": "Day 9",
    "section": "",
    "text": "ADD TIMINGS"
  },
  {
    "objectID": "logbook/posts/2024_07_03/index.html#discussion-with-x-about-uncertainties-and-unmet-criteria-from-the-evaluation",
    "href": "logbook/posts/2024_07_03/index.html#discussion-with-x-about-uncertainties-and-unmet-criteria-from-the-evaluation",
    "title": "Day 9",
    "section": "Discussion with X about uncertainties and unmet criteria from the evaluation",
    "text": "Discussion with X about uncertainties and unmet criteria from the evaluation\n\nX-X: Badges\n\nUncertain\n\n\n\n\n\n\n\n\nItem\nMy comments\nDiscussion\n\n\n\n\nIncludes an open license\nCouldn’t remember if we’d agreed that a license added upon our request should be marked as a condition met or not. Tentatively marked as ‘1’.\n\n\n\nComplete set of materials shared (as would be needed to fully reproduce article)\nUncertain on this, as I had to modify the script alot to get results (i.e. writing scenario logic). However, arguably, I did have all the information I would need to do that? Tentatively marked as ‘1’.\n\n\n\nArtefacts are well structured/organised (e.g. to the extent that reuse and repurposing is facilitated, adhering to norms and standards of research community)\nDoes use object-oriented programming (which is great), but parameters are hard coded and uses global variables. Tentatively marked as ‘0’.\n\n\n\n\n\n\nUnmet\nTBC\n\n\n\nX-X: STARS\n\nUncertain\n\n\n\n\n\n\n\n\nItem\nMy comments\nDiscussion\n\n\n\n\nOpen license. Free and open-source software (FOSS) license (e.g. MIT, GNU Public License (GPL))\nAs for badges\n\n\n\nORCID. ORCID for each study author\nHave marked as not met, as there are no ORCID in the repository, although Varun Ramamohan does have ORCID ID with publication in SIMULATION.\n\n\n\n\n\n\nUnmet\nTBC\n\n\n\nX-X: Reporting\n\nUncertain\n\n\n\n\n\n\n\n\nItem\nMy comments\nDiscussion\n\n\n\n\nSTRESS-DES 1.2 Model outputs. Define all quantitative performance measures that are reported, using equations where necessary. Specify how and when they are calculated during the model run along with how any measures of error such as confidence intervals are calculated.\nIs what I have quoted sufficient for rating of “Partially”?\n\n\n\nISPOR-SDM 12 Is cross validation performed and reported…comparison across similar modeling studies which deal with the same decision problem was undertaken.\nIs my conclusion reasonable?\n\n\n\nISPOR-SDM 13 Is external validation performed and reported?…the modeler(s) examined how well the model’s results match the empirical data of an actual event modeled.\nThere’s alot of validation work done, but not sure I can spot this, or any justification against it?\n\n\n\n\n\n\nUnmet\nTBC"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html",
    "href": "logbook/posts/2024_06_25/index.html",
    "title": "Day 4",
    "section": "",
    "text": "Note\n\n\n\nTable 6 100 rep, and created Figure 2A-D + 3A-D. Total time used: 16h 52m (42.2%)"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#run-100-replications-for-table-6",
    "href": "logbook/posts/2024_06_25/index.html#run-100-replications-for-table-6",
    "title": "Day 4",
    "section": "6.55-6.57: Run 100 replications for Table 6",
    "text": "6.55-6.57: Run 100 replications for Table 6\nStart running with 100 replications. Taking too long (ran through 259 replications in 110 minutes), so only got through 2 full configurations before needing to shut it down to go to work."
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#used-parallel-processing-when-running-the-replications",
    "href": "logbook/posts/2024_06_25/index.html#used-parallel-processing-when-running-the-replications",
    "title": "Day 4",
    "section": "9.26-9.50, 10.50-10.51: Used parallel processing when running the replications",
    "text": "9.26-9.50, 10.50-10.51: Used parallel processing when running the replications\nSet up parallel processing in reproduce_tab6.ipynb to run the 4 sets of 100 replications. It took 61 minutes to run (excluded from timing). Once complete, I looked over the table and was satisified that the mean and SD values were close enough to the original, and considered it now completely successfully reproduced (at timestamp: 10.51). I disregarded some high percent change that were simply due to comparison of numbers very close to zero, and the difference was actually very small.\nEmailed to Tom and Alison to share second opinion.\nTiming for when Table 6 is completed (i.e. as of 10.51):\n\nimport sys\nsys.path.append('../')\nfrom timings import calculate_times\n\n# Minutes used prior to today\nused_to_date = 829\n\n# Times from today\ntimes = [\n    ('6.55', '6.57'),\n    ('9.26', '9.50'),\n    ('10.50', '10.51')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 27m, or 0h 27m\nTotal used to date: 856m, or 14h 16m\nTime remaining: 1544m, or 25h 44m\nUsed 35.7% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#saved-output-from-processed-replications-and-confirmation-from-tom-and-alison",
    "href": "logbook/posts/2024_06_25/index.html#saved-output-from-processed-replications-and-confirmation-from-tom-and-alison",
    "title": "Day 4",
    "section": "11.04-11.17: Saved output from processed replications, and confirmation from Tom and Alison",
    "text": "11.04-11.17: Saved output from processed replications, and confirmation from Tom and Alison\nEdited notebook so model is not re-run each time (due to long run time), and then saved the processed results to a csv file.\nBoth Tom and Alison responded to confirm they were happy this was reproduced.\nRe-ran % change calculations with rounded values. As before, observe that we are sometimes comparing very small numbers - so e.g. mean of 0.011 v.s. 0.012 comes out as 9% change. It also sometimes finds large differences for small SD values (e.g. 1360% change), when actually, I’m not too concerned by the difference in the grand scheme of things."
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#create-figure-2b",
    "href": "logbook/posts/2024_06_25/index.html#create-figure-2b",
    "title": "Day 4",
    "section": "11.30-11.50: Create Figure 2B",
    "text": "11.30-11.50: Create Figure 2B\nImported and processed data from the arrival number replications, and produced Figure 2B. Happy that this is succesfully reproduced at timepoint 11.50. In order to declare this reproduced, I feel I do not require to run the same number of replications (100), as understand this would have no meaningful impact on result being plot (mean), and am happy with consistency to original at 10 replications.\n\n# Minutes used prior to this figure\nused_to_date = 856\n\n# Times from today\ntimes = [\n    ('11.04', '11.17'),\n    ('11.30', '11.50')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 33m, or 0h 33m\nTotal used to date: 889m, or 14h 49m\nTime remaining: 1511m, or 25h 11m\nUsed 37.0% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#create-figure-2c",
    "href": "logbook/posts/2024_06_25/index.html#create-figure-2c",
    "title": "Day 4",
    "section": "11.51-12.08, 12.13-12.17: Create Figure 2C",
    "text": "11.51-12.08, 12.13-12.17: Create Figure 2C\nUsing OPD Q wt (which matched up to OPD queue waiting time for Table 6), results look rather different. They only go up to 0.01, whilst in Figure 2C, results go from under 1 up to just under 7. That is closer to the waiting time in the benchmark model, implying these results are obtained with those doctor numbers.\n\n\n\nIncorrect reproduction of Fig2c\n\n\nWhen run with the serv5 appointment times, the results match up with the paper. Feel this has been succesfully reproduced at time 12.17.\n\n\n\nSuccessful reproduction of Fig2c\n\n\nObservation: Reproduced figure, but not from how I understood it had been set up from the text (unless that was my misunderstanding - which is quite possible!).\n\n# Minutes used prior to this figure\nused_to_date = 889\n\n# Times from today\ntimes = [\n    ('11.51', '12.08'),\n    ('12.13', '12.17')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 21m, or 0h 21m\nTotal used to date: 910m, or 15h 10m\nTime remaining: 1490m, or 24h 50m\nUsed 37.9% of 40 hours max\n\n\nEmailed to Tom and Alison - and both agreed that Fig2B and 2C are succesfully reproduced.\n\n\n\n\n\n\nReflections from Tom from these reproductions\n\n\n\nIncluding code to (re)generate figures\nIncluding tick marks on axes so that people can easily read across or judge whether a bar goes above a Y value or not"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#add-grid-lines-to-figures",
    "href": "logbook/posts/2024_06_25/index.html#add-grid-lines-to-figures",
    "title": "Day 4",
    "section": "13.20-13.26: Add grid lines to figures",
    "text": "13.20-13.26: Add grid lines to figures\nAdd horizontal grid lines to Figures 2B and 2C, to improve readability."
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#working-on-figure-2a",
    "href": "logbook/posts/2024_06_25/index.html#working-on-figure-2a",
    "title": "Day 4",
    "section": "13.29-13.44, 13.47-14.04, 14.13-14.19, 14.24-14.41: Working on Figure 2A",
    "text": "13.29-13.44, 13.47-14.04, 14.13-14.19, 14.24-14.41: Working on Figure 2A\nThe text and figures do not provide the boundary used when sampling the consultation time. From previous implementations we know:\n\nMean 0.87 uses boundaries 0.3/0.5\nMean 5 uses boundary 2\n\nHowever, we do not know for mean 2.5. We might reasonably estimate that it would be around 1, but this is a guess and not substantiated by evidence.\nRan all nine combinations set up with parallel processing but only 10 replications, run time 3m 22s.\nCreated Figure 2A, and - despite guessing for the 2.5 (0.5) boundaries - I feel the bar heights are sufficiently similar to mark this as successfully reproduced at 14.41.\n\n# Minutes used prior to this figure\nused_to_date = 910\n\n# Times from today\ntimes = [\n    ('13.20', '13.26'),\n    ('13.29', '13.44'),\n    ('13.47', '14.04'),\n    ('14.13', '14.19'),\n    ('14.24', '14.41')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 61m, or 1h 1m\nTotal used to date: 971m, or 16h 11m\nTime remaining: 1429m, or 23h 49m\nUsed 40.5% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#creating-figure-2d",
    "href": "logbook/posts/2024_06_25/index.html#creating-figure-2d",
    "title": "Day 4",
    "section": "14.44-14.54: Creating Figure 2D",
    "text": "14.44-14.54: Creating Figure 2D\nProduced Figure 2D using same data and similar code to Figure 2A.\nAgain, feel sufficiently similar to mark as successfully reproduced at 14.54.\n\n# Minutes used prior to this figure\nused_to_date = 971\n\n# Times from today\ntimes = [\n    ('14.44', '14.54')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 10m, or 0h 10m\nTotal used to date: 981m, or 16h 21m\nTime remaining: 1419m, or 23h 39m\nUsed 40.9% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#creating-figure-3a",
    "href": "logbook/posts/2024_06_25/index.html#creating-figure-3a",
    "title": "Day 4",
    "section": "15.10-15.21, 15.24-15.34: Creating Figure 3A",
    "text": "15.10-15.21, 15.24-15.34: Creating Figure 3A\nBased scenarios on the labels for Figure 3. These were varying:\n\nNumber of inpatient/childbirth/ANC cases per day:\n\n1 = IAT 1440 (e.g. like IPD cases for config1)\n2 = IAT 720 (as 2880 is 0.5 per day and 1440 is 1 per day)\n\nAverage service time for outpatients:\n\n0.87 (0.21) (same as config1)\n2.5 (0.5) (as in figure 2)\n\n\nSet up and ran 10 replications with parallel processing. Took 3 minutes.\nAdapted code created for Figure 2A/D to make Figure 3A. Successfully reproduced at 15.34.\n\n# Minutes used prior to this figure\nused_to_date = 981\n\n# Times from today\ntimes = [\n    ('15.10', '15.21'),\n    ('15.24', '15.34')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 21m, or 0h 21m\nTotal used to date: 1002m, or 16h 42m\nTime remaining: 1398m, or 23h 18m\nUsed 41.8% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#creating-figure-3b",
    "href": "logbook/posts/2024_06_25/index.html#creating-figure-3b",
    "title": "Day 4",
    "section": "15.45-15.51: Creating Figure 3B",
    "text": "15.45-15.51: Creating Figure 3B\nSuccessfully reproduced at 15.51.\n\n# Minutes used prior to this figure\nused_to_date = 1002\n\n# Times from today\ntimes = [\n    ('15.45', '15.51')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 6m, or 0h 6m\nTotal used to date: 1008m, or 16h 48m\nTime remaining: 1392m, or 23h 12m\nUsed 42.0% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#creating-figure-3c",
    "href": "logbook/posts/2024_06_25/index.html#creating-figure-3c",
    "title": "Day 4",
    "section": "15.53-15.54: Creating Figure 3C",
    "text": "15.53-15.54: Creating Figure 3C\nSuccessfully reproduced at 15.54.\n\n# Minutes used prior to this figure\nused_to_date = 1008\n\n# Times from today\ntimes = [\n    ('15.53', '15.54')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 1m, or 0h 1m\nTotal used to date: 1009m, or 16h 49m\nTime remaining: 1391m, or 23h 11m\nUsed 42.0% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#creating-figure-3d",
    "href": "logbook/posts/2024_06_25/index.html#creating-figure-3d",
    "title": "Day 4",
    "section": "15.55-15.58: Creating Figure 3D",
    "text": "15.55-15.58: Creating Figure 3D\nSuccessfully reproduced at 15.58.\n\n# Minutes used prior to this figure\nused_to_date = 1009\n\n# Times from today\ntimes = [\n    ('15.55', '15.58')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 3m, or 0h 3m\nTotal used to date: 1012m, or 16h 52m\nTime remaining: 1388m, or 23h 8m\nUsed 42.2% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#consensus",
    "href": "logbook/posts/2024_06_25/index.html#consensus",
    "title": "Day 4",
    "section": "Consensus",
    "text": "Consensus\nEmailed to Tom and Alison, and both replied to confirm that 2A+D and 3A-D all look successfully reproduced."
  },
  {
    "objectID": "logbook/posts/2024_06_25/index.html#timings",
    "href": "logbook/posts/2024_06_25/index.html#timings",
    "title": "Day 4",
    "section": "Timings",
    "text": "Timings\n\n# Minutes used prior to today\nused_to_date = 829\n\n# Times from today\ntimes = [\n    ('6.55', '6.57'),\n    ('9.26', '9.50'),\n    ('10.50', '10.51'),\n    ('11.04', '11.17'),\n    ('11.30', '11.50'),\n    ('11.51', '12.08'),\n    ('12.13', '12.17'),\n    ('13.20', '13.26'),\n    ('13.29', '13.44'),\n    ('13.47', '14.04'),\n    ('14.13', '14.19'),\n    ('14.24', '14.41'),\n    ('14.44', '14.54'),\n    ('15.10', '15.21'),\n    ('15.24', '15.34'),\n    ('15.45', '15.51'),\n    ('15.53', '15.54'),\n    ('15.55', '15.58')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 183m, or 3h 3m\nTotal used to date: 1012m, or 16h 52m\nTime remaining: 1388m, or 23h 8m\nUsed 42.2% of 40 hours max"
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html",
    "href": "logbook/posts/2024_06_24/index.html",
    "title": "Day 3",
    "section": "",
    "text": "Note\n\n\n\nSuccesful reproduction of Table 6, and start on figure 2. Total time used: 13h 49m (34.5%)\nAny references to the original study are to Shoaib and Ramamohan (2021) which is licensed under CC BY-NC-ND."
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#different-configurations",
    "href": "logbook/posts/2024_06_24/index.html#different-configurations",
    "title": "Day 3",
    "section": "9.20-10.03, 10.11-10.22, 10.31-11.43: Different configurations",
    "text": "9.20-10.03, 10.11-10.22, 10.31-11.43: Different configurations\nGot parameters for each configuration from Table 3. Some discrepancies:\n\nConfiguration 4 (benchmark) is stated as 4 nurses in the table, but in the text, is described as having 5 nurses (1 NCD and 4 staff) - although the staff nurses are described as working alone in consecutive 8 hour shifts, which would work out to 3 nurses, so it is assumed that the standard configuration of 3 staff nurse and 1 NCD nurse (and so 4 nurses overall, as in the table) is used.\nTable 3 caption describes all configurations as having 6 inpatient and 1 labour bed - whilst Table 6 describes configuration 3 as having 0 labour room beds. However, as there is no labour arrivals, this has no impact on results, so just left as default 1 bed as per Table 3.\n\nConfiguration 3 has no arrivals for childbirth or ANC, and so Table 3 states their inter-arrival time as NaN. However, it was unclear how to set this up in the model code.\nTrying to figure how best to re-run the PHC.py script given it is set up with global variables. Based on this StackOverflow post, tried out creating all global parameters using a single class, so that - if you want to re-run and reset all global parameters - you just make a new instance of this class. Like this -\nDEFAULT_OPD_IAT = 4\nDEFAULT_DELIVERY_IAT = 1440\nDEFAULT_IPD_IAT = 2880\nDEFAULT_ANC_IAT = 1440\n\n\nclass ModelState:\n    \"\"\"\n    Class containing all global parameters (so that, if you wish to reset\n    values, you can do so easily by creating a new instance of the ModelState)\n    \"\"\"\n    def __init__(self,\n                 OPD_iat=DEFAULT_OPD_IAT,\n                 delivery_iat=DEFAULT_DELIVERY_IAT,\n                 IPD_iat=DEFAULT_IPD_IAT,\n                 ANC_iat=DEFAULT_ANC_IAT):\n        \"\"\"\n        Parameters for the simulation model.\n\n        Parameters:\n        -----------\n        OPD_iat : int\n            Inter-arrival time for OPD patients\n\n        delivery_iat : int\n        `   Inter-arrival time for labour patients\n\n        IPD_iat : int\n            Inter-arrival time for IPD patients\n\n        ANC_iat : int\n            Inter-arrival time for ANC patients\n        \"\"\"\n        self.OPD_iat = OPD_iat\n        self.delivery_iat = delivery_iat\n        self.IPD_iat = IPD_iat\n        self.ANC_iat = ANC_iat\n\n\nc1_state = ModelState()\nc1_state.__dict__\n\nc2_state = ModelState()\nc2_state.OPD_iat = 9\nc2_state.__dict__\n\nc3_state = ModelState(OPD_iat=5)\nc3_state.__dict__\nBut then reflected that this was changing the code alot, and I wasn’t 100% confident on whether it would definitely deal with all the global variables correctly (as they are repeatedly defined throughout the script).\nChat with Tom and he suggested:\n\ndir() should show global variables - but these just appear to be for notebook, so hopefully no overlap, but to check -\nReturn the value of the global variables after running the model. Then run the model again, and check the values are the same\nHe also suggested, for when there are no arrivals for two patient types, the simplest way to set this up is to set the inter-arrival time to something really really large (e.g. 10,000,000 * run time)\n\nI created a function to return global values:\ndef return_globals():\n    \"\"\"\n    Return global variables and their values from workspace. Used for\n    verifying the environment is as expected.\n\n    Returns:\n    -------\n    globals() : dict\n        Dictionary of global variables and their values\n    \"\"\"\n    return globals()\nAnd then checked if the output was consistent between different calls of the model, and this returned True, so will assume that running the model in this way is not leading to results interefering with each other between runs. See GitHub commit 16f50f7 for notebook with these results."
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#different-configurations-continued",
    "href": "logbook/posts/2024_06_24/index.html#different-configurations-continued",
    "title": "Day 3",
    "section": "12.00-12.05, 12.17-12.57: Different configurations (continued)",
    "text": "12.00-12.05, 12.17-12.57: Different configurations (continued)\nRan the four different configurations (excluded run time from timings).\nKept setting IAT for ANC higher as was getting an average of 1 arrival (but want to be getting no arrivals), but even with IAT of 999999999999999999999999999999999*365*60*24, was still getting 1 ANC arrival with every run. Tried setting ANC() and Delivery() to comments in PHC.py, and this worked to prevent arrivals, so add True/False inputs to main() for whether these functions are called, instead of setting high IAT.\nFound differences were:\n\nMean OPD queue length was very different for all configuration compared with Table 6.\nLots of the benchmark case results looked very different to Table 6.\n\nSpent a while looking for why this might be, but not yet figured out."
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#problem-solving-benchmark-model",
    "href": "logbook/posts/2024_06_24/index.html#problem-solving-benchmark-model",
    "title": "Day 3",
    "section": "13.55-14.30: Problem-solving benchmark model",
    "text": "13.55-14.30: Problem-solving benchmark model\nTo ensure it is not an error I’ve introduced, I copied the original PHC.py and modified it directly (the only change from config 1 that I have identified from the paper is that the OPD IAT is 3 instead of 4), and to produce both results spreadsheets. See GitHub commit 892cca4. This came out looking the same as my other run (e.g. doctor utilisation around 0.31 instead of 1.14).\nHence, wondered if the issue was in parameterising of model, so looked back over the paper. It is described as differing from the archetypal/generic model in two ways (not just one). I have only changed outpatient load (OPD IAT 4 to 3)\n\n‘Note that this benchmark configuration differs from the archetypal configuration only in the outpatient load and the doctor’s consultation time for outpatients.’ , and had not spotted change in consultation time in the tables.\nThe consultation time for the benchmark model: “we have assumed the consultation time to be normally distributed with a mean of 5 minutes and standard deviation of 1 minute with a lower bound fixed at 2 minutes”\nAs in Table 4, the normal OPD consultation time is normally distribution with mean 0.87 and standard deviation of 0.21\n\nAmended mean and sd, and set consultation boundary as a modifiable parameter (with consult_boundary_1 and 2, as the default boundary provided in the script varied depending on whether it was warm-up or not, between 0.5 and 0.3).\nThis pretty much fixed the issue - the only large difference for the benchmark model is now as for the other configurations: mean OPD queue length.\n\n\n\n\n\n\nReflections\n\n\n\nNot certain if it was intentional for the original model to have two different boundaries before and after warm-up - but does bring a reflection that the duplication of code like that (before and after warm-up) does introduce more possibility of potential mistakes and that, where possible, should try to minimise that duplication."
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#problem-solving-mean-opd-queue-length",
    "href": "logbook/posts/2024_06_24/index.html#problem-solving-mean-opd-queue-length",
    "title": "Day 3",
    "section": "14.36-14.53: Problem-solving mean OPD queue length",
    "text": "14.36-14.53: Problem-solving mean OPD queue length\nChecked example of a result in full .xlsx output for config 1 from a previous commit, but this matched the model output, which itself, was very similar to the paper output.\nHence, instead ran config 4 but enabled full result spreadsheet to be produced. That output 0.833 for Mean length of OPD queue, similar to Table 6’s 0.817 and unlike my previously calculated 6.932062.\nLooking at the replication spreadsheet, I realised there were two OPD q len rows:\n\nOPD q len (with values around 7)\n\nCalculated from OPD_q__list\nThat is created by OPD_q__list.append(np.mean(an_list)), and an_list is delivery patients\n\nopd q len (with values around 0.8)\n\nCalculated from OPD_q_length_list.\nThat is created by OPD_q_length_list.append(waitingline_OPD.length.mean())\n\n\nHence, given the values match, and how it was created, the latter is evidently the appropriate row to use. Amended reproduce.ipynb to use that row, and now results match up, with no concerning deviation."
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#add-sd-to-table-6",
    "href": "logbook/posts/2024_06_24/index.html#add-sd-to-table-6",
    "title": "Day 3",
    "section": "15.34-16.02 : Add SD to Table 6",
    "text": "15.34-16.02 : Add SD to Table 6\nAdd standard deviation. Some percent change seem large as it’s comparing very small number - but actual change between the model and table 6 all are small enough that I feel happy to say this has been successfully reproduced for the mean values.\n\nimport pandas as pd\n\npd.read_csv('table6_10rep.csv')\n\n\n\n\n\n\n\n\nUnnamed: 0\nmodel_outcome\nmodel_t6_c1_old_mean\nmodel_t6_c1_old_sd\nmodel_t6_c2_old_mean\nmodel_t6_c2_old_sd\nmodel_t6_c3_old_mean\nmodel_t6_c3_old_sd\nmodel_t6_c4_old_mean\nmodel_t6_c4_old_sd\nt6_outcome\n\n\n\n\n0\n0\nOPD patients\n33133.600000\n179.979135\n14872.400000\n1.386588e+02\n14933.900000\n53.875267\n44161.600000\n207.882018\nNaN\n\n\n1\n1\nIPD patients\n184.000000\n13.703203\n190.300000\n1.391282e+01\n181.600000\n13.309980\n180.200000\n11.773794\nNaN\n\n\n2\n2\nANC patients\n371.200000\n12.839176\n211.500000\n1.314238e+01\n0.000000\n0.000000\n373.900000\n14.371654\nNaN\n\n\n3\n3\nDel patients\n363.000000\n25.064362\n176.900000\n8.252272e+00\nNaN\nNaN\n363.100000\n16.881614\nNaN\n\n\n4\n4\nOPD Q wt\n0.009304\n0.004588\n0.180556\n2.189756e-02\n0.034672\n0.000787\n7.087377\n0.171371\nOPD queue waiting time (minutes)\n\n\n5\n5\nPharmacy Q wt\n1.019412\n0.012652\n0.240693\n4.652718e-03\n0.231200\n0.003927\n1.277731\n0.025166\nPharmacy queue waiting time (minutes)\n\n\n6\n6\nLab Q wt\n2.087956\n0.059170\n0.605414\n2.874245e-02\n0.570976\n0.014748\n3.170211\n0.061232\nLab queue waiting time (minutes)\n\n\n7\n7\ndoc occ\n0.269412\n0.003003\n0.372110\n2.163915e-03\n0.355399\n0.002388\n1.145836\n0.004580\nDoctor utilisation\n\n\n8\n8\nLab patient list\n189463.400000\n104190.501449\n84293.200000\n4.652751e+04\n86041.800000\n47115.631487\n254249.200000\n139835.319294\nNaN\n\n\n9\n9\nOPD q len\n0.008821\n0.003825\n0.167379\n3.207569e-02\n0.034586\n0.000754\n6.932062\n0.304803\nNaN\n\n\n10\n10\nipd occ\n0.098000\n0.004216\n0.060000\n1.462847e-17\n0.014000\n0.005164\n0.095000\n0.005270\nNaN\n\n\n11\n11\nopd q len\n0.000822\n0.000406\n0.007131\n8.457763e-04\n0.001374\n0.000035\n0.832990\n0.022424\nMean length of OPD queue (number of patients)\n\n\n12\n12\npharmacy q len\n0.089752\n0.001116\n0.009479\n2.278525e-04\n0.009159\n0.000191\n0.149840\n0.003193\nMean length of pharmacy queue (number of patie...\n\n\n13\n13\nlab q len\n0.094872\n0.003335\n0.012381\n6.255212e-04\n0.011342\n0.000386\n0.191373\n0.004532\nMean length of Lab queue (number of patients)\n\n\n14\n14\nNCD occ\n0.869785\n0.011039\n0.469595\n5.111055e-03\n0.470006\n0.006064\n1.231760\n0.022432\nNCD Nurse utilisation\n\n\n15\n15\nlab occ\n0.557508\n0.004960\n0.253362\n6.092231e-03\n0.240857\n0.003743\n0.738856\n0.012791\nLab utilisation\n\n\n16\n16\npharm occ\n0.642954\n0.003603\n0.288769\n3.379442e-03\n0.289968\n0.001035\n0.856621\n0.005442\nPharmacist utilisation\n\n\n17\n17\nstaff nurse occ\n0.322609\n0.008560\n0.242049\n4.190295e-03\n0.160632\n0.001316\n0.321931\n0.006419\nStaff nurse utilisation\n\n\n18\n18\ndel occ\n0.287000\n0.012517\n0.150000\n8.164966e-03\nNaN\nNaN\n0.278000\n0.011353\nLabour bed utilisation\n\n\n19\n19\ndel referred\n55.600000\n7.705698\n16.600000\n3.373096e+00\nNaN\nNaN\n57.300000\n6.074537\nNaN\n\n\n20\n20\nipd bed occ\n0.093243\n0.005137\n0.055268\n2.650480e-03\n0.011464\n0.000896\n0.093002\n0.004686\nInpatient bed utilisation\n\n\n21\n21\nprop_del_referred\n0.152701\n0.013231\n0.093568\n1.741344e-02\nNaN\nNaN\n0.157772\n0.015115\nFraction of childbirth cases referred\n\n\n\n\n\n\n\nWill run 100 replications later, and confirm whether standard deviations are similar - but anticipate to take a while, so will work on something else for remainder of day, as not got time to run them all now.\nAs the long run-time prevents me from checking this now, I will not yet timestamp this as complete."
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#starting-on-figure-2a-d",
    "href": "logbook/posts/2024_06_24/index.html#starting-on-figure-2a-d",
    "title": "Day 3",
    "section": "16.13-17.00: Starting on Figure 2A-D",
    "text": "16.13-17.00: Starting on Figure 2A-D\nFigure 2 presents results from sensitivity analysis of configuration 1.\nIt varies:\n\nNumber of outpatients per day:\n\n170 (same as config 4) = OPD IAT 3\n85\n65\n\nAverage service time for outpatients - mean (SD):\n\n0.87 (0.21) (same as config 1)\n2.5 (0.5)\n5 (1)\n\n\nIt states that “estimation of the outpatient arrival rate for this configuration is described in detail in Section 3.3.1”. Hence, looked back at provided times and patient counts in the Tables…\n\nConfig 1: 130 arrivals in a day and IAT of 4\nConfig 2/3: 60 arrivals in a day and IAT of 9\nConfig 4: 170 arrivals in a day and IAT of 3\n\nIn order to get those times:\n\nprint((60/4)*8.6666666666666666666666666666666)\nprint((60/9)*9)\nprint((60/3)*8.5)\n\n130.0\n60.0\n170.0\n\n\nCan see that, in order to get each of the times, the hours per day vary from 8.5 to 9. As such, it is unclear how I should calculate IAT for 85 and 65 per day, due to this variation. It is assumed that this is likely related to rounding?\nThen looked to section 3.3.1 about this in the paper, Shoaib and Ramamohan (2021):\n\n“The average interarrival times (and consequently the average number of patients) at each configuration were estimated in the following manner. The number of outpatients visiting configuration 1 PHCs (PHCs 1, 5, and 9) range from 80 to 150 patients per day. These include patients visiting for the first time for a given case of illness as well as patients visiting for follow-up consultations on a previous case. Thus we assumed that approximately 125 patients visit on a given day for these PHC configurations, which include 90 first-visit patients, 20% patients on their first follow-up, and 10% visiting for their second follow-up, yield approximately 126 patients. Therefore, the interarrival time of 4 minutes at configuration 1 PHCs corresponds to first-time visits, with follow-up visits scheduled at the same time on any day between the next 3 and 8 days.”\n\nThese values differ from the table - so looking again with these:\n\nConfig 1: 125 or 126 arrivals and IAT 4\nConfig 2/3: 55 arrivals and IAT 9\n\n\nprint((60/4)*8.33333333333333333)\nprint((60/4)*8.4)\nprint((60/9)*8.25)\n\n125.00000000000001\n126.0\n55.0\n\n\nRegarding the number of hours described in the article, this is described as “6 hours per day” for the outpatients - which differs to the 8.25 hours to 9 that align with the provided patient numbers and inter-arrival times.\nAssuming this variation is simply related to rounding the IAT - as if we calculate these values based on there being 8.5 hours per day then round the IAT, we get the same results…\n\n# IAT 3. Arrivals 170\nprint(60/(170/8.5))\n\n# IAT 4. Arrivals 125-130\nprint(60/(125/8.5))\nprint(60/(130/8.5))\n\n# IAT 9. Arrivals 55-60\nprint(60/(55/8.5))\nprint(60/(60/8.5))\n\n3.0\n4.08\n3.923076923076923\n9.272727272727273\n8.5\n\n\nAs such, the inter-arrival times used were calculated as 3, 6 and 8…\n\n# 170, 85 and 65 arrivals\nprint(60/(170/8.5))\nprint(60/(85/8.5))\nprint(60/(65/8.5))\n\n3.0\n6.0\n7.846153846153846"
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#reflections-from-troubleshooting-today",
    "href": "logbook/posts/2024_06_24/index.html#reflections-from-troubleshooting-today",
    "title": "Day 3",
    "section": "Reflections from troubleshooting today",
    "text": "Reflections from troubleshooting today\n\n\n\n\n\n\nChallenges today\n\n\n\nAdapting model to run model programmatically (rather than having to directly change the parameters in the script itself)\nDifficulty identifying parameters of scenarios (when not all captured in a single table, but in combination with article text) (and when not provided in the script).\nTime spent processing results into desired tables and/or figures (when not already created by the script).\nUncertainty on model parameters if not provided and calculation unclear (inter-arrival time)."
  },
  {
    "objectID": "logbook/posts/2024_06_24/index.html#timings",
    "href": "logbook/posts/2024_06_24/index.html#timings",
    "title": "Day 3",
    "section": "Timings",
    "text": "Timings\n\nimport sys\nsys.path.append('../')\nfrom timings import calculate_times\n\n# Minutes used prior to today\nused_to_date = 531\n\n# Times from today\ntimes = [\n    ('9.20', '10.03'),\n    ('10.11', '10.22'),\n    ('10.31', '11.43'),\n    ('12.00', '12.05'),\n    ('12.17', '12.57'),\n    ('13.55', '14.30'),\n    ('14.36', '14.53'),\n    ('15.34', '16.02'),\n    ('16.13', '17.00')]\n\ncalculate_times(used_to_date, times)\n\nTime spent today: 298m, or 4h 58m\nTotal used to date: 829m, or 13h 49m\nTime remaining: 1571m, or 26h 11m\nUsed 34.5% of 40 hours max"
  },
  {
    "objectID": "CONTRIBUTING.html",
    "href": "CONTRIBUTING.html",
    "title": "Contributing",
    "section": "",
    "text": "🎉 Thank you for checking out our project! 🎉\nThis page contains guidelines on how to get in touch with us and potentially contribute towards this repository.\n\n\nYou can contact the researchers on this project using the provided email addresses in CITATION.cff.\n\n\n\nIf you spot an issue, you are welcome to raise this either by:\n\nUsing GitHub Issues.\nForking the repository, make your changes and submit a pull request for review."
  },
  {
    "objectID": "CONTRIBUTING.html#email",
    "href": "CONTRIBUTING.html#email",
    "title": "Contributing",
    "section": "",
    "text": "You can contact the researchers on this project using the provided email addresses in CITATION.cff."
  },
  {
    "objectID": "CONTRIBUTING.html#suggesting-changes",
    "href": "CONTRIBUTING.html#suggesting-changes",
    "title": "Contributing",
    "section": "",
    "text": "If you spot an issue, you are welcome to raise this either by:\n\nUsing GitHub Issues.\nForking the repository, make your changes and submit a pull request for review."
  },
  {
    "objectID": "quarto_site/license.html",
    "href": "quarto_site/license.html",
    "title": "Open Source License",
    "section": "",
    "text": "This repository is licensed under the [license].\n\n\n\n\n\n\nView license\n\n\n\n\n\nMIT License\nCopyright (c) 2024 STARS Project Team\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n\nThis is aligned with the original study, who shared their code under [license].\n\n\n\n\n\n\nView license\n\n\n\n\n\n\n[Embedded license]\n\n\n\n\nThe original study was published in the journal “[Journal name]”. They distributed the article under [Add more details about license]\n\n\n\n\n\n\nView copyright statement from journal"
  },
  {
    "objectID": "quarto_site/reproduction_readme.html",
    "href": "quarto_site/reproduction_readme.html",
    "title": "README for reproduction",
    "section": "",
    "text": "Please note: This is a template README and has not yet been completed\n\n\n\n\nShoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\n\nThis is a discrete-event simulation modelling primary health centres (PHCs) in India. There are four patient types: outpatients, inpatients, childbirth cases and antenatal care patients. Four model configurations are developed based on observed PHC practices or government-mandated operational guidelines. The paper explores different operational patterns for scenarios where very high utilisation was observed, to explore what might help reduce utilisation of these resources.\n\n\n\nIn this assessment, we attempted to reproduce 17 items: 1 table, 9 figures, and 7 in-text results.\n\n\n\n\n\n├── data\n│   └──  ...\n├── docker\n│   └──  ...\n├── output\n│   └──  ...\n├── sim\n│   └──  ...\n├── tests\n│   └──  ...\n├── environment.yaml\n├── Makefile\n└── README.md\n\ndocker/ - Instructions for creation of Docker container.\noutputs/ - Output files from the model.\nscripts/ - Code the model and for reproducing items from the scope.\ntests/ - Test to check that model produces consistent results with our reproduction.\nenvironment.yml - Instructions for creation of python environment.\nREADME.md - This file!\nrun_all.py - Contains instructions to run all the jupyter nobteooks in scripts/ in sequence.\n\n\n\n\nYou’ll first want create an environment with the specified version of Python and the required packages installed. There are a few options…\nOption A: Conda/Mamba environment\n\nCreate the environment using this command in your terminal: conda env create -f environment.yaml\nYou can use this environment in your preferred IDE, such as VSCode.\nYou can also use this file to create the environment using mamba: mamba env create -f environment.yml\n\nOption B: Docker\n\nYou’ll need docker installed on your local machine. You can then obtain the image by either:\n\nPulling a pre-built image from the GitHub container registry by running docker pull ghcr.io/pythonhealthdatascience/shoaib2022:latest, or\nBuilding the image locally from the Dockerfile by running docker build --tag shoaib2022 .\n\nTo run the image, you should then issue the following commands in your terminal:\n\ndocker run -it -p 8080:80 --name shoaib2022_docker shoaib2022\nconda activate shoaib2022\n\n\n\n\n\n\n\n\n\n\nThis reproduction was conducted on an Intel Core i7-12700H with 32GB RAM running Ubuntu 22.04.4 Linux.\nExpected model runtime (given these specs) is \n\n\n\nTo cite the original study, please refer to the reference above. To cite this reproduction, please refer to the CITATION.cff file in the parent folder.\n\n\n\nThis repository is licensed under the MIT License."
  },
  {
    "objectID": "quarto_site/reproduction_readme.html#model-summary",
    "href": "quarto_site/reproduction_readme.html#model-summary",
    "title": "README for reproduction",
    "section": "",
    "text": "Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\n\nThis is a discrete-event simulation modelling primary health centres (PHCs) in India. There are four patient types: outpatients, inpatients, childbirth cases and antenatal care patients. Four model configurations are developed based on observed PHC practices or government-mandated operational guidelines. The paper explores different operational patterns for scenarios where very high utilisation was observed, to explore what might help reduce utilisation of these resources."
  },
  {
    "objectID": "quarto_site/reproduction_readme.html#scope-of-the-reproduction",
    "href": "quarto_site/reproduction_readme.html#scope-of-the-reproduction",
    "title": "README for reproduction",
    "section": "",
    "text": "In this assessment, we attempted to reproduce 17 items: 1 table, 9 figures, and 7 in-text results."
  },
  {
    "objectID": "quarto_site/reproduction_readme.html#reproducing-these-results",
    "href": "quarto_site/reproduction_readme.html#reproducing-these-results",
    "title": "README for reproduction",
    "section": "",
    "text": "├── data\n│   └──  ...\n├── docker\n│   └──  ...\n├── output\n│   └──  ...\n├── sim\n│   └──  ...\n├── tests\n│   └──  ...\n├── environment.yaml\n├── Makefile\n└── README.md\n\ndocker/ - Instructions for creation of Docker container.\noutputs/ - Output files from the model.\nscripts/ - Code the model and for reproducing items from the scope.\ntests/ - Test to check that model produces consistent results with our reproduction.\nenvironment.yml - Instructions for creation of python environment.\nREADME.md - This file!\nrun_all.py - Contains instructions to run all the jupyter nobteooks in scripts/ in sequence.\n\n\n\n\nYou’ll first want create an environment with the specified version of Python and the required packages installed. There are a few options…\nOption A: Conda/Mamba environment\n\nCreate the environment using this command in your terminal: conda env create -f environment.yaml\nYou can use this environment in your preferred IDE, such as VSCode.\nYou can also use this file to create the environment using mamba: mamba env create -f environment.yml\n\nOption B: Docker\n\nYou’ll need docker installed on your local machine. You can then obtain the image by either:\n\nPulling a pre-built image from the GitHub container registry by running docker pull ghcr.io/pythonhealthdatascience/shoaib2022:latest, or\nBuilding the image locally from the Dockerfile by running docker build --tag shoaib2022 .\n\nTo run the image, you should then issue the following commands in your terminal:\n\ndocker run -it -p 8080:80 --name shoaib2022_docker shoaib2022\nconda activate shoaib2022"
  },
  {
    "objectID": "quarto_site/reproduction_readme.html#reproduction-specs-and-runtime",
    "href": "quarto_site/reproduction_readme.html#reproduction-specs-and-runtime",
    "title": "README for reproduction",
    "section": "",
    "text": "This reproduction was conducted on an Intel Core i7-12700H with 32GB RAM running Ubuntu 22.04.4 Linux.\nExpected model runtime (given these specs) is"
  },
  {
    "objectID": "quarto_site/reproduction_readme.html#citation",
    "href": "quarto_site/reproduction_readme.html#citation",
    "title": "README for reproduction",
    "section": "",
    "text": "To cite the original study, please refer to the reference above. To cite this reproduction, please refer to the CITATION.cff file in the parent folder."
  },
  {
    "objectID": "quarto_site/reproduction_readme.html#license",
    "href": "quarto_site/reproduction_readme.html#license",
    "title": "README for reproduction",
    "section": "",
    "text": "This repository is licensed under the MIT License."
  },
  {
    "objectID": "reproduction/scripts/reproduce_tab6.html",
    "href": "reproduction/scripts/reproduce_tab6.html",
    "title": "Reproducing Table 6",
    "section": "",
    "text": "This notebook aims to reproduce Table 6 from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931."
  },
  {
    "objectID": "reproduction/scripts/reproduce_tab6.html#set-up",
    "href": "reproduction/scripts/reproduce_tab6.html#set-up",
    "title": "Reproducing Table 6",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\nimport numpy as np\n\n# To import and process results\nfrom reproduction_helpers import process_results\nimport pandas as pd\nimport xlrd\nimport os\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\ntable6_path = '../../original_study/tab6.csv'\nfinal_results = '../outputs/tab6.csv'"
  },
  {
    "objectID": "reproduction/scripts/reproduce_tab6.html#run-model",
    "href": "reproduction/scripts/reproduce_tab6.html#run-model",
    "title": "Reproducing Table 6",
    "section": "Run model",
    "text": "Run model\nSet parameters for each configuration based on Table 3.\n\n# Have just specified the parameters that changed between configurations\n\nt6_c1_param = {\n    'doc_cap': 2,\n    'OPD_iat': 4,\n    'IPD_iat': 2880,\n    'delivery_iat': 1440,\n    'ANC_iat': 1440,\n    'rep_file': 't6_c1.xls'\n}\n\nt6_c2_param = {\n    'doc_cap': 1,\n    'OPD_iat': 9,\n    'IPD_iat': 2880,\n    'delivery_iat': 2880,\n    'ANC_iat': 2880,\n    'rep_file': 't6_c2.xls'\n}\n\nt6_c3_param = {\n    'doc_cap': 1,\n    'OPD_iat': 9,\n    'IPD_iat': 2880,\n    'any_delivery': False,\n    'any_ANC': False,\n    'rep_file': 't6_c3.xls'\n}\n\nt6_c4_param = {\n    'doc_cap': 2,\n    'OPD_iat': 3,\n    'mean': 5,\n    'sd': 1,\n    'consult_boundary_1': 2,\n    'consult_boundary_2': 2,\n    'IPD_iat': 2880,\n    'delivery_iat': 1440,\n    'ANC_iat': 1440,\n    'rep_file': 't6_c4.xls'\n}\n\n\n# Create list of parameter dictionaries\nconfig = [t6_c1_param, t6_c2_param, t6_c3_param, t6_c4_param]\n\n# Append 's_' to all items\nfor i, d in enumerate(config):\n    config[i] = {f's_{k}': v for k, v in d.items()}\n\nRun model for each configuration using parallel processing.\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool(4) as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, config)\n\n No of replications done 0\n No of replications done 0\n No of replications done 1\n No of replications done 1\n No of replications done 0\n No of replications done 2\n No of replications done 0\n No of replications done 2\n No of replications done 3\n No of replications done 3\n No of replications done 1\n No of replications done 4\n No of replications done 4\n No of replications done 5\n No of replications done 1\n No of replications done 5\n No of replications done 6\n No of replications done 2\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 8\n No of replications done 2\n No of replications done 3\n No of replications done 9\n No of replications done 8\n No of replications done 9\n No of replications done 4\n No of replications done 3\n No of replications done 5\n No of replications done 4\n No of replications done 6\n No of replications done 5\n No of replications done 7\n No of replications done 8\n No of replications done 6\n No of replications done 9\n No of replications done 7\n No of replications done 8\n No of replications done 9"
  },
  {
    "objectID": "reproduction/scripts/reproduce_tab6.html#import-and-process-replication-results",
    "href": "reproduction/scripts/reproduce_tab6.html#import-and-process-replication-results",
    "title": "Reproducing Table 6",
    "section": "Import and process replication results",
    "text": "Import and process replication results\n\n# Make dictionary with labels from table 6, and corresponding names from model output\nt6_labels = {\n  'doc occ': 'Doctor utilisation',\n  'NCD occ': 'NCD Nurse utilisation',\n  'staff nurse occ': 'Staff nurse utilisation',\n  'pharm occ': 'Pharmacist utilisation',\n  'lab occ': 'Lab utilisation',\n  'ipd bed occ': 'Inpatient bed utilisation',\n  'del occ': 'Labour bed utilisation',  # \"Del\" stands for delivery\n  'opd q len': 'Mean length of OPD queue (number of patients)',\n  'OPD Q wt': 'OPD queue waiting time (minutes)',\n  'pharmacy q len': 'Mean length of pharmacy queue (number of patients)',\n  'Pharmacy Q wt': 'Pharmacy queue waiting time (minutes)',\n  'lab q len': 'Mean length of Lab queue (number of patients)',\n  'Lab Q wt': 'Lab queue waiting time (minutes)',\n  'prop_del_referred': 'Fraction of childbirth cases referred'\n}\n\n\n# Get results from those files\nfiles = ['t6_c1', 't6_c2', 't6_c3', 't6_c4']\nsummary = process_results(files, sd=True).reset_index().rename(\n    columns= {'index': 'model_outcome'})\n\n# Add labels to model results\nsummary['t6_outcome'] = summary['model_outcome'].map(t6_labels)\n\nsummary\n\n\n\n\n\n\n\n\nmodel_outcome\nmodel_t6_c1_mean\nmodel_t6_c1_sd\nmodel_t6_c2_mean\nmodel_t6_c2_sd\nmodel_t6_c3_mean\nmodel_t6_c3_sd\nmodel_t6_c4_mean\nmodel_t6_c4_sd\nt6_outcome\n\n\n\n\n0\nOPD patients\n33101.900000\n187.146081\n14859.700000\n143.959910\n14850.100000\n109.377481\n43965.100000\n194.210338\nNaN\n\n\n1\nIPD patients\n184.800000\n15.795921\n184.400000\n11.918240\n185.900000\n7.460265\n178.600000\n9.359487\nNaN\n\n\n2\nANC patients\n359.300000\n13.888844\n210.000000\n11.015141\n0.000000\n0.000000\n360.900000\n14.487159\nNaN\n\n\n3\nDel patients\n353.800000\n15.368077\n189.100000\n11.948501\nNaN\nNaN\n373.300000\n21.689987\nNaN\n\n\n4\nOPD Q wt\n0.008353\n0.003899\n0.178456\n0.032152\n0.035088\n0.001552\n6.936889\n0.317485\nOPD queue waiting time (minutes)\n\n\n5\nPharmacy Q wt\n1.028137\n0.030612\n0.243665\n0.004954\n0.230186\n0.005995\n1.282328\n0.019748\nPharmacy queue waiting time (minutes)\n\n\n6\nLab Q wt\n2.093213\n0.044016\n0.597352\n0.015955\n0.560986\n0.023920\n3.123766\n0.082075\nLab queue waiting time (minutes)\n\n\n7\ndoc occ\n0.268659\n0.001616\n0.371607\n0.004346\n0.353566\n0.001425\n1.141365\n0.005321\nDoctor utilisation\n\n\n8\nLab patient list\n188885.800000\n104210.318073\n85433.500000\n47183.868802\n85595.300000\n46948.304603\n250794.800000\n138149.363001\nNaN\n\n\n9\nOPD q len\n0.006918\n0.003500\n0.179808\n0.042491\n0.034079\n0.001502\n6.851667\n0.332248\nNaN\n\n\n10\nipd occ\n0.096000\n0.005164\n0.061000\n0.003162\n0.012000\n0.004216\n0.098000\n0.004216\nNaN\n\n\n11\nopd q len\n0.000736\n0.000342\n0.007070\n0.001264\n0.001387\n0.000066\n0.812750\n0.040379\nMean length of OPD queue (number of patients)\n\n\n12\npharmacy q len\n0.090371\n0.002949\n0.009623\n0.000204\n0.009097\n0.000242\n0.149890\n0.002749\nMean length of pharmacy queue (number of patie...\n\n\n13\nlab q len\n0.094789\n0.002610\n0.012369\n0.000372\n0.011094\n0.000492\n0.185814\n0.005814\nMean length of Lab queue (number of patients)\n\n\n14\nNCD occ\n0.868296\n0.009839\n0.466542\n0.004252\n0.467458\n0.003913\n1.230139\n0.014734\nNCD Nurse utilisation\n\n\n15\nlab occ\n0.554516\n0.006856\n0.253693\n0.003409\n0.238568\n0.004396\n0.728652\n0.014631\nLab utilisation\n\n\n16\npharm occ\n0.642648\n0.003439\n0.288656\n0.002787\n0.288370\n0.002555\n0.853658\n0.004257\nPharmacist utilisation\n\n\n17\nstaff nurse occ\n0.318275\n0.006835\n0.246430\n0.005604\n0.160976\n0.000811\n0.325778\n0.009066\nStaff nurse utilisation\n\n\n18\ndel occ\n0.280000\n0.014142\n0.157000\n0.006749\nNaN\nNaN\n0.285000\n0.012693\nLabour bed utilisation\n\n\n19\ndel referred\n52.300000\n5.869885\n17.500000\n2.223611\nNaN\nNaN\n62.200000\n9.259230\nNaN\n\n\n20\nipd bed occ\n0.091780\n0.003905\n0.057443\n0.003663\n0.011905\n0.000581\n0.093865\n0.004500\nInpatient bed utilisation\n\n\n21\nprop_del_referred\n0.147775\n0.014515\n0.092491\n0.009510\nNaN\nNaN\n0.166276\n0.019396\nFraction of childbirth cases referred"
  },
  {
    "objectID": "reproduction/scripts/reproduce_tab6.html#import-table-6-results-and-compare-against-run-results",
    "href": "reproduction/scripts/reproduce_tab6.html#import-table-6-results-and-compare-against-run-results",
    "title": "Reproducing Table 6",
    "section": "Import table 6 results and compare against run results",
    "text": "Import table 6 results and compare against run results\n\n# Import table 6\nt6 = pd.read_csv(table6_path).rename(columns={'outcome': 't6_outcome'})\nt6\n\n\n\n\n\n\n\n\nt6_outcome\nconfig1_mean\nconfig1_sd\nconfig2_mean\nconfig2_sd\nconfig3_mean\nconfig3_sd\nbenchmark_mean\nbenchmark_sd\n\n\n\n\n0\nDoctor utilisation\n0.268\n0.003\n0.372\n0.004\n0.354\n0.002\n1.142\n0.006\n\n\n1\nNCD Nurse utilisation\n0.865\n0.011\n0.469\n0.005\n0.468\n0.005\n1.232\n0.019\n\n\n2\nStaff nurse utilisation\n0.323\n0.008\n0.243\n0.006\n0.160\n0.001\n0.322\n0.008\n\n\n3\nPharmacist utilisation\n0.643\n0.004\n0.288\n0.003\n0.289\n0.003\n0.855\n0.005\n\n\n4\nLab utilisation\n0.559\n0.008\n0.254\n0.004\n0.239\n0.004\n0.736\n0.011\n\n\n5\nInpatient bed utilisation\n0.093\n0.004\n0.055\n0.003\n0.011\n0.001\n0.093\n0.004\n\n\n6\nLabour bed utilisation\n0.283\n0.010\n0.153\n0.009\nNaN\nNaN\n0.281\n0.012\n\n\n7\nMean length of OPD queue (number of patients)\n0.000\n0.000\n0.007\n0.001\n0.001\n0.000\n0.817\n0.027\n\n\n8\nOPD queue waiting time (minutes)\n0.009\n0.004\n0.171\n0.032\n0.034\n0.001\n6.789\n0.268\n\n\n9\nMean length of pharmacy queue (number of patie...\n0.090\n0.002\n0.010\n0.001\n0.009\n0.000\n0.150\n0.002\n\n\n10\nPharmacy queue waiting time (minutes)\n1.025\n0.021\n0.244\n0.008\n0.232\n0.006\n1.282\n0.018\n\n\n11\nMean length of Lab queue (number of patients)\n0.094\n0.003\n0.012\n0.001\n0.011\n0.000\n0.188\n0.001\n\n\n12\nLab queue waiting time (minutes)\n2.084\n0.054\n0.606\n0.023\n0.571\n0.020\n3.135\n0.005\n\n\n13\nFraction of childbirth cases referred\n0.156\n0.019\n0.088\n0.022\nNaN\nNaN\n0.157\n0.180\n\n\n\n\n\n\n\n\n# Round to 3dp (as in table) and merge\ncompare = t6.merge(round(summary,3))\ncompare.head()\n\n\n\n\n\n\n\n\nt6_outcome\nconfig1_mean\nconfig1_sd\nconfig2_mean\nconfig2_sd\nconfig3_mean\nconfig3_sd\nbenchmark_mean\nbenchmark_sd\nmodel_outcome\nmodel_t6_c1_mean\nmodel_t6_c1_sd\nmodel_t6_c2_mean\nmodel_t6_c2_sd\nmodel_t6_c3_mean\nmodel_t6_c3_sd\nmodel_t6_c4_mean\nmodel_t6_c4_sd\n\n\n\n\n0\nDoctor utilisation\n0.268\n0.003\n0.372\n0.004\n0.354\n0.002\n1.142\n0.006\ndoc occ\n0.269\n0.002\n0.372\n0.004\n0.354\n0.001\n1.141\n0.005\n\n\n1\nNCD Nurse utilisation\n0.865\n0.011\n0.469\n0.005\n0.468\n0.005\n1.232\n0.019\nNCD occ\n0.868\n0.010\n0.467\n0.004\n0.467\n0.004\n1.230\n0.015\n\n\n2\nStaff nurse utilisation\n0.323\n0.008\n0.243\n0.006\n0.160\n0.001\n0.322\n0.008\nstaff nurse occ\n0.318\n0.007\n0.246\n0.006\n0.161\n0.001\n0.326\n0.009\n\n\n3\nPharmacist utilisation\n0.643\n0.004\n0.288\n0.003\n0.289\n0.003\n0.855\n0.005\npharm occ\n0.643\n0.003\n0.289\n0.003\n0.288\n0.003\n0.854\n0.004\n\n\n4\nLab utilisation\n0.559\n0.008\n0.254\n0.004\n0.239\n0.004\n0.736\n0.011\nlab occ\n0.555\n0.007\n0.254\n0.003\n0.239\n0.004\n0.729\n0.015\n\n\n\n\n\n\n\n\ncompare_col = [\n    ('config1_mean', 'model_t6_c1_mean'),\n    ('config1_sd', 'model_t6_c1_sd'),\n    ('config2_mean', 'model_t6_c2_mean'),\n    ('config2_sd', 'model_t6_c2_sd'),\n    ('config3_mean', 'model_t6_c3_mean'),\n    ('config3_sd', 'model_t6_c3_sd'),\n    ('benchmark_mean', 'model_t6_c4_mean'),\n    ('benchmark_sd', 'model_t6_c4_sd'),]\n\nfor col in compare_col:\n    # Find difference between two columns\n    compare[f'change_{col[1]}'] = abs(compare[col[1]] - compare[col[0]])\n    # Find percent change between two columns\n    subset = compare[list(col)]\n    pct_change = subset.pct_change(axis=1).iloc[:, 1]*100\n    compare[f'pct_change_{col[1]}'] = pct_change\n\n# Display each of the results\nfor col in compare_col:\n    # Set outcome as index, and get the two results plus percent change\n    subset = compare.set_index('t6_outcome')[\n        list(col) + [f'change_{col[1]}', f'pct_change_{col[1]}']]\n    display(subset)\n\n\n\n\n\n\n\n\nconfig1_mean\nmodel_t6_c1_mean\nchange_model_t6_c1_mean\npct_change_model_t6_c1_mean\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.268\n0.269\n0.001\n0.373134\n\n\nNCD Nurse utilisation\n0.865\n0.868\n0.003\n0.346821\n\n\nStaff nurse utilisation\n0.323\n0.318\n0.005\n-1.547988\n\n\nPharmacist utilisation\n0.643\n0.643\n0.000\n0.000000\n\n\nLab utilisation\n0.559\n0.555\n0.004\n-0.715564\n\n\nInpatient bed utilisation\n0.093\n0.092\n0.001\n-1.075269\n\n\nLabour bed utilisation\n0.283\n0.280\n0.003\n-1.060071\n\n\nMean length of OPD queue (number of patients)\n0.000\n0.001\n0.001\ninf\n\n\nOPD queue waiting time (minutes)\n0.009\n0.008\n0.001\n-11.111111\n\n\nMean length of pharmacy queue (number of patients)\n0.090\n0.090\n0.000\n0.000000\n\n\nPharmacy queue waiting time (minutes)\n1.025\n1.028\n0.003\n0.292683\n\n\nMean length of Lab queue (number of patients)\n0.094\n0.095\n0.001\n1.063830\n\n\nLab queue waiting time (minutes)\n2.084\n2.093\n0.009\n0.431862\n\n\nFraction of childbirth cases referred\n0.156\n0.148\n0.008\n-5.128205\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconfig1_sd\nmodel_t6_c1_sd\nchange_model_t6_c1_sd\npct_change_model_t6_c1_sd\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.003\n0.002\n0.001\n-33.333333\n\n\nNCD Nurse utilisation\n0.011\n0.010\n0.001\n-9.090909\n\n\nStaff nurse utilisation\n0.008\n0.007\n0.001\n-12.500000\n\n\nPharmacist utilisation\n0.004\n0.003\n0.001\n-25.000000\n\n\nLab utilisation\n0.008\n0.007\n0.001\n-12.500000\n\n\nInpatient bed utilisation\n0.004\n0.004\n0.000\n0.000000\n\n\nLabour bed utilisation\n0.010\n0.014\n0.004\n40.000000\n\n\nMean length of OPD queue (number of patients)\n0.000\n0.000\n0.000\nNaN\n\n\nOPD queue waiting time (minutes)\n0.004\n0.004\n0.000\n0.000000\n\n\nMean length of pharmacy queue (number of patients)\n0.002\n0.003\n0.001\n50.000000\n\n\nPharmacy queue waiting time (minutes)\n0.021\n0.031\n0.010\n47.619048\n\n\nMean length of Lab queue (number of patients)\n0.003\n0.003\n0.000\n0.000000\n\n\nLab queue waiting time (minutes)\n0.054\n0.044\n0.010\n-18.518519\n\n\nFraction of childbirth cases referred\n0.019\n0.015\n0.004\n-21.052632\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconfig2_mean\nmodel_t6_c2_mean\nchange_model_t6_c2_mean\npct_change_model_t6_c2_mean\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.372\n0.372\n0.000\n0.000000\n\n\nNCD Nurse utilisation\n0.469\n0.467\n0.002\n-0.426439\n\n\nStaff nurse utilisation\n0.243\n0.246\n0.003\n1.234568\n\n\nPharmacist utilisation\n0.288\n0.289\n0.001\n0.347222\n\n\nLab utilisation\n0.254\n0.254\n0.000\n0.000000\n\n\nInpatient bed utilisation\n0.055\n0.057\n0.002\n3.636364\n\n\nLabour bed utilisation\n0.153\n0.157\n0.004\n2.614379\n\n\nMean length of OPD queue (number of patients)\n0.007\n0.007\n0.000\n0.000000\n\n\nOPD queue waiting time (minutes)\n0.171\n0.178\n0.007\n4.093567\n\n\nMean length of pharmacy queue (number of patients)\n0.010\n0.010\n0.000\n0.000000\n\n\nPharmacy queue waiting time (minutes)\n0.244\n0.244\n0.000\n0.000000\n\n\nMean length of Lab queue (number of patients)\n0.012\n0.012\n0.000\n0.000000\n\n\nLab queue waiting time (minutes)\n0.606\n0.597\n0.009\n-1.485149\n\n\nFraction of childbirth cases referred\n0.088\n0.092\n0.004\n4.545455\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconfig2_sd\nmodel_t6_c2_sd\nchange_model_t6_c2_sd\npct_change_model_t6_c2_sd\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.004\n0.004\n0.000\n0.000000\n\n\nNCD Nurse utilisation\n0.005\n0.004\n0.001\n-20.000000\n\n\nStaff nurse utilisation\n0.006\n0.006\n0.000\n0.000000\n\n\nPharmacist utilisation\n0.003\n0.003\n0.000\n0.000000\n\n\nLab utilisation\n0.004\n0.003\n0.001\n-25.000000\n\n\nInpatient bed utilisation\n0.003\n0.004\n0.001\n33.333333\n\n\nLabour bed utilisation\n0.009\n0.007\n0.002\n-22.222222\n\n\nMean length of OPD queue (number of patients)\n0.001\n0.001\n0.000\n0.000000\n\n\nOPD queue waiting time (minutes)\n0.032\n0.032\n0.000\n0.000000\n\n\nMean length of pharmacy queue (number of patients)\n0.001\n0.000\n0.001\n-100.000000\n\n\nPharmacy queue waiting time (minutes)\n0.008\n0.005\n0.003\n-37.500000\n\n\nMean length of Lab queue (number of patients)\n0.001\n0.000\n0.001\n-100.000000\n\n\nLab queue waiting time (minutes)\n0.023\n0.016\n0.007\n-30.434783\n\n\nFraction of childbirth cases referred\n0.022\n0.010\n0.012\n-54.545455\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconfig3_mean\nmodel_t6_c3_mean\nchange_model_t6_c3_mean\npct_change_model_t6_c3_mean\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.354\n0.354\n0.000\n0.000000\n\n\nNCD Nurse utilisation\n0.468\n0.467\n0.001\n-0.213675\n\n\nStaff nurse utilisation\n0.160\n0.161\n0.001\n0.625000\n\n\nPharmacist utilisation\n0.289\n0.288\n0.001\n-0.346021\n\n\nLab utilisation\n0.239\n0.239\n0.000\n0.000000\n\n\nInpatient bed utilisation\n0.011\n0.012\n0.001\n9.090909\n\n\nLabour bed utilisation\nNaN\nNaN\nNaN\nNaN\n\n\nMean length of OPD queue (number of patients)\n0.001\n0.001\n0.000\n0.000000\n\n\nOPD queue waiting time (minutes)\n0.034\n0.035\n0.001\n2.941176\n\n\nMean length of pharmacy queue (number of patients)\n0.009\n0.009\n0.000\n0.000000\n\n\nPharmacy queue waiting time (minutes)\n0.232\n0.230\n0.002\n-0.862069\n\n\nMean length of Lab queue (number of patients)\n0.011\n0.011\n0.000\n0.000000\n\n\nLab queue waiting time (minutes)\n0.571\n0.561\n0.010\n-1.751313\n\n\nFraction of childbirth cases referred\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconfig3_sd\nmodel_t6_c3_sd\nchange_model_t6_c3_sd\npct_change_model_t6_c3_sd\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.002\n0.001\n0.001\n-50.0\n\n\nNCD Nurse utilisation\n0.005\n0.004\n0.001\n-20.0\n\n\nStaff nurse utilisation\n0.001\n0.001\n0.000\n0.0\n\n\nPharmacist utilisation\n0.003\n0.003\n0.000\n0.0\n\n\nLab utilisation\n0.004\n0.004\n0.000\n0.0\n\n\nInpatient bed utilisation\n0.001\n0.001\n0.000\n0.0\n\n\nLabour bed utilisation\nNaN\nNaN\nNaN\nNaN\n\n\nMean length of OPD queue (number of patients)\n0.000\n0.000\n0.000\nNaN\n\n\nOPD queue waiting time (minutes)\n0.001\n0.002\n0.001\n100.0\n\n\nMean length of pharmacy queue (number of patients)\n0.000\n0.000\n0.000\nNaN\n\n\nPharmacy queue waiting time (minutes)\n0.006\n0.006\n0.000\n0.0\n\n\nMean length of Lab queue (number of patients)\n0.000\n0.000\n0.000\nNaN\n\n\nLab queue waiting time (minutes)\n0.020\n0.024\n0.004\n20.0\n\n\nFraction of childbirth cases referred\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbenchmark_mean\nmodel_t6_c4_mean\nchange_model_t6_c4_mean\npct_change_model_t6_c4_mean\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n1.142\n1.141\n0.001\n-0.087566\n\n\nNCD Nurse utilisation\n1.232\n1.230\n0.002\n-0.162338\n\n\nStaff nurse utilisation\n0.322\n0.326\n0.004\n1.242236\n\n\nPharmacist utilisation\n0.855\n0.854\n0.001\n-0.116959\n\n\nLab utilisation\n0.736\n0.729\n0.007\n-0.951087\n\n\nInpatient bed utilisation\n0.093\n0.094\n0.001\n1.075269\n\n\nLabour bed utilisation\n0.281\n0.285\n0.004\n1.423488\n\n\nMean length of OPD queue (number of patients)\n0.817\n0.813\n0.004\n-0.489596\n\n\nOPD queue waiting time (minutes)\n6.789\n6.937\n0.148\n2.179997\n\n\nMean length of pharmacy queue (number of patients)\n0.150\n0.150\n0.000\n0.000000\n\n\nPharmacy queue waiting time (minutes)\n1.282\n1.282\n0.000\n0.000000\n\n\nMean length of Lab queue (number of patients)\n0.188\n0.186\n0.002\n-1.063830\n\n\nLab queue waiting time (minutes)\n3.135\n3.124\n0.011\n-0.350877\n\n\nFraction of childbirth cases referred\n0.157\n0.166\n0.009\n5.732484\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbenchmark_sd\nmodel_t6_c4_sd\nchange_model_t6_c4_sd\npct_change_model_t6_c4_sd\n\n\nt6_outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.006\n0.005\n0.001\n-16.666667\n\n\nNCD Nurse utilisation\n0.019\n0.015\n0.004\n-21.052632\n\n\nStaff nurse utilisation\n0.008\n0.009\n0.001\n12.500000\n\n\nPharmacist utilisation\n0.005\n0.004\n0.001\n-20.000000\n\n\nLab utilisation\n0.011\n0.015\n0.004\n36.363636\n\n\nInpatient bed utilisation\n0.004\n0.004\n0.000\n0.000000\n\n\nLabour bed utilisation\n0.012\n0.013\n0.001\n8.333333\n\n\nMean length of OPD queue (number of patients)\n0.027\n0.040\n0.013\n48.148148\n\n\nOPD queue waiting time (minutes)\n0.268\n0.317\n0.049\n18.283582\n\n\nMean length of pharmacy queue (number of patients)\n0.002\n0.003\n0.001\n50.000000\n\n\nPharmacy queue waiting time (minutes)\n0.018\n0.020\n0.002\n11.111111\n\n\nMean length of Lab queue (number of patients)\n0.001\n0.006\n0.005\n500.000000\n\n\nLab queue waiting time (minutes)\n0.005\n0.082\n0.077\n1540.000000\n\n\nFraction of childbirth cases referred\n0.180\n0.019\n0.161\n-89.444444"
  },
  {
    "objectID": "reproduction/scripts/reproduce_tab6.html#format-model-results-like-table-6-and-save",
    "href": "reproduction/scripts/reproduce_tab6.html#format-model-results-like-table-6-and-save",
    "title": "Reproducing Table 6",
    "section": "Format model results like table 6, and save",
    "text": "Format model results like table 6, and save\n\ncompare_col = [\n    ['Configuration 1', 'model_t6_c1_mean', 'model_t6_c1_sd'],\n    ['Configuration 2', 'model_t6_c2_mean', 'model_t6_c2_sd'],\n    ['Configuration 3', 'model_t6_c3_mean', 'model_t6_c3_sd'],\n    ['Benchmark Case', 'model_t6_c4_mean', 'model_t6_c4_sd']]\n\n# Combine each pair of columns into string as in Table 6\nfor col in compare_col:\n    compare[col[0]] = (\n        round(compare[col[1]], 3).astype(str) + ' (' +\n        round(compare[col[2]], 3).astype(str) + ')')\n\n# Set outcome name as index, and select those columns\nformatted_model_res = (compare\n                       .set_index('t6_outcome')\n                       .rename_axis('Simulation Outcome')[\n                           [item[0] for item in compare_col]])\nformatted_model_res\n\n\n\n\n\n\n\n\nConfiguration 1\nConfiguration 2\nConfiguration 3\nBenchmark Case\n\n\nSimulation Outcome\n\n\n\n\n\n\n\n\nDoctor utilisation\n0.269 (0.002)\n0.372 (0.004)\n0.354 (0.001)\n1.141 (0.005)\n\n\nNCD Nurse utilisation\n0.868 (0.01)\n0.467 (0.004)\n0.467 (0.004)\n1.23 (0.015)\n\n\nStaff nurse utilisation\n0.318 (0.007)\n0.246 (0.006)\n0.161 (0.001)\n0.326 (0.009)\n\n\nPharmacist utilisation\n0.643 (0.003)\n0.289 (0.003)\n0.288 (0.003)\n0.854 (0.004)\n\n\nLab utilisation\n0.555 (0.007)\n0.254 (0.003)\n0.239 (0.004)\n0.729 (0.015)\n\n\nInpatient bed utilisation\n0.092 (0.004)\n0.057 (0.004)\n0.012 (0.001)\n0.094 (0.004)\n\n\nLabour bed utilisation\n0.28 (0.014)\n0.157 (0.007)\nnan (nan)\n0.285 (0.013)\n\n\nMean length of OPD queue (number of patients)\n0.001 (0.0)\n0.007 (0.001)\n0.001 (0.0)\n0.813 (0.04)\n\n\nOPD queue waiting time (minutes)\n0.008 (0.004)\n0.178 (0.032)\n0.035 (0.002)\n6.937 (0.317)\n\n\nMean length of pharmacy queue (number of patients)\n0.09 (0.003)\n0.01 (0.0)\n0.009 (0.0)\n0.15 (0.003)\n\n\nPharmacy queue waiting time (minutes)\n1.028 (0.031)\n0.244 (0.005)\n0.23 (0.006)\n1.282 (0.02)\n\n\nMean length of Lab queue (number of patients)\n0.095 (0.003)\n0.012 (0.0)\n0.011 (0.0)\n0.186 (0.006)\n\n\nLab queue waiting time (minutes)\n2.093 (0.044)\n0.597 (0.016)\n0.561 (0.024)\n3.124 (0.082)\n\n\nFraction of childbirth cases referred\n0.148 (0.015)\n0.092 (0.01)\nnan (nan)\n0.166 (0.019)\n\n\n\n\n\n\n\n\nformatted_model_res.to_csv(final_results)"
  },
  {
    "objectID": "reproduction/scripts/reproduce_tab6.html#run-time",
    "href": "reproduction/scripts/reproduce_tab6.html#run-time",
    "title": "Reproducing Table 6",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 2m 38s\n\n\n\n\n\nTable 6"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html",
    "href": "reproduction/scripts/reproduce_fig2.html",
    "title": "Reproducing Figure 2A-D",
    "section": "",
    "text": "This notebook aims to reproduce Figures 2A-D from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931."
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#parameters",
    "href": "reproduction/scripts/reproduce_fig2.html#parameters",
    "title": "Reproducing Figure 2A-D",
    "section": "Parameters",
    "text": "Parameters\nIn these figures, we vary:\n\nNumber of outpatients per day:\n\n170 (same as config 4)\n85\n65\n\nAverage service time for outpatients - mean (SD):\n\n0.87 (0.21) (same as config 1)\n2.5 (0.5)\n5 (1)\n\n\nTo calculate inter-arrival times from those numbers per day, based on article description and the provided patient counts and equivalent IAT, understand the method for calculation to be round(60/(n/8.5)), where n is the number of arrivals per day. As such…\n\n# Calculation of inter-arrival times\nprint(f'For 170 outpatients, use IAT (rounded to nearest int): {60/(170/8.5)}')\nprint(f'For 85 outpatients, use IAT (rounded to nearest int): {60/(85/8.5)}')\nprint(f'For 65 outpatients, use IAT (rounded to nearest int): {60/(65/8.5)}')\n\nFor 170 outpatients, use IAT (rounded to nearest int): 3.0\nFor 85 outpatients, use IAT (rounded to nearest int): 6.0\nFor 65 outpatients, use IAT (rounded to nearest int): 7.846153846153846"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#set-up",
    "href": "reproduction/scripts/reproduce_fig2.html#set-up",
    "title": "Reproducing Figure 2A-D",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\n\n# To import results and produce figures\nfrom reproduction_helpers import process_results\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\n# Paths to save image files to\noutput_folder = '../outputs'\nfig2a_path = os.path.join(output_folder, 'fig2a.png')\nfig2b_path = os.path.join(output_folder, 'fig2b.png')\nfig2c_path = os.path.join(output_folder, 'fig2c.png')\nfig2d_path = os.path.join(output_folder, 'fig2d.png')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#run-model",
    "href": "reproduction/scripts/reproduce_fig2.html#run-model",
    "title": "Reproducing Figure 2A-D",
    "section": "Run model",
    "text": "Run model\nAs this is a variation on configuration 1 (which is the default parameters in PHC.py), we just need to input the varying number of outpatients and service time.\n\n# Varying number of outpatients\narr_dict = [\n    {\n        'OPD_iat': 3,\n        'rep_file': 'arr170'\n    },\n    {\n        'OPD_iat': 6,\n        'rep_file': 'arr85',\n    },\n    {\n        'OPD_iat': 8,\n        'rep_file': 'arr65',\n    }\n]\n\n# Varying service time\nserv_dict = [\n    {\n        'mean': 0.87,\n        'sd': 0.21,\n        'consult_boundary_1': 0.5,  # From PHC.py\n        'consult_boundary_2': 0.3,  # From PHC.py\n        'rep_file': 'serv087'\n    },\n    {\n        'mean': 2.5,\n        'sd': 0.5,\n        'consult_boundary_1': 1,  # Guess\n        'consult_boundary_2': 1,  # Guess\n        'rep_file': 'serv25'\n    },\n    {\n        'mean': 5,\n        'sd': 1,\n        'consult_boundary_1': 2,  # From config 4\n        'consult_boundary_2': 2,  # From config 4\n        'rep_file': 'serv5'\n    }\n]\n\nCreate each combination for the reproduction\n\ndict_list = []\nfor arr in arr_dict:\n    for serv in serv_dict:\n        # Combine the dictionaries\n        comb = {**arr, **serv}\n        # Replace the file name\n        comb['rep_file'] = f'''f2_{arr['rep_file']}_{serv['rep_file']}.xls'''\n        # Save to list\n        dict_list.append(comb)\n\nlen(dict_list)\n\n9\n\n\n\n# Append 's_' to all items\nfor i, d in enumerate(dict_list):\n    dict_list[i] = {f's_{k}': v for k, v in d.items()}\n\n# Preview example\ndict_list[0]\n\n{'s_OPD_iat': 3,\n 's_rep_file': 'f2_arr170_serv087.xls',\n 's_mean': 0.87,\n 's_sd': 0.21,\n 's_consult_boundary_1': 0.5,\n 's_consult_boundary_2': 0.3}\n\n\nRun the model (with parallel processing to reduce run time)\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool() as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, dict_list)\n\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 3\n No of replications done 2\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 1\n No of replications done 3\n No of replications done 4\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 5\n No of replications done 4\n No of replications done 3\n No of replications done 4\n No of replications done 2\n No of replications done 2\n No of replications done 4\n No of replications done 4\n No of replications done 6\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 2\n No of replications done 4\n No of replications done 7\n No of replications done 5\n No of replications done 6\n No of replications done 3\n No of replications done 6\n No of replications done 6\n No of replications done 8\n No of replications done 6\n No of replications done 5\n No of replications done 7\n No of replications done 7\n No of replications done 3\n No of replications done 9\n No of replications done 6\n No of replications done 7\n No of replications done 4\n No of replications done 8\n No of replications done 7\n No of replications done 8\n No of replications done 3\n No of replications done 7\n No of replications done 8\n No of replications done 9\n No of replications done 9\n No of replications done 4\n No of replications done 8\n No of replications done 5\n No of replications done 8\n No of replications done 9\n No of replications done 4\n No of replications done 9\n No of replications done 9\n No of replications done 5\n No of replications done 6\n No of replications done 5\n No of replications done 6\n No of replications done 7\n No of replications done 6\n No of replications done 7\n No of replications done 8\n No of replications done 7\n No of replications done 8\n No of replications done 9\n No of replications done 8\n No of replications done 9\n No of replications done 9"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#create-figure-2a",
    "href": "reproduction/scripts/reproduce_fig2.html#create-figure-2a",
    "title": "Reproducing Figure 2A-D",
    "section": "Create Figure 2A",
    "text": "Create Figure 2A\n\n# Import and process results\ndata_full = process_results([\n    'f2_arr170_serv087', 'f2_arr85_serv087', 'f2_arr65_serv087',\n    'f2_arr170_serv25', 'f2_arr85_serv25', 'f2_arr65_serv25',\n    'f2_arr170_serv5', 'f2_arr85_serv5', 'f2_arr65_serv5'])\n\n# Filter to doctor utilisation\ndata_2a = data_full.loc['doc occ']\ndata_2a\n\nf2_arr170_serv087    0.311815\nf2_arr85_serv087     0.225192\nf2_arr65_serv087     0.204317\nf2_arr170_serv25     0.640142\nf2_arr85_serv25      0.389486\nf2_arr65_serv25      0.327015\nf2_arr170_serv5      1.141365\nf2_arr85_serv5       0.640515\nf2_arr65_serv5       0.517174\nName: doc occ, dtype: float64\n\n\n\ndef create_2a_2d(s, ylab, file, ylim=False):\n    '''\n    Creates Figure 2A or 2D (as both are very similar)\n\n    Parameters:\n    -----------\n    s : pd.Series\n        Series with mean result as values, and the model variant as index\n    ylab : string\n        Label for y axis\n    file : string\n        Path to save figure\n    ylim : list, optional, default False\n        If provided, gives the lower and upper limits for the Y axis\n\n    Returns:\n    --------\n    matplotlib figure \n    '''\n    # Reshape data so in appropriate format for plotting grouped bar chart\n    names = [170, 85, 65]\n    s5 = [s['f2_arr170_serv5'], s['f2_arr85_serv5'], s['f2_arr65_serv5']]\n    s25 = [s['f2_arr170_serv25'], s['f2_arr85_serv25'], s['f2_arr65_serv25']]\n    s87 = [s['f2_arr170_serv087'], s['f2_arr85_serv087'], s['f2_arr65_serv087']]\n\n    data = pd.DataFrame(\n        {'5 (1)': s5, '2.5 (0.5)': s25, '0.87 (0.21)': s87}, index=names)\n\n    # Plot data\n    ax = data.plot.bar(edgecolor='black', color='white', width=0.7)\n\n    # Add patterns\n    bars = ax.patches\n    pattern = np.repeat(['..', '+++++', '\\\\\\\\\\\\\\\\'], 3)\n    for bar, hatch in zip(bars, pattern):\n        bar.set_hatch(hatch)\n    ax.legend(title='Consultation time (min): mean (sd)')\n\n    # Adjust figure\n    plt.xlabel('Number of patients/day')\n    plt.ylabel(ylab)\n    if ylim:\n        plt.ylim(ylim)\n    plt.xticks(rotation=0)\n    ax.grid(axis='y')\n    ax.set_axisbelow(True)\n    plt.savefig(file, bbox_inches='tight')\n    plt.show()\n\n\ncreate_2a_2d(data_2a, ylab='''Doctor's utilisation''', file=fig2a_path)"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#create-figure-2b",
    "href": "reproduction/scripts/reproduce_fig2.html#create-figure-2b",
    "title": "Reproducing Figure 2A-D",
    "section": "Create Figure 2B",
    "text": "Create Figure 2B\nImport and process data - note: used 0.87 since that is PHC1 and this is described as variants on that but, as paper notes and as I’ve observed (not shown here), “the doctor’s consultation time does not impact this outcome”, so it ultimately doesn’t matter which is chosen.\n\n# Import and process results\ndata_2b = process_results([\n    'f2_arr170_serv087', 'f2_arr85_serv087', 'f2_arr65_serv087'])\n\n# Rename columns\ndata_2b.columns = (\n    data_2b.columns.str.removeprefix('f2_arr').str.removesuffix('_serv087'))\n\n# Preview data\ndata_2b.head()\n\n\n\n\n\n\n\n\n170\n85\n65\n\n\n\n\nOPD patients\n44022.000000\n22156.400000\n16744.600000\n\n\nIPD patients\n182.600000\n184.000000\n183.400000\n\n\nANC patients\n357.700000\n354.700000\n368.400000\n\n\nDel patients\n359.300000\n371.500000\n373.900000\n\n\nOPD Q wt\n0.012598\n0.006986\n0.005684\n\n\n\n\n\n\n\nProduce figure\n\nax = data_2b.loc['NCD occ'].plot.bar(\n    edgecolor='black', color='white', hatch='..')\nplt.xlabel('Number of patients/day')\nplt.ylabel('''NCD nurse's utilisation''')\nplt.ylim(0, 1.4)\nplt.xticks(rotation=0)\nax.grid(axis='y')\nax.set_axisbelow(True)\nplt.savefig(fig2b_path, bbox_inches='tight')\nplt.show()"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#create-figure-2c",
    "href": "reproduction/scripts/reproduce_fig2.html#create-figure-2c",
    "title": "Reproducing Figure 2A-D",
    "section": "Create Figure 2C",
    "text": "Create Figure 2C\nImport and process data\n\n# Import and process results\ndata_2c = process_results([\n    'f2_arr170_serv5', 'f2_arr85_serv5', 'f2_arr65_serv5'])\n\n# Rename columns\ndata_2c.columns = (\n    data_2c.columns.str.removeprefix('f2_arr').str.removesuffix('_serv5'))\n\n# Preview data\ndata_2c.head()\n\n\n\n\n\n\n\n\n170\n85\n65\n\n\n\n\nOPD patients\n43965.100000\n22121.700000\n16680.200000\n\n\nIPD patients\n178.600000\n177.200000\n185.500000\n\n\nANC patients\n360.900000\n356.900000\n358.800000\n\n\nDel patients\n373.300000\nNaN\n370.900000\n\n\nOPD Q wt\n6.936889\n0.540399\n0.275889\n\n\n\n\n\n\n\nProduce figure\n\n# Create figure\nax = data_2c.loc['OPD Q wt'].plot.bar(\n    edgecolor='black', color='white', hatch='..')\nplt.xlabel('Number of patients/day')\nplt.ylabel('''OPD average waiting time (minutes)''')\nplt.xticks(rotation=0)\nplt.ylim(0, 8)\nax.grid(axis='y')\nax.set_axisbelow(True)\nplt.savefig(fig2c_path, bbox_inches='tight')\nplt.show()"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#create-figure-2d",
    "href": "reproduction/scripts/reproduce_fig2.html#create-figure-2d",
    "title": "Reproducing Figure 2A-D",
    "section": "Create Figure 2D",
    "text": "Create Figure 2D\n\n# Filter to pharmacy waiting time\ndata_2d = data_full.loc['Pharmacy Q wt']\ndata_2d\n\nf2_arr170_serv087    2.435524\nf2_arr85_serv087     0.463927\nf2_arr65_serv087     0.293510\nf2_arr170_serv25     2.497280\nf2_arr85_serv25      0.456076\nf2_arr65_serv25      0.286186\nf2_arr170_serv5      1.282328\nf2_arr85_serv5       0.341688\nf2_arr65_serv5       0.215585\nName: Pharmacy Q wt, dtype: float64\n\n\n\ncreate_2a_2d(data_2d, ylab='Pharmacy average waiting time (minutes)',\n             ylim=[0, 3], file=fig2d_path)"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig2.html#run-time",
    "href": "reproduction/scripts/reproduce_fig2.html#run-time",
    "title": "Reproducing Figure 2A-D",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 3m 27s\n\n\n\n\n\nFigure 2A\nFigure 2B\nFigure 2C\nFigure 2D"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "",
    "text": "This notebook aims to reproduce Figures 3A-D and in-text result 1 from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\nIn-text result 1:"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#parameters",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#parameters",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Parameters",
    "text": "Parameters\nIn these figures, we vary configuration 1 as follows:\n\nNumber of inpatient/childbirth/ANC cases per day:\n\n1 = IAT 1440 (e.g. like IPD cases for config1)\n2 = IAT 720 (as 2880 is 0.5 per day and 1440 is 1 per day)\n\nAverage service time for outpatients:\n\n0.87 (0.21) (same as config1)\n2.5 (0.5) (as in figure 2)"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#set-up",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#set-up",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\n\n# To import results and produce figures\nfrom reproduction_helpers import process_results\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\n# Paths to save image files to\noutput_folder = '../outputs'\nfig3a_path = os.path.join(output_folder, 'fig3a.png')\nfig3b_path = os.path.join(output_folder, 'fig3b.png')\nfig3c_path = os.path.join(output_folder, 'fig3c.png')\nfig3d_path = os.path.join(output_folder, 'fig3d.png')\ntxt1_path = os.path.join(output_folder, 'intext1.csv')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#run-model",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#run-model",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Run model",
    "text": "Run model\n\n# Varying number of inpatient, childbirth and ANC cases\narr_dict = [\n    {\n        'IPD_iat': 1440,\n        'delivery_iat': 1440,\n        'ANC_iat': 1440,\n        'rep_file': 'arr111'\n    },\n    {\n        'IPD_iat': 720,\n        'delivery_iat': 1440,\n        'ANC_iat': 1440,\n        'rep_file': 'arr211',\n    },\n    {\n        'IPD_iat': 720,\n        'delivery_iat': 720,\n        'ANC_iat': 720,\n        'rep_file': 'arr222',\n    }\n]\n\n# Varying service time\nserv_dict = [\n    {\n        'mean': 0.87,\n        'sd': 0.21,\n        'consult_boundary_1': 0.5,  # From PHC.py\n        'consult_boundary_2': 0.3,  # From PHC.py\n        'rep_file': 'serv087'\n    },\n    {\n        'mean': 2.5,\n        'sd': 0.5,\n        'consult_boundary_1': 1,  # From Figure 2 (which was a guess)\n        'consult_boundary_2': 1,  # From Figure 2 (which was a guess)\n        'rep_file': 'serv25'\n    }\n]\n\nCreate each combination for the reproduction\n\ndict_list = []\nfor arr in arr_dict:\n    for serv in serv_dict:\n        # Combine the dictionaries\n        comb = {**arr, **serv}\n        # Replace the file name\n        comb['rep_file'] = f'''f3_{arr['rep_file']}_{serv['rep_file']}.xls'''\n        # Save to list\n        dict_list.append(comb)\n\nlen(dict_list)\n\n6\n\n\n\n# Append 's_' to all items\nfor i, d in enumerate(dict_list):\n    dict_list[i] = {f's_{k}': v for k, v in d.items()}\n\n# Preview example\ndict_list[0]\n\n{'s_IPD_iat': 1440,\n 's_delivery_iat': 1440,\n 's_ANC_iat': 1440,\n 's_rep_file': 'f3_arr111_serv087.xls',\n 's_mean': 0.87,\n 's_sd': 0.21,\n 's_consult_boundary_1': 0.5,\n 's_consult_boundary_2': 0.3}\n\n\nRun the model (with parallel processing to reduce run time)\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool() as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, dict_list)\n\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 0\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 2\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 3\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 4\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 5\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 8\n No of replications done 8\n No of replications done 8\n No of replications done 7\n No of replications done 8\n No of replications done 7\n No of replications done 9\n No of replications done 9\n No of replications done 9\n No of replications done 9\n No of replications done 8\n No of replications done 8\n No of replications done 9\n No of replications done 9"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#process-results",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#process-results",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Process results",
    "text": "Process results\nFunction for reshaping these as repeat a few times\n\ndef reshape_087_25(s):\n    '''\n    Reshapes series that has results from scenarios including mean 0.87 and 2.5\n    to produce a 3 x 2 dataframe where rows are consultation time and columns\n    are the arrivals\n\n    Parameters:\n    -----------\n    s : series\n        Series with results from figure 3 model variants\n\n    Returns:\n    --------\n    res : dataframe\n        Dataframe where rows are consultation time and columns are arrivals\n    '''\n    # Reshape data so in appropriate format for plotting grouped bar chart\n    names = ['0.87 (0.21)', '2.5 (0.5)']\n    s111 = [s['f3_arr111_serv087'], s['f3_arr111_serv25']]\n    s211 = [s['f3_arr211_serv087'], s['f3_arr211_serv25']]\n    s222 = [s['f3_arr222_serv087'], s['f3_arr222_serv25']]\n\n    res = pd.DataFrame(\n        {'(1/1/1)': s111, '(2/1/1)': s211, '(2/2/2)': s222}, index=names)\n\n    return res\n\n\ndef plot_087_25(df, ylab, ylim=False, save_path=False):\n    '''\n    Plots results from varying cases and consultation time\n\n    Parameters:\n    -----------\n    df : pd.DataFrame\n        Dataframe reshaped using reshape_087_25()\n    '''\n    # Plot data\n    ax = df.plot.bar(edgecolor='black', color='white', width=0.7)\n\n    # Add patterns\n    bars = ax.patches\n    pattern = np.repeat(['++', '\\\\\\\\\\\\\\\\', '//////'], 2)\n    for bar, hatch in zip(bars, pattern):\n        bar.set_hatch(hatch)\n    ax.legend(title='Inpatient/Childbirth/ANC cases per day')\n\n    # Adjust figure\n    plt.xlabel('Consultation time (minutes): mean (SD)')\n    plt.ylabel(ylab)\n    plt.xticks(rotation=0)\n    ax.grid(axis='y')\n    if ylim:\n        plt.ylim(ylim)\n    ax.set_axisbelow(True)\n    if save_path:\n        plt.savefig(save_path, bbox_inches='tight')\n    plt.show()"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#create-figure-3a",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#create-figure-3a",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Create Figure 3A",
    "text": "Create Figure 3A\n\n# Import and process results\ndata_full = process_results([\n    'f3_arr111_serv087', 'f3_arr211_serv087', 'f3_arr222_serv087',\n    'f3_arr111_serv25', 'f3_arr211_serv25', 'f3_arr222_serv25'])\n\n# Filter to doctor utilisation\na3 = data_full.loc['doc occ']\na3\n\nf3_arr111_serv087    0.269200\nf3_arr211_serv087    0.270328\nf3_arr222_serv087    0.289834\nf3_arr111_serv25     0.513831\nf3_arr211_serv25     0.517641\nf3_arr222_serv25     0.537557\nName: doc occ, dtype: float64\n\n\n\n# Reshape data so in appropriate format for plotting grouped bar chart\ndata_3a = reshape_087_25(a3)\ndata_3a\n\n\n\n\n\n\n\n\n(1/1/1)\n(2/1/1)\n(2/2/2)\n\n\n\n\n0.87 (0.21)\n0.269200\n0.270328\n0.289834\n\n\n2.5 (0.5)\n0.513831\n0.517641\n0.537557\n\n\n\n\n\n\n\n\nplot_087_25(data_3a, ylab='''Doctor's utilisation''',\n            ylim=[0,1], save_path=fig3a_path)"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#creating-figure-3b",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#creating-figure-3b",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Creating Figure 3B",
    "text": "Creating Figure 3B\n\n# Filter to staff nurse utilisation and config1 (0.87)\ndata_3b = data_full.loc[\n    'staff nurse occ', data_full.columns.str.endswith('087')]\n# Rename index\ndata_3b = data_3b.rename(index={'f3_arr111_serv087': '(1/1/1)',\n                                'f3_arr211_serv087': '(2/1/1)',\n                                'f3_arr222_serv087': '(2/2/2)'})\ndata_3b\n\n(1/1/1)    0.343989\n(2/1/1)    0.378359\n(2/2/2)    0.532546\nName: staff nurse occ, dtype: float64\n\n\n\nax = data_3b.plot.bar(edgecolor='black', color='white', hatch='..')\nplt.xlabel('Inpatient/childbirth/ANC cases per day')\nplt.ylabel('''Staff nurse's utilisation''')\nplt.ylim(0, 1)\nplt.xticks(rotation=0)\nax.grid(axis='y')\nax.set_axisbelow(True)\nplt.savefig(fig3b_path, bbox_inches='tight')\nplt.show()"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#creating-figure-3c",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#creating-figure-3c",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Creating Figure 3C",
    "text": "Creating Figure 3C\n\n# Filter to inpatient bed utilisation and config1 (0.87)\ndata_3c = data_full.loc[\n    'ipd bed occ', data_full.columns.str.endswith('087')]\n# Rename index\ndata_3c = data_3c.rename(index={'f3_arr111_serv087': '(1/1/1)',\n                                'f3_arr211_serv087': '(2/1/1)',\n                                'f3_arr222_serv087': '(2/2/2)'})\ndata_3c\n\n(1/1/1)    0.107832\n(2/1/1)    0.129961\n(2/2/2)    0.186271\nName: ipd bed occ, dtype: float64\n\n\n\nax = data_3c.plot.bar(edgecolor='black', color='white', hatch='..')\nplt.xlabel('Inpatient/childbirth/ANC cases per day')\nplt.ylabel('Inpatient bed utilisation')\nplt.ylim(0, 1)\nplt.xticks(rotation=0)\nax.grid(axis='y')\nax.set_axisbelow(True)\nplt.savefig(fig3c_path, bbox_inches='tight')\nplt.show()"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#creating-figure-3d",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#creating-figure-3d",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Creating Figure 3D",
    "text": "Creating Figure 3D\n\n# Filter to proportion of childbirth cases referred and config1 (0.87)\ndata_3d = data_full.loc[\n    'prop_del_referred', data_full.columns.str.endswith('087')]\n# Rename index\ndata_3d = data_3d.rename(index={'f3_arr111_serv087': '(1/1/1)',\n                                'f3_arr211_serv087': '(2/1/1)',\n                                'f3_arr222_serv087': '(2/2/2)'})\ndata_3d\n\n(1/1/1)    0.151000\n(2/1/1)    0.143832\n(2/2/2)    0.271968\nName: prop_del_referred, dtype: float64\n\n\n\nax = data_3d.plot.bar(edgecolor='black', color='white', hatch='..')\nplt.xlabel('Inpatient/childbirth/ANC cases per day')\nplt.ylabel('Proportion of childbirth cases referred')\nplt.yticks(np.arange(0, 0.5, 0.1))\nplt.xticks(rotation=0)\nax.grid(axis='y')\nax.set_axisbelow(True)\nplt.savefig(fig3d_path, bbox_inches='tight')\nplt.show()"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#reproducing-in-text-result-1",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#reproducing-in-text-result-1",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Reproducing in-text result 1",
    "text": "Reproducing in-text result 1\nThis result refers to “waiting times for outpatient-related resources (laboratory, OPD consultation, etc.)”. I assume this to refer to:\n\nOPD queue waiting time (minutes)\nLab queue waiting time (minutes)\n\n\n# Get OPD queue time\ndata_txt1_opd = reshape_087_25(data_full.loc['OPD Q wt'])\ndata_txt1_opd['Output'] = 'OPD queue waiting time (minutes)'\n\n# Get lab queue time\ndata_txt1_lab = reshape_087_25(data_full.loc['Lab Q wt'])\ndata_txt1_lab['Output'] = 'Lab queue waiting time (minutes)'\n\n# Combine, round, save and show dataframe\ndata_txt1 = round(pd.concat([data_txt1_opd, data_txt1_lab]), 3)\ndata_txt1.index.names = ['Consultation time: mean (SD)']\ndata_txt1.to_csv(txt1_path)\ndata_txt1\n\n\n\n\n\n\n\n\n(1/1/1)\n(2/1/1)\n(2/2/2)\nOutput\n\n\nConsultation time: mean (SD)\n\n\n\n\n\n\n\n\n0.87 (0.21)\n0.011\n0.010\n0.023\nOPD queue waiting time (minutes)\n\n\n2.5 (0.5)\n0.121\n0.124\n0.158\nOPD queue waiting time (minutes)\n\n\n0.87 (0.21)\n2.069\n2.070\n2.110\nLab queue waiting time (minutes)\n\n\n2.5 (0.5)\n2.314\n2.322\n2.308\nLab queue waiting time (minutes)\n\n\n\n\n\n\n\nProduced figures but, due to the very small amount of change observed in minutes, feel it is misleading, so will just save table.\n\nplot_087_25(data_txt1_opd, ylab='OPD queue waiting time (minutes)')\n\n\n\n\n\n\n\n\n\nplot_087_25(data_txt1_lab, ylim=[0, 3], ylab='Lab queue waiting time (minutes)')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_fig3_txt1.html#run-time",
    "href": "reproduction/scripts/reproduce_fig3_txt1.html#run-time",
    "title": "Reproducing Figure 3A-D and in-text result 1",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 2m 45s\n\n\n\n\n\nFigure 3A\nFigure 3B\nFigure 3C\nFigure 3D"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt2.html",
    "href": "reproduction/scripts/reproduce_txt2.html",
    "title": "Reproducing in-text result 2",
    "section": "",
    "text": "This notebook aims to reproduce in-text result 2 from Shoaib M, Ramamohan V. Simulation modeling and analysis of primary health center operations. SIMULATION 98(3):183-208. (2022). https://doi.org/10.1177/00375497211030931.\nIn-text result 2:"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt2.html#parameters",
    "href": "reproduction/scripts/reproduce_txt2.html#parameters",
    "title": "Reproducing in-text result 2",
    "section": "Parameters",
    "text": "Parameters\nThis result starts with the doctor utilisation from Figure 2A which is over 100% when patient load is 170 (IAT 3) and appointment times are 5 minutes (mean 5, SD 1, boundary 2).\nThe variant introduced is to give all administrative work to the staff nurse."
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt2.html#set-up",
    "href": "reproduction/scripts/reproduce_txt2.html#set-up",
    "title": "Reproducing in-text result 2",
    "section": "Set up",
    "text": "Set up\n\n# To run model\nimport PHC\nfrom reproduction_helpers import process_results\n\n# To import results and produce figures\nimport xlrd\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# To speed up run time\nfrom multiprocessing import Pool\n\n# Additional package to record runtime of this notebook\nimport time\nstart = time.time()\n\n\n# Paths to save image files to\noutput_folder = '../outputs'\nsave_path = os.path.join(output_folder, 'intext2.csv')"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt2.html#run-model",
    "href": "reproduction/scripts/reproduce_txt2.html#run-model",
    "title": "Reproducing in-text result 2",
    "section": "Run model",
    "text": "Run model\n\n# Parameters used in both models\nbase_model = {\n    'OPD_iat': 3,\n    'rep_file': 'arr170',\n    'mean': 5,\n    'sd': 1,\n    'consult_boundary_1': 2,\n    'consult_boundary_2': 2\n}\n\n# Model variants\nvariants = [\n    {\n        'admin_doc_to_staff': False,\n        'rep_file': 'in2_admin_doctor.xls'\n    },\n    {\n        'admin_doc_to_staff': True,\n        'rep_file': 'in2_admin_nurse.xls'\n    },\n]\n\n\n# Combine dictionaries\ndict_list = []\nfor var in variants:\n    dict_list.append({**base_model, **var})\n\n# Append 's_' to all items\nfor i, d in enumerate(dict_list):\n    dict_list[i] = {f's_{k}': v for k, v in d.items()}\n\n# View dictionaries\ndict_list\n\n[{'s_OPD_iat': 3,\n  's_rep_file': 'in2_admin_doctor.xls',\n  's_mean': 5,\n  's_sd': 1,\n  's_consult_boundary_1': 2,\n  's_consult_boundary_2': 2,\n  's_admin_doc_to_staff': False},\n {'s_OPD_iat': 3,\n  's_rep_file': 'in2_admin_nurse.xls',\n  's_mean': 5,\n  's_sd': 1,\n  's_consult_boundary_1': 2,\n  's_consult_boundary_2': 2,\n  's_admin_doc_to_staff': True}]\n\n\n\n# Wrapper function to allow input of dictionary with pool\ndef wrapper(d):\n    return PHC.main(**d)\n\n# Create a process pool that uses all CPUs\nwith Pool() as pool:\n    # Run PHC.main() using each of inputs from config\n    pool.map(wrapper, dict_list)\n\n No of replications done No of replications done  00\n\n No of replications done 1\n No of replications done 1\n No of replications done 2\n No of replications done 2\n No of replications done 3\n No of replications done 3\n No of replications done 4\n No of replications done 4\n No of replications done 5\n No of replications done 5\n No of replications done 6\n No of replications done 6\n No of replications done 7\n No of replications done 7\n No of replications done 8\n No of replications done 8\n No of replications done 9\n No of replications done 9"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt2.html#process-results",
    "href": "reproduction/scripts/reproduce_txt2.html#process-results",
    "title": "Reproducing in-text result 2",
    "section": "Process results",
    "text": "Process results\n\n# Process results\ndata = process_results([i['s_rep_file'] for i in dict_list], xls=True)\n\n\ndef get_utilisation(index_name, new_name):\n    '''\n    Creates dataframe with columns for utilisation (for a given row) before and\n    after admin change and the change in utilisation..\n\n    Parameters:\n    -----------\n    index_name : string\n        Name of row with utilisation dat\n    new_name : string\n        To rename the utilisation row (e.g. doc occ -&gt; doctor utilisation)\n\n    Returns:\n    --------\n    util : pandas DataFrame\n        Dataframe with three columns for utilisation before and after admin,\n        and change in utilisation.\n    '''\n    # Get utilisation\n    util = round(pd.DataFrame(data.loc[index_name]).T, 3)\n\n    # Find change\n    util['Change'] = util['in2_admin_nurse'] - util['in2_admin_doctor']\n\n    # Rename index\n    util = util.rename_axis('Output')\n    # Rename row\n    util = util.rename({index_name: new_name})\n    # Rename columns for clarity for readers\n    util = util.rename({\n        'in2_admin_doctor': 'Original utilisation',\n        'in2_admin_nurse': (\n            'Utilisation if admin is assigned to the staff nurse')\n    }, axis=1)\n\n    return util\n\n\n# Get results for doctor utilisation and staff nurse utilisation\nutil = pd.concat([\n    get_utilisation('doc occ', 'Doctor utilisation'),\n    get_utilisation('staff nurse occ', 'Staff nurse utilisation')])\n\n# Display results\ndisplay(util)\n\n# Save results\nutil.to_csv(save_path, index=True)\n\n\n\n\n\n\n\n\nOriginal utilisation\nUtilisation if admin is assigned to the staff nurse\nChange\n\n\nOutput\n\n\n\n\n\n\n\nDoctor utilisation\n1.141\n1.023\n-0.118\n\n\nStaff nurse utilisation\n0.326\n0.404\n0.078"
  },
  {
    "objectID": "reproduction/scripts/reproduce_txt2.html#run-time",
    "href": "reproduction/scripts/reproduce_txt2.html#run-time",
    "title": "Reproducing in-text result 2",
    "section": "Run time",
    "text": "Run time\n\n# Find run time in seconds\nend = time.time()\nruntime = round(end-start)\n\n# Display converted to minutes and seconds\nprint(f'Notebook run time: {runtime//60}m {runtime%60}s')\n\nNotebook run time: 2m 29s"
  }
]